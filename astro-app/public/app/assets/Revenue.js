import{j as e,h as c,B as k,C as i,a as n,b as d,c as o,T as E,g as v}from"./index.js";import{T as G,a as K,b,c as N}from"./tabs.js";import{R as m,A as L,C as y,X as w,Y as h,T as u,a as A,b as R,B as O,c as S}from"./AreaChart.js";import{P as B,a as M,C as W}from"./ComposedChart.js";import{u as I}from"./useSatisfactionAnalytics.js";import{a as z}from"./useAnalyticsExport.js";import{F as H}from"./file-text.js";import{F as X}from"./file-spreadsheet.js";import{E as Y,C as U}from"./euro.js";import{C as V}from"./calendar.js";import"./index2.js";import"./index3.js";import"./isPlainObject.js";import"./useQuery.js";import"./endOfWeek.js";import"./fr.js";const q=({weeklyData:r,isLoading:l=!1})=>l?e.jsx(c,{className:"h-[400px] w-full"}):r.length===0?e.jsx("div",{className:"flex items-center justify-center h-[400px] text-muted-foreground",children:"Aucune donnée de revenus disponible"}):e.jsx("div",{className:"h-[400px] w-full",children:e.jsx(m,{width:"100%",height:"100%",children:e.jsxs(L,{data:r,margin:{top:10,right:30,left:0,bottom:0},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"revenueGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"hsl(var(--primary))",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"hsl(var(--primary))",stopOpacity:0})]})}),e.jsx(y,{strokeDasharray:"3 3",className:"opacity-30"}),e.jsx(w,{dataKey:"week",className:"text-sm",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(h,{className:"text-sm",tick:{fill:"hsl(var(--muted-foreground))"},tickFormatter:s=>`€${s}`}),e.jsx(u,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"},formatter:(s,t)=>[t==="revenue"?`€${s}`:s,t==="revenue"?"Revenus":"Commandes"],labelStyle:{color:"hsl(var(--foreground))"}}),e.jsx(A,{type:"monotone",dataKey:"revenue",stroke:"hsl(var(--primary))",strokeWidth:3,fill:"url(#revenueGradient)",fillOpacity:.6,isAnimationActive:!0})]})})}),D=({categoryData:r,isLoading:l=!1})=>l?e.jsxs("div",{className:"space-y-8",children:[e.jsx(c,{className:"h-[300px] w-full"}),e.jsx(c,{className:"h-[300px] w-full"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[1,2,3,4,5].map(s=>e.jsx(c,{className:"h-24"},s))})]}):r.length===0?e.jsx("div",{className:"flex items-center justify-center h-[300px] text-muted-foreground",children:"Aucune donnée de catégorie disponible"}):e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"h-[300px] w-full",children:e.jsx(m,{width:"100%",height:"100%",children:e.jsxs(B,{children:[e.jsx(M,{data:r,cx:"50%",cy:"50%",labelLine:!1,label:({name:s,percentage:t})=>`${s} ${t}%`,outerRadius:100,fill:"#8884d8",dataKey:"revenue",isAnimationActive:!0,children:r.map((s,t)=>e.jsx(R,{fill:s.color},`cell-${t}`))}),e.jsx(u,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"},formatter:s=>[`€${s}`,"Revenus"]})]})})}),e.jsx("div",{className:"h-[300px] w-full",children:e.jsx(m,{width:"100%",height:"100%",children:e.jsxs(O,{data:r,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(y,{strokeDasharray:"3 3",className:"opacity-30"}),e.jsx(w,{dataKey:"name",className:"text-sm",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(h,{className:"text-sm",tick:{fill:"hsl(var(--muted-foreground))"},tickFormatter:s=>`€${s}`}),e.jsx(u,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"},formatter:s=>[`€${s}`,"Revenus"],labelStyle:{color:"hsl(var(--foreground))"}}),e.jsx(S,{dataKey:"revenue",radius:[4,4,0,0],isAnimationActive:!0,children:r.map((s,t)=>e.jsx(R,{fill:s.color},`cell-${t}`))})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:r.slice(0,5).map(s=>e.jsx("div",{className:"p-4 rounded-lg border bg-card text-card-foreground",style:{borderLeft:`4px solid ${s.color}`},children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold text-sm",children:s.name}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-2xl font-bold",children:["€",s.revenue]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.percentage,"% du total"]})]})]})},s.name))})]}),J=({growthData:r,averageGrowth:l=0,bestMonth:s="N/A",bestMonthGrowth:t=0,isLoading:p=!1})=>{if(p)return e.jsxs("div",{className:"space-y-8",children:[e.jsx(c,{className:"h-[400px] w-full"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[1,2,3].map(a=>e.jsx(c,{className:"h-24"},a))})]});if(r.length===0)return e.jsx("div",{className:"flex items-center justify-center h-[400px] text-muted-foreground",children:"Aucune donnée de croissance disponible"});const f=r.reduce((a,x)=>a+x.revenue,0),j=r.filter(a=>a.revenue>0).length;return e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"h-[400px] w-full",children:e.jsx(m,{width:"100%",height:"100%",children:e.jsxs(W,{data:r,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"growthGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"hsl(var(--primary))",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"hsl(var(--primary))",stopOpacity:0})]})}),e.jsx(y,{strokeDasharray:"3 3",className:"opacity-30"}),e.jsx(w,{dataKey:"month",className:"text-sm",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(h,{yAxisId:"revenue",orientation:"left",className:"text-sm",tick:{fill:"hsl(var(--muted-foreground))"},tickFormatter:a=>`€${a}`}),e.jsx(h,{yAxisId:"growth",orientation:"right",className:"text-sm",tick:{fill:"hsl(var(--muted-foreground))"},tickFormatter:a=>`${a}%`}),e.jsx(u,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"},formatter:(a,x)=>x==="revenue"?[`€${a}`,"Revenus"]:[`${a}%`,"Croissance"],labelStyle:{color:"hsl(var(--foreground))"}}),e.jsx(A,{yAxisId:"revenue",type:"monotone",dataKey:"revenue",stroke:"hsl(var(--primary))",strokeWidth:3,fill:"url(#growthGradient)",fillOpacity:.6,isAnimationActive:!0}),e.jsx(S,{yAxisId:"growth",dataKey:"growth",fill:"hsl(var(--accent))",fillOpacity:.7,radius:[2,2,0,0],isAnimationActive:!0})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"p-4 rounded-lg border bg-card text-card-foreground bg-gradient-to-br from-green-500/5 to-green-500/10",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Croissance moyenne"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[l>=0?"+":"",l,"%"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Sur ",j," mois avec activité"]})]})}),e.jsx("div",{className:"p-4 rounded-lg border bg-card text-card-foreground bg-gradient-to-br from-blue-500/5 to-blue-500/10",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Meilleur mois"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:s}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[t>=0?"+":"",t,"% de croissance"]})]})}),e.jsx("div",{className:"p-4 rounded-lg border bg-card text-card-foreground bg-gradient-to-br from-purple-500/5 to-purple-500/10",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Revenus totaux"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:["€",f.toLocaleString("fr-FR")]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Sur la période"})]})})]})]})},he=()=>{const{revenueThisMonth:r,growthPercentage:l,averageWeeklyRevenue:s,bestCategory:t,bestCategoryPercentage:p,weeklyRevenue:f,revenueByCategory:j,monthlyGrowth:a,averageGrowth:x,bestMonth:T,bestMonthGrowth:$,isLoading:g}=I(),{exportPDF:F,exportExcel:P,isExporting:C}=z();return e.jsxs("div",{className:"p-6 space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 animate-fade-in",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Analyse des Revenus"}),e.jsx("p",{className:"text-muted-foreground",children:"Suivez vos performances financières en temps réel"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(k,{variant:"outline",size:"sm",onClick:F,disabled:C,children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Export PDF"]}),e.jsxs(k,{variant:"outline",size:"sm",onClick:P,disabled:C,children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),"Export Excel"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 animate-slide-up",children:[e.jsxs(i,{className:"border-primary/10 bg-gradient-to-br from-green-500/5 to-green-500/10",children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Revenus ce mois"}),e.jsx(Y,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(o,{children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["€",r.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[l>=0?"+":"",l,"% vs mois dernier"]})]})]}),e.jsxs(i,{className:"border-primary/10 bg-gradient-to-br from-blue-500/5 to-blue-500/10",children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Moyenne/semaine"}),e.jsx(V,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(o,{children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:["€",s.toLocaleString()]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Sur les 12 dernières semaines"})]})]}),e.jsxs(i,{className:"border-primary/10 bg-gradient-to-br from-purple-500/5 to-purple-500/10",children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Meilleure catégorie"}),e.jsx(U,{className:"h-4 w-4 text-purple-600"})]}),e.jsxs(o,{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:t}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[p,"% du chiffre d'affaires"]})]})]}),e.jsxs(i,{className:"border-primary/10 bg-gradient-to-br from-orange-500/5 to-orange-500/10",children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Croissance"}),e.jsx(E,{className:"h-4 w-4 text-orange-600"})]}),e.jsxs(o,{children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[l>=0?"+":"",l,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Croissance mensuelle"})]})]})]}),e.jsxs(G,{defaultValue:"weekly",className:"animate-slide-up animation-delay-200",children:[e.jsxs(K,{className:"h-auto flex flex-col md:grid w-full md:grid-cols-3 gap-2 md:gap-0",children:[e.jsx(b,{value:"weekly",className:"w-full",children:"Revenus Hebdomadaires"}),e.jsx(b,{value:"category",className:"w-full",children:"Par Catégorie"}),e.jsx(b,{value:"growth",className:"w-full",children:"Croissance"})]}),e.jsx(N,{value:"weekly",className:"space-y-4 animate-tab-content mt-4 md:mt-2",children:e.jsxs(i,{children:[e.jsxs(n,{children:[e.jsx(d,{children:"Revenus par Semaine"}),e.jsx(v,{children:"Évolution de vos revenus semaine par semaine"})]}),e.jsx(o,{children:e.jsx(q,{weeklyData:f,isLoading:g})})]})}),e.jsx(N,{value:"category",className:"space-y-4 animate-tab-content",children:e.jsxs(i,{children:[e.jsxs(n,{children:[e.jsx(d,{children:"Revenus par Catégorie de Produits"}),e.jsx(v,{children:"Répartition de vos revenus par type de produit"})]}),e.jsx(o,{children:e.jsx(D,{categoryData:j,isLoading:g})})]})}),e.jsx(N,{value:"growth",className:"space-y-4 animate-tab-content",children:e.jsxs(i,{children:[e.jsxs(n,{children:[e.jsx(d,{children:"Tendance de Croissance"}),e.jsx(v,{children:"Analyse de la croissance de vos revenus"})]}),e.jsx(o,{children:e.jsx(J,{growthData:a,averageGrowth:x,bestMonth:T,bestMonthGrowth:$,isLoading:g})})]})})]})]})};export{he as default};
