import{d as me,r as d,s as x,m as n,j as e,C,a as R,c as k,S as ge,b as H,g as $,e as se,J as te,K as re,N as ae,O as ne,B as _,U as he,ai as ie,H as fe,aj as T,I as oe}from"./index.js";import{L as h}from"./label.js";import{S as P}from"./switch.js";import{C as X}from"./ConfirmDialog.js";import je from"./purify.es.js";import{T as Se}from"./textarea.js";import{T as _e,a as ve,b as le,c as ce}from"./tabs.js";import{S as ye}from"./scroll-area.js";import{A as de,a as ue}from"./alert.js";import{I as Ee,C as Ne}from"./info.js";import{E as be}from"./eye.js";import{S as Ae}from"./save.js";import{R as Te}from"./rotate-ccw.js";import{U as we}from"./user-plus.js";import{M as Ce}from"./mail.js";import{D as Re}from"./database.js";import"./index5.js";import"./alert-dialog.js";import"./index2.js";import"./index3.js";import"./index4.js";const q=[{key:"[[RESTAURANT_NAME]]",description:"Nom du restaurant",color:"bg-blue-500/20 text-blue-700 border-blue-300"},{key:"[[ADDRESS]]",description:"Adresse compl√®te",color:"bg-green-500/20 text-green-700 border-green-300"},{key:"[[OPENING_HOURS]]",description:"Horaires d'ouverture",color:"bg-purple-500/20 text-purple-700 border-purple-300"},{key:"[[CATEGORIES]]",description:"Liste des cat√©gories",color:"bg-orange-500/20 text-orange-700 border-orange-300"},{key:"[[ASSETS]]",description:"URLs et descriptions des images",color:"bg-pink-500/20 text-pink-700 border-pink-300"},{key:"[[ORDER_WAIT_TIME]]",description:"Temps d'attente commande (minutes)",color:"bg-cyan-500/20 text-cyan-700 border-cyan-300"}],G=[{key:"{{NOW}}",description:"Date et heure actuelles",color:"bg-amber-500/20 text-amber-700 border-amber-300"},{key:"{{CUSTOMER_NAME}}",description:"Nom du client WhatsApp",color:"bg-red-500/20 text-red-700 border-red-300"},{key:"{{USER_MESSAGE}}",description:"Message du client",color:"bg-red-500/20 text-red-700 border-red-300"}],w=`Tu es l'assistant virtuel de [[RESTAURANT_NAME]], un chatbot WhatsApp intelligent sp√©cialis√© dans la prise de commande et le service client pour la restauration.

## üè† INFORMATIONS DU RESTAURANT

**Nom :** [[RESTAURANT_NAME]]
**Adresse :** [[ADDRESS]]
**Temps d'attente estim√© pour r√©cup√©rer une commande :** [[ORDER_WAIT_TIME]] minutes

**Horaires d'ouverture :**
[[OPENING_HOURS]]

## üìã CAT√âGORIES DU CATALOGUE

Les cat√©gories disponibles sont : [[CATEGORIES]]

## üñºÔ∏è IMAGES ET ASSETS DISPONIBLES

Tu peux envoyer ces images aux clients si pertinent :
[[ASSETS]]

## üìú R√àGLES DE COMPORTEMENT

1. **Accueil** : Salue chaleureusement chaque nouveau client
2. **Langue** : R√©ponds toujours dans la langue du client
3. **Prise de commande** : Guide le client √† travers le menu, propose des suggestions
4. **R√©servations** : G√®re les demandes de r√©servation
5. **Questions** : R√©ponds aux questions sur les allerg√®nes, ingr√©dients, horaires
6. **Politesse** : Reste toujours poli, professionnel et serviable
7. **Clarification** : Si une demande est ambigu√´, demande des pr√©cisions

## ‚öôÔ∏è FORMAT DE R√âPONSE

- Utilise des emojis avec parcimonie pour rendre les messages chaleureux
- Sois concis mais informatif
- Propose toujours une action suivante au client

---

## üîÑ BLOC DYNAMIQUE (inject√© automatiquement par n8n √† chaque requ√™te)

**Contexte temporel :**
- Date et heure actuelles : {{NOW}}

**Informations client :**
- Nom du client WhatsApp : {{CUSTOMER_NAME}}

**Message √† traiter :**
{{USER_MESSAGE}}
`;function ke(){const{session:v}=me(),[u,c]=d.useState(""),[j,z]=d.useState("edit"),[N,f]=d.useState(!0),[p,O]=d.useState(!1),[S,M]=d.useState(!1),[b,I]=d.useState(!1),[D,V]=d.useState(0);d.useEffect(()=>{y(),B()},[]);const y=async()=>{var t;try{const{data:s,error:i}=await x.from("system_settings").select("setting_value").eq("setting_key","starter_prompt_template").maybeSingle();if(i)throw i;if(s!=null&&s.setting_value){const a=typeof s.setting_value=="string"?s.setting_value:((t=s.setting_value)==null?void 0:t.template)||"";c(a)}else c(w)}catch(s){console.error("Error loading starter prompt template:",s),n.error("Erreur lors du chargement du template"),c(w)}finally{f(!1)}},B=async()=>{try{const{count:t,error:s}=await x.from("user_subscriptions").select("*",{count:"exact",head:!0}).eq("plan","starter");if(s)throw s;V(t||0)}catch(t){console.error("Error counting starter users:",t)}},U=async()=>{if(!v){n.error("Session expir√©e");return}O(!0);try{const{error:t}=await x.from("system_settings").upsert({setting_key:"starter_prompt_template",setting_value:{template:u},updated_by:v.user.id,updated_at:new Date().toISOString()},{onConflict:"setting_key"});if(t)throw t;n.success("Template Starter sauvegard√© avec succ√®s")}catch(t){console.error("Error saving starter prompt template:",t),n.error("Erreur lors de la sauvegarde")}finally{O(!1)}},W=()=>{c(w),n.info("Template r√©initialis√© (non sauvegard√©)")},F=t=>!t||!Array.isArray(t)?"Horaires non renseign√©s":t.filter(i=>i.slot1||i.slot2).map(i=>`${i.day||""}: ${[i.slot1,i.slot2].filter(Boolean).join(" / ")}`).join(`
`)||"Horaires non renseign√©s",Q=t=>!t||!Array.isArray(t)||t.length===0?"Aucune image disponible":t.map(s=>`- ${s.description||s.filename||"Image"}: ${s.url||""}`).join(`
`),Y=(t,s,i)=>{let a=t;a=a.replace(/\[\[RESTAURANT_NAME\]\]/g,s.restaurant_name||"Restaurant");const E=[s.address_street,s.address_postal_code,s.address_city].filter(Boolean).join(", ");a=a.replace(/\[\[ADDRESS\]\]/g,E||"Adresse non renseign√©e");const J=F(s.opening_hours);a=a.replace(/\[\[OPENING_HOURS\]\]/g,J),a=a.replace(/\[\[ORDER_WAIT_TIME\]\]/g,String(s.order_time_minutes||15));const A=Q(s.assets);return a=a.replace(/\[\[ASSETS\]\]/g,A),a=a.replace(/\[\[CATEGORIES\]\]/g,i.join(", ")||"Aucune cat√©gorie"),a},r=async()=>{I(!1),M(!0);try{const{data:t,error:s}=await x.from("user_subscriptions").select("user_id").eq("plan","starter");if(s)throw s;if(!t||t.length===0){n.info("Aucun utilisateur Starter trouv√©");return}const i=t.map(m=>m.user_id),{data:a,error:E}=await x.from("restaurant_settings").select(`
          user_id,
          restaurant_name,
          address_street,
          address_postal_code,
          address_city,
          opening_hours,
          order_time_minutes,
          assets
        `).in("user_id",i);if(E)throw E;if(!a||a.length===0){n.warning("Aucun restaurant configur√© parmi les utilisateurs Starter");return}const J=a.map(m=>m.user_id),{data:A,error:Z}=await x.from("products").select("user_id, category").in("user_id",J);Z&&console.error("Error fetching products:",Z);const L={};A==null||A.forEach(m=>{L[m.user_id]||(L[m.user_id]=new Set),L[m.user_id].add(m.category)});let K=0;for(const m of a){const pe=Array.from(L[m.user_id]||[]),xe=Y(u,m,pe),{error:ee}=await x.from("restaurant_settings").update({chatbot_prompt:xe,updated_at:new Date().toISOString()}).eq("user_id",m.user_id);ee?console.error(`Error updating restaurant for user ${m.user_id}:`,ee):(K++,console.log(`Updated ${m.restaurant_name||m.user_id} with personalized prompt`))}K>0?n.success(`Template personnalis√© appliqu√© √† ${K} restaurant(s) Starter`):n.warning("Aucun restaurant mis √† jour"),await U()}catch(t){console.error("Error applying template to all starters:",t),n.error("Erreur lors de l'application du template")}finally{M(!1)}},o=d.useMemo(()=>{let s=(i=>{const a=document.createElement("div");return a.textContent=i,a.innerHTML})(u||w);return s=s.replace(/\[\[RESTAURANT_NAME\]\]/g,'<span class="bg-blue-500/30 px-1 rounded font-medium">[[RESTAURANT_NAME]]</span>'),s=s.replace(/\[\[ADDRESS\]\]/g,'<span class="bg-green-500/30 px-1 rounded font-medium">[[ADDRESS]]</span>'),s=s.replace(/\[\[OPENING_HOURS\]\]/g,'<span class="bg-purple-500/30 px-1 rounded font-medium">[[OPENING_HOURS]]</span>'),s=s.replace(/\[\[CATEGORIES\]\]/g,'<span class="bg-orange-500/30 px-1 rounded font-medium">[[CATEGORIES]]</span>'),s=s.replace(/\[\[ASSETS\]\]/g,'<span class="bg-pink-500/30 px-1 rounded font-medium">[[ASSETS]]</span>'),s=s.replace(/\[\[ORDER_WAIT_TIME\]\]/g,'<span class="bg-cyan-500/30 px-1 rounded font-medium">[[ORDER_WAIT_TIME]]</span>'),s=s.replace(/\{\{NOW\}\}/g,'<span class="bg-amber-500/30 px-1 rounded font-mono text-xs">{{NOW}}</span>'),s=s.replace(/\{\{CUSTOMER_NAME\}\}/g,'<span class="bg-red-500/30 px-1 rounded font-mono text-xs">{{CUSTOMER_NAME}}</span>'),s=s.replace(/\{\{USER_MESSAGE\}\}/g,'<span class="bg-red-500/30 px-1 rounded font-mono text-xs">{{USER_MESSAGE}}</span>'),je.sanitize(s,{ALLOWED_TAGS:["span"],ALLOWED_ATTR:["class"]})},[u]),g=d.useMemo(()=>{const t=u||"";return{static:q.filter(s=>t.includes(s.key)).length,dynamic:G.filter(s=>t.includes(s.key)).length,total:q.length+G.length}},[u]),l=t=>{const s=document.getElementById("starter-prompt-textarea");if(s){const i=s.selectionStart,a=s.selectionEnd,E=u.slice(0,i)+t+u.slice(a);c(E),setTimeout(()=>{s.selectionStart=s.selectionEnd=i+t.length,s.focus()},0)}else c(u+t)};return N?e.jsxs(C,{children:[e.jsx(R,{children:e.jsxs("div",{className:"animate-pulse space-y-2",children:[e.jsx("div",{className:"h-6 bg-muted rounded w-1/3"}),e.jsx("div",{className:"h-4 bg-muted rounded w-2/3"})]})}),e.jsx(k,{children:e.jsx("div",{className:"animate-pulse h-64 bg-muted rounded"})})]}):e.jsxs(C,{children:[e.jsxs(R,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"h-5 w-5 text-primary"}),e.jsx(H,{children:"Template Prompt Starter"})]}),e.jsx($,{children:"Ce template est utilis√© par d√©faut pour tous les restaurants avec le plan Starter. Les placeholders seront remplac√©s par les donn√©es de chaque restaurant."})]}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(se,{variant:"outline",className:"text-xs",children:[g.static,"/",q.length," statiques"]}),e.jsxs(se,{variant:"outline",className:"text-xs",children:[g.dynamic,"/",G.length," dynamiques"]})]}),e.jsxs(de,{children:[e.jsx(Ee,{className:"h-4 w-4"}),e.jsxs(ue,{className:"text-xs",children:["Les placeholders ",e.jsx("code",{className:"bg-blue-500/20 px-1 rounded",children:"[[...]]"})," sont remplac√©s par les donn√©es Supabase. Les variables ",e.jsxs("code",{className:"bg-amber-500/20 px-1 rounded",children:["{{"," ... ","}}"]})," sont inject√©es par n8n √† chaque requ√™te."]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(h,{className:"text-xs text-muted-foreground mb-2 block",children:"Placeholders statiques (Supabase)"}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:q.map(t=>e.jsx(te,{children:e.jsxs(re,{children:[e.jsx(ae,{asChild:!0,children:e.jsx("button",{type:"button",onClick:()=>l(t.key),className:`px-2 py-1 text-xs rounded border font-mono hover:opacity-80 transition-opacity ${t.color}`,children:t.key})}),e.jsx(ne,{children:e.jsx("p",{children:t.description})})]})},t.key))})]}),e.jsxs("div",{children:[e.jsx(h,{className:"text-xs text-muted-foreground mb-2 block",children:"Variables dynamiques (n8n)"}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:G.map(t=>e.jsx(te,{children:e.jsxs(re,{children:[e.jsx(ae,{asChild:!0,children:e.jsx("button",{type:"button",onClick:()=>l(t.key),className:`px-2 py-1 text-xs rounded border font-mono hover:opacity-80 transition-opacity ${t.color}`,children:t.key})}),e.jsx(ne,{children:e.jsx("p",{children:t.description})})]})},t.key))})]})]}),e.jsxs(_e,{value:j,onValueChange:z,className:"w-full",children:[e.jsxs(ve,{className:"grid w-full grid-cols-2",children:[e.jsxs(le,{value:"edit",className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"h-4 w-4"}),"√âditer"]}),e.jsxs(le,{value:"preview",className:"flex items-center gap-2",children:[e.jsx(be,{className:"h-4 w-4"}),"Aper√ßu"]})]}),e.jsx(ce,{value:"edit",className:"mt-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"starter-prompt-textarea",children:"Contenu du template"}),e.jsx(Se,{id:"starter-prompt-textarea",value:u,onChange:t=>c(t.target.value),placeholder:w,className:"min-h-[400px] font-mono text-sm resize-y"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[(u||"").length," caract√®res"]})]})}),e.jsx(ce,{value:"preview",className:"mt-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{children:"Aper√ßu avec placeholders color√©s"}),e.jsx(ye,{className:"h-[400px] w-full rounded-md border bg-muted/30 p-4",children:e.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none whitespace-pre-wrap font-mono text-sm",dangerouslySetInnerHTML:{__html:o}})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Les placeholders sont mis en √©vidence. Ils seront remplac√©s par les donn√©es de chaque restaurant."})]})})]}),e.jsxs("div",{className:"flex flex-col gap-4 pt-4 border-t",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs(_,{onClick:U,disabled:p||S,children:[e.jsx(Ae,{className:"h-4 w-4 mr-2"}),p?"Sauvegarde...":"Sauvegarder (nouveaux utilisateurs)"]}),e.jsxs(_,{variant:"outline",onClick:W,disabled:p||S,children:[e.jsx(Te,{className:"h-4 w-4 mr-2"}),"R√©initialiser"]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs(_,{variant:"secondary",onClick:()=>I(!0),disabled:p||S,children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),S?"Application...":`Appliquer √† tous les Starter (${D})`]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Mettra √† jour le prompt de tous les utilisateurs Starter existants"})]})]}),e.jsxs(de,{className:"mt-4",children:[e.jsx(we,{className:"h-4 w-4"}),e.jsxs(ue,{children:[e.jsx("strong",{children:"Sauvegarder"})," = Le template sera utilis√© pour les nouveaux utilisateurs Starter uniquement.",e.jsx("br",{}),e.jsx("strong",{children:"Appliquer √† tous"})," = Mettra √† jour le prompt de tous les Starter existants ET sera utilis√© pour les nouveaux."]})]})]}),e.jsx(X,{open:b,onOpenChange:I,title:"Appliquer √† tous les Starter",description:`√ätes-vous s√ªr de vouloir appliquer ce template √† ${D} utilisateur(s) Starter ? Leurs prompts actuels seront remplac√©s.`,onConfirm:r,variant:"default"})]})}function Ze(){const{session:v,loading:u}=me(),[c,j]=d.useState({allow_registration:!0,max_login_attempts:5,block_duration_minutes:15,email_notifications_signup:!0,email_notifications_security:!0,maintenance_mode:!1}),[z,N]=d.useState(!0),[f,p]=d.useState(null),[O,S]=d.useState(!1),[M,b]=d.useState(!1),[I,D]=d.useState(!1);d.useEffect(()=>{!u&&v?V():!u&&!v&&(n.error("Session expir√©e. Veuillez vous reconnecter."),N(!1))},[u,v]);const V=async()=>{var r;try{const{data:{session:o},error:g}=await x.auth.getSession();if(g||!o){n.error("Session expir√©e. Veuillez vous reconnecter."),N(!1);return}const{data:l,error:t}=await x.functions.invoke("admin-get-settings",{headers:{Authorization:`Bearer ${o.access_token}`}});if(t){if(t instanceof ie){const s=(r=t.context)==null?void 0:r.status;if(s===401||s===403){n.error("Session expir√©e ou acc√®s refus√©. Veuillez vous reconnecter.");return}}throw t}j({allow_registration:l.allow_registration??!0,max_login_attempts:l.max_login_attempts??5,block_duration_minutes:l.block_duration_minutes??15,email_notifications_signup:l.email_notifications_signup??!0,email_notifications_security:l.email_notifications_security??!0,maintenance_mode:l.maintenance_mode??!1})}catch(o){console.error("Error loading settings:",o),n.error("Erreur lors du chargement des param√®tres")}finally{N(!1)}},y=async(r,o)=>{var g;p(o);try{const{data:{session:l},error:t}=await x.auth.getSession();if(t||!l){n.error("Session expir√©e. Veuillez vous reconnecter."),p(null);return}const{error:s}=await x.functions.invoke("admin-update-settings",{body:r,headers:{Authorization:`Bearer ${l.access_token}`}});if(s){if(s instanceof ie){const i=(g=s.context)==null?void 0:g.status;if(i===401||i===403){n.error("Session expir√©e ou acc√®s refus√©. Veuillez vous reconnecter.");return}}throw s}j(i=>({...i,...r})),n.success("Param√®tres enregistr√©s avec succ√®s")}catch(l){console.error("Error updating settings:",l),n.error(l.message||"Erreur lors de la sauvegarde des param√®tres")}finally{p(null)}},B=()=>{y({allow_registration:c.allow_registration,max_login_attempts:c.max_login_attempts,block_duration_minutes:c.block_duration_minutes},"security")},U=()=>{y({email_notifications_signup:c.email_notifications_signup,email_notifications_security:c.email_notifications_security},"email")},W=async()=>{S(!1),p("cleanup");try{const{data:{session:r},error:o}=await x.auth.getSession();if(o||!r){n.error("Session expir√©e. Veuillez vous reconnecter."),p(null);return}const{data:g,error:l}=await x.functions.invoke("admin-cleanup-logs",{headers:{Authorization:`Bearer ${r.access_token}`}});if(l)throw l;const t=g.stats;n.success(`Nettoyage termin√© : ${t.login_attempts_deleted} tentatives de connexion et ${t.security_blocks_deleted} blocages supprim√©s`)}catch(r){console.error("Error cleaning up logs:",r),n.error(r.message||"Erreur lors du nettoyage des logs")}finally{p(null)}},F=async()=>{p("export");try{const{data:{session:r},error:o}=await x.auth.getSession();if(o||!r){n.error("Session expir√©e. Veuillez vous reconnecter."),p(null);return}const g=await fetch("https://dcwfgxbwpecnjbhrhrib.supabase.co/functions/v1/admin-export-users",{method:"POST",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"}});if(!g.ok)throw new Error("Export failed");const l=await g.blob(),t=window.URL.createObjectURL(l),s=document.createElement("a");s.href=t,s.download=`users-export-${new Date().toISOString()}.csv`,document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(t),document.body.removeChild(s),n.success("Donn√©es export√©es avec succ√®s")}catch(r){console.error("Error exporting data:",r),n.error("Erreur lors de l'export des donn√©es")}finally{p(null)}},Q=r=>{r?(D(r),b(!0)):y({maintenance_mode:!1},"maintenance")},Y=()=>{b(!1),y({maintenance_mode:!0},"maintenance")};return z||u?e.jsx("div",{className:"p-8",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-muted rounded w-1/3"}),e.jsx("div",{className:"h-64 bg-muted rounded"})]})}):e.jsxs("div",{className:"p-8 space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Param√®tres Syst√®me"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Configurer les param√®tres g√©n√©raux de la plateforme"})]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsxs(C,{children:[e.jsxs(R,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fe,{className:"h-5 w-5"}),e.jsx(H,{children:"Param√®tres de S√©curit√©"})]}),e.jsx($,{children:"G√©rer les r√®gles de s√©curit√© et d'authentification"})]}),e.jsxs(k,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(h,{children:"Autoriser les inscriptions"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Permettre aux nouveaux utilisateurs de cr√©er un compte"})]}),e.jsx(P,{checked:c.allow_registration,onCheckedChange:r=>j(o=>({...o,allow_registration:r}))})]}),e.jsx(T,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"max-attempts",children:"Nombre maximum de tentatives de connexion"}),e.jsx(oe,{id:"max-attempts",type:"number",value:c.max_login_attempts,onChange:r=>j(o=>({...o,max_login_attempts:parseInt(r.target.value)||5})),className:"max-w-xs",min:1,max:20}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Apr√®s ce nombre, le compte sera temporairement bloqu√©"})]}),e.jsx(T,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"block-duration",children:"Dur√©e de blocage (minutes)"}),e.jsx(oe,{id:"block-duration",type:"number",value:c.block_duration_minutes,onChange:r=>j(o=>({...o,block_duration_minutes:parseInt(r.target.value)||15})),className:"max-w-xs",min:1,max:1440}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Dur√©e pendant laquelle un compte reste bloqu√© apr√®s trop de tentatives"})]}),e.jsx(_,{onClick:B,disabled:f==="security",children:f==="security"?"Enregistrement...":"Sauvegarder les modifications"})]})]}),e.jsxs(C,{children:[e.jsxs(R,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ce,{className:"h-5 w-5"}),e.jsx(H,{children:"Configuration Email"})]}),e.jsx($,{children:"Param√®tres des notifications par email"})]}),e.jsxs(k,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(h,{children:"Notifications d'inscription"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Envoyer un email aux admins lors d'une nouvelle inscription"})]}),e.jsx(P,{checked:c.email_notifications_signup,onCheckedChange:r=>j(o=>({...o,email_notifications_signup:r}))})]}),e.jsx(T,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(h,{children:"Alertes de s√©curit√©"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Notifier les admins en cas d'activit√© suspecte"})]}),e.jsx(P,{checked:c.email_notifications_security,onCheckedChange:r=>j(o=>({...o,email_notifications_security:r}))})]}),e.jsx(_,{onClick:U,disabled:f==="email",children:f==="email"?"Enregistrement...":"Sauvegarder les modifications"})]})]}),e.jsxs(C,{children:[e.jsxs(R,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Re,{className:"h-5 w-5"}),e.jsx(H,{children:"Maintenance"})]}),e.jsx($,{children:"Outils de maintenance et nettoyage"})]}),e.jsxs(k,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(h,{children:"Mode maintenance"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"D√©sactiver temporairement l'acc√®s √† la plateforme pour les utilisateurs"})]}),e.jsx(P,{checked:c.maintenance_mode,onCheckedChange:Q,disabled:f==="maintenance"})]}),e.jsx(T,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{children:"Nettoyer les anciens logs"}),e.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:"Supprimer les logs de connexion de plus de 24 heures et les blocages expir√©s"}),e.jsx(_,{variant:"outline",onClick:()=>S(!0),disabled:f==="cleanup",children:f==="cleanup"?"Nettoyage...":"Nettoyer maintenant"})]}),e.jsx(T,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{children:"Export des donn√©es"}),e.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:"T√©l√©charger toutes les donn√©es utilisateurs au format CSV"}),e.jsx(_,{variant:"outline",onClick:F,disabled:f==="export",children:f==="export"?"Export en cours...":"Exporter les donn√©es"})]})]})]}),e.jsx(ke,{})]}),e.jsx(X,{open:O,onOpenChange:S,title:"Nettoyer les logs",description:"√ätes-vous s√ªr de vouloir supprimer les anciens logs ? Cette action est irr√©versible.",onConfirm:W,variant:"default"}),e.jsx(X,{open:M,onOpenChange:b,title:"Activer le mode maintenance",description:"Le mode maintenance emp√™chera tous les utilisateurs (sauf les admins) d'acc√©der √† la plateforme. Voulez-vous continuer ?",onConfirm:Y,variant:"default"})]})}export{Ze as default};
