import{r as i,X as u,j as s}from"./index.js";import{P as f}from"./progress.js";import{C as x}from"./circle-alert.js";import{C as d}from"./check.js";function v({password:t,showRequirements:g=!0,onValidityChange:a}){const l=i.useMemo(()=>[{label:"Au moins 8 caractères",test:e=>e.length>=8,met:t.length>=8},{label:"Une lettre minuscule",test:e=>/[a-z]/.test(e),met:/[a-z]/.test(t)},{label:"Une lettre majuscule",test:e=>/[A-Z]/.test(e),met:/[A-Z]/.test(t)},{label:"Un chiffre",test:e=>/\d/.test(e),met:/\d/.test(t)},{label:"Un caractère spécial",test:e=>/[@$!%*?&#+\-=<>{}[\]|~^.,;:_°]/.test(e),met:/[@$!%*?&#+\-=<>{}[\]|~^.,;:_°]/.test(t)}],[t]),c=i.useMemo(()=>{if(!t)return{score:0,label:"",color:"bg-gray-300",textColor:"text-gray-500",isValid:!1};const e=l.filter(h=>h.met).length,r=e===l.length,n=e/l.length*100;return a&&a(r),n<50?{score:n,label:"Faible",color:"bg-destructive",textColor:"text-destructive",icon:u,isValid:r}:n<100?{score:n,label:"Moyen",color:"bg-orange-500",textColor:"text-orange-500",icon:x,isValid:r}:{score:n,label:"Fort",color:"bg-green-500",textColor:"text-green-500",icon:d,isValid:r}},[t,l,a]),o=i.useMemo(()=>{if(!t)return[];const e=[];return t.length<8&&e.push("Ajoutez au moins 8 caractères à votre mot de passe"),/[a-z]/.test(t)||e.push("Ajoutez des lettres minuscules (a-z)"),/[A-Z]/.test(t)||e.push("Ajoutez des lettres majuscules (A-Z)"),/\d/.test(t)||e.push("Ajoutez des chiffres (0-9)"),/[@$!%*?&#+\-=<>{}[\]|~^.,;:_°]/.test(t)||e.push("Ajoutez des caractères spéciaux (!@#$%...)"),e},[t]);if(!t)return null;const m=c.icon;return s.jsxs("div",{className:"space-y-3 bg-muted/30 p-3 rounded-lg border border-muted/50",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3",children:[s.jsx(f,{value:c.score,className:"h-2 flex-1",indicatorClassName:c.color}),s.jsxs("div",{className:`flex items-center gap-1.5 text-sm font-medium ${c.textColor} whitespace-nowrap`,children:[m&&s.jsx(m,{className:"h-4 w-4"}),s.jsx("span",{children:c.label})]})]}),g&&s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:l.map((e,r)=>s.jsxs("div",{className:`flex items-center gap-2 text-xs ${e.met?"text-green-600 dark:text-green-400":"text-muted-foreground"}`,children:[e.met?s.jsx(d,{className:"h-3.5 w-3.5 text-green-600 dark:text-green-400 shrink-0"}):s.jsx(u,{className:"h-3.5 w-3.5 text-muted-foreground shrink-0"}),s.jsx("span",{children:e.label})]},r))}),o.length>0&&s.jsx("div",{className:"space-y-1.5 pt-2 border-t border-border",children:o.map((e,r)=>s.jsxs("div",{className:"flex items-start gap-2 text-xs text-destructive font-medium",children:[s.jsx(x,{className:"h-3.5 w-3.5 mt-0.5 shrink-0"}),s.jsx("span",{children:e})]},r))})]})]})}export{v as P};
