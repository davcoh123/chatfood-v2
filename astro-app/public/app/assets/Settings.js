import{d as Ge,F as Je,y as Ke,r as a,j as e,G as Ye,H as Se,C as j,a as f,b as k,g as E,c as N,I as n,B as m,L as ee,h as p,k as Qe,s as b,e as Ae,J as Xe,K as es,N as ss,O as as}from"./index.js";import{L as o}from"./label.js";import{S as se}from"./switch.js";import{F as Pe,a as w,b as y,c as C,d as S,e as A}from"./form.js";import{T as ts,a as rs,b as F,c as I}from"./tabs.js";import{u as _e,t as Le}from"./zod.js";import{o as Ie,s as P}from"./types.js";import{P as is}from"./PasswordStrengthIndicator.js";import{u as ls}from"./useRestaurantSettings.js";import{u as ns}from"./useCatalogue.js";import{A as cs,W as os}from"./WhatsAppOnboardingButton.js";import{u as ds}from"./useWhatsAppIntegration.js";import{A as ms,a as us,b as xs,c as hs,d as ps,e as js,f as fs,g as Ns,h as vs}from"./alert-dialog.js";import{u as gs}from"./useDeleteAccount.js";import{U as Te,B as ke,C as bs}from"./user.js";import{S as Ee}from"./store.js";import{C as ae}from"./clock.js";import{L as te}from"./loader-circle.js";import{C as q}from"./circle-check-big.js";import{C as ws}from"./circle-alert.js";import{S as re}from"./save.js";import{T as Fe}from"./triangle-alert.js";import{T as ys}from"./trash-2.js";import{M as Cs}from"./message-square.js";import{L as Ss}from"./lightbulb.js";import"./index5.js";import"./index2.js";import"./index3.js";import"./progress.js";import"./check.js";import"./useQuery.js";import"./search.js";import"./popover.js";import"./map-pin.js";const As=Ie({firstName:P().min(1,"Le pr√©nom est requis").max(50,"Le pr√©nom ne peut pas d√©passer 50 caract√®res").regex(/^[a-zA-Z√Ä-√ø\s-']+$/,"Le pr√©nom ne peut contenir que des lettres, espaces, tirets et apostrophes"),lastName:P().min(1,"Le nom est requis").max(50,"Le nom ne peut pas d√©passer 50 caract√®res").regex(/^[a-zA-Z√Ä-√ø\s-']+$/,"Le nom ne peut contenir que des lettres, espaces, tirets et apostrophes"),email:P().min(1,"L'email est requis").email("Format d'email invalide").max(255,"L'email ne peut pas d√©passer 255 caract√®res")}),Ps=Ie({currentPassword:P().min(1,"Le mot de passe actuel est requis"),newPassword:P().min(8,"Le mot de passe doit contenir au moins 8 caract√®res").regex(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&#+\-=<>{}[\]|~^.,;:_¬∞])[A-Za-z\d@$!%*?&#+\-=<>{}[\]|~^.,;:_¬∞]+$/,"Le mot de passe doit contenir au moins: 1 minuscule, 1 majuscule, 1 chiffre et 1 caract√®re sp√©cial"),confirmPassword:P().min(1,"La confirmation du mot de passe est requise")}).refine(c=>c.newPassword===c.confirmPassword,{message:"Les mots de passe ne correspondent pas",path:["confirmPassword"]}),_s=["lundi","mardi","mercredi","jeudi","vendredi","samedi","dimanche"],oa=()=>{const{profile:c,user:u}=Ge(),{toast:x}=Je(),{settings:l,isLoading:z,updateSettings:qe,isUpdating:v}=ls(c==null?void 0:c.user_id),{plan:ze}=Ke(),{integration:g,isLoading:De,refetch:ie}=ds(),{items:le}=ns(),D=le&&le.length>0,i=ze==="starter",{deleteAccount:Ve,isDeleting:ne}=gs(),[Re,V]=a.useState(!1),[Me,Be]=a.useState(!1),[R,M]=a.useState(""),[ce,oe]=a.useState(""),[de,B]=a.useState(""),[me,W]=a.useState(""),[ue,U]=a.useState(""),[We,xe]=a.useState(null),[Ue,he]=a.useState(null),[H,pe]=a.useState(""),[He,je]=a.useState(!1),[O,_]=a.useState(null),[fe,L]=a.useState(null),[Ne,ve]=a.useState(""),[ge,$]=a.useState(!0),[be,we]=a.useState([]),[Z,G]=a.useState(!1),[J,K]=a.useState(15),[ye,Y]=a.useState(!1),h=_e({resolver:Le(As),defaultValues:{firstName:"",lastName:"",email:""}}),d=_e({resolver:Le(Ps),defaultValues:{currentPassword:"",newPassword:"",confirmPassword:""}});a.useEffect(()=>{c&&h.reset({firstName:c.first_name||"",lastName:c.last_name||"",email:c.email||""})},[c,h]),a.useEffect(()=>{l&&(oe(l.restaurant_name||""),B(l.address_street||""),W(l.address_postal_code||""),U(l.address_city||""),xe(l.longitude||null),he(l.latitude||null),pe(l.siret||""),ve(l.chatbot_name||""),$(l.chatbot_active),we(l.opening_hours||[]),i?(G(!0),K(30),Y(!1)):(G(l.order_time_enabled||!1),K(l.order_time_minutes||15),Y(l.manual_order_confirmation||!1)))},[l,i]);const Oe=async s=>{if(s.length!==14||!/^\d{14}$/.test(s)){_(null),L(null);return}je(!0);try{const r=await(await fetch("https://n8n.chatfood.fr/webhook/check-siret-0b2e9a5584c0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({siret:s})})).json();Array.isArray(r)&&r.length>0&&r[0].existe===!0?(_(!0),L(r[0].nom_commercial||r[0].adresse_complete||null)):(_(!1),L(null))}catch{_(!1),L(null)}finally{je(!1)}},$e=async s=>{if(!u){x({title:"Erreur",description:"Vous devez √™tre connect√© pour modifier votre profil",variant:"destructive"});return}try{const{error:t}=await b.from("profiles").update({first_name:s.firstName,last_name:s.lastName,email:s.email}).eq("user_id",u.id);if(t)throw t;if(s.email!==(c==null?void 0:c.email)){const{error:r}=await b.auth.updateUser({email:s.email});if(r)throw r;x({title:"Email mis √† jour",description:"Un email de confirmation a √©t√© envoy√© √† votre nouvelle adresse"})}else x({title:"Profil mis √† jour",description:"Vos informations ont √©t√© sauvegard√©es avec succ√®s"})}catch(t){x({title:"Erreur",description:t.message||"Impossible de mettre √† jour le profil",variant:"destructive"})}},Ze=async s=>{if(!u){x({title:"Erreur",description:"Vous devez √™tre connect√© pour changer votre mot de passe",variant:"destructive"});return}try{const{data:{session:t}}=await b.auth.getSession(),{data:r,error:T}=await b.functions.invoke("user-change-password",{body:{currentPassword:s.currentPassword,newPassword:s.newPassword},headers:{Authorization:`Bearer ${t==null?void 0:t.access_token}`}});if(T){if(T.message.includes("mot de passe actuel"))d.setError("currentPassword",{message:"Mot de passe actuel incorrect"});else throw T;return}x({title:"Mot de passe mis √† jour",description:"Votre mot de passe a √©t√© chang√© avec succ√®s"}),d.reset(),V(!1)}catch(t){x({title:"Erreur",description:t.message||"Impossible de changer le mot de passe",variant:"destructive"})}},Ce=(s,t,r)=>{we(T=>T.map(X=>X.day===s?{...X,[t]:r}:X))},Q=()=>{qe({restaurant_name:ce||null,address_street:de||null,address_postal_code:me||null,address_city:ue||null,longitude:We,latitude:Ue,siret:H||null,chatbot_name:i?"ChatFood":Ne,chatbot_active:D?ge:!1,opening_hours:be,order_time_enabled:i?!0:Z,order_time_minutes:i?30:J,manual_order_confirmation:i?!1:ye})};return e.jsxs("div",{className:"p-4 md:p-6 space-y-6 md:space-y-8 animate-fade-in min-w-0 overflow-x-hidden",children:[e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-r from-primary/20 to-primary/10",children:e.jsx(Ye,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:"Param√®tres"}),e.jsx("p",{className:"text-sm md:text-base text-muted-foreground",children:"G√©rez votre compte et votre restaurant"})]})]})}),e.jsxs(ts,{defaultValue:"personal",className:"space-y-6 w-full min-w-0",children:[e.jsx("div",{className:"w-full",children:e.jsxs(rs,{className:"w-full justify-start md:justify-center h-auto p-1 bg-muted/50",children:[e.jsxs(F,{value:"personal",className:"flex-1 py-2",children:[e.jsx(Te,{className:"h-4 w-4 md:mr-2 shrink-0"}),e.jsx("span",{className:"hidden md:inline",children:"Profil"})]}),e.jsxs(F,{value:"security",className:"flex-1 py-2",children:[e.jsx(Se,{className:"h-4 w-4 md:mr-2 shrink-0"}),e.jsx("span",{className:"hidden md:inline",children:"S√©curit√©"})]}),e.jsxs(F,{value:"general",className:"flex-1 py-2",children:[e.jsx(Ee,{className:"h-4 w-4 md:mr-2 shrink-0"}),e.jsx("span",{className:"hidden md:inline",children:"G√©n√©ral"})]}),e.jsxs(F,{value:"chatbot",className:"flex-1 py-2",children:[e.jsx(ke,{className:"h-4 w-4 md:mr-2 shrink-0"}),e.jsx("span",{className:"hidden md:inline",children:"Chatbot"})]}),e.jsxs(F,{value:"hours",className:"flex-1 py-2",children:[e.jsx(ae,{className:"h-4 w-4 md:mr-2 shrink-0"}),e.jsx("span",{className:"hidden md:inline",children:"Horaires"})]})]})}),e.jsx(I,{value:"personal",className:"space-y-6 min-w-0",children:e.jsx("div",{className:"w-full min-w-0",children:e.jsxs(j,{children:[e.jsxs(f,{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"h-5 w-5 text-primary"}),e.jsx(k,{children:"Informations Personnelles"})]}),e.jsx(E,{children:"Modifiez vos informations de profil"})]}),e.jsx(N,{children:e.jsx(Pe,{...h,children:e.jsxs("form",{onSubmit:h.handleSubmit($e),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(w,{control:h.control,name:"firstName",render:({field:s})=>e.jsxs(y,{children:[e.jsx(C,{children:"Pr√©nom"}),e.jsx(S,{children:e.jsx(n,{...s})}),e.jsx(A,{})]})}),e.jsx(w,{control:h.control,name:"lastName",render:({field:s})=>e.jsxs(y,{children:[e.jsx(C,{children:"Nom"}),e.jsx(S,{children:e.jsx(n,{...s})}),e.jsx(A,{})]})})]}),e.jsx(w,{control:h.control,name:"email",render:({field:s})=>e.jsxs(y,{children:[e.jsx(C,{children:"Email"}),e.jsx(S,{children:e.jsx(n,{...s,type:"email"})}),e.jsx(A,{})]})}),e.jsxs(m,{type:"submit",className:"w-full",disabled:h.formState.isSubmitting,children:[h.formState.isSubmitting&&e.jsx(te,{className:"mr-2 h-4 w-4 animate-spin"}),"Mettre √† jour le profil"]})]})})})]})})}),e.jsx(I,{value:"security",className:"space-y-6 min-w-0",children:e.jsx("div",{className:"w-full min-w-0",children:e.jsxs(j,{children:[e.jsxs(f,{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"h-5 w-5 text-primary"}),e.jsx(k,{children:"S√©curit√©"})]}),e.jsx(E,{children:"Param√®tres de s√©curit√© de votre compte"})]}),e.jsxs(N,{className:"space-y-4",children:[Re?e.jsx(Pe,{...d,children:e.jsxs("form",{onSubmit:d.handleSubmit(Ze),className:"space-y-4",children:[e.jsx(w,{control:d.control,name:"currentPassword",render:({field:s})=>e.jsxs(y,{children:[e.jsx(C,{children:"Mot de passe actuel"}),e.jsx(S,{children:e.jsx(n,{...s,type:"password"})}),e.jsx(A,{})]})}),e.jsx(w,{control:d.control,name:"newPassword",render:({field:s})=>e.jsxs(y,{children:[e.jsx(C,{children:"Nouveau mot de passe"}),e.jsx(S,{children:e.jsx(n,{...s,type:"password"})}),e.jsx(A,{}),e.jsx("div",{className:"mt-2",children:e.jsx(is,{password:s.value||"",onValidityChange:Be})})]})}),e.jsx(w,{control:d.control,name:"confirmPassword",render:({field:s})=>e.jsxs(y,{children:[e.jsx(C,{children:"Confirmer le mot de passe"}),e.jsx(S,{children:e.jsx(n,{...s,type:"password"})}),e.jsx(A,{})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 pt-2",children:[e.jsxs(m,{type:"submit",className:"flex-1 w-full sm:w-auto",disabled:d.formState.isSubmitting||!Me,children:[d.formState.isSubmitting&&e.jsx(te,{className:"mr-2 h-4 w-4 animate-spin"}),"Changer le mot de passe"]}),e.jsx(m,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:()=>{V(!1),d.reset()},children:"Annuler"})]})]})}):e.jsxs(m,{variant:"outline",className:"w-full",onClick:()=>V(!0),children:[e.jsx(ee,{className:"mr-2 h-4 w-4"}),"Changer le mot de passe"]}),e.jsx(m,{variant:"outline",className:"w-full text-left justify-start h-auto py-3 px-4 whitespace-normal",disabled:!0,children:e.jsxs("div",{className:"flex flex-col items-start gap-1",children:[e.jsx("span",{className:"font-medium",children:"Activer l'authentification √† deux facteurs"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Cette fonctionnalit√© sera bient√¥t disponible pour renforcer la s√©curit√© de votre compte."})]})})]})]})})}),e.jsx(I,{value:"general",className:"space-y-6 min-w-0",children:e.jsx("div",{className:"w-full min-w-0",children:z?e.jsxs(j,{children:[e.jsxs(f,{children:[e.jsx(p,{className:"h-8 w-64"}),e.jsx(p,{className:"h-4 w-96"})]}),e.jsxs(N,{className:"space-y-6",children:[e.jsx(p,{className:"h-10 w-full"}),e.jsx(p,{className:"h-10 w-full"})]})]}):e.jsxs(j,{children:[e.jsxs(f,{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"h-5 w-5 text-primary"}),e.jsx(k,{children:"Informations du Restaurant"})]}),e.jsx(E,{children:"Nom et adresse de votre √©tablissement"})]}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"restaurant-name",children:"Nom du restaurant"}),e.jsx(n,{id:"restaurant-name",value:ce,onChange:s=>oe(s.target.value),placeholder:"Le Gourmet"})]}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsx(o,{className:"text-base",children:"Adresse"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"address-street",className:"text-sm text-muted-foreground",children:"Rue"}),e.jsx(cs,{id:"address-street",value:de,onChange:B,onAddressSelect:s=>{B(s.street),W(s.postalCode),U(s.city),xe(s.longitude),he(s.latitude)},placeholder:"123 Rue de la Paix"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"address-postal",className:"text-sm text-muted-foreground",children:"Code postal"}),e.jsx(n,{id:"address-postal",value:me,onChange:s=>W(s.target.value),placeholder:"75001"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"address-city",className:"text-sm text-muted-foreground",children:"Ville"}),e.jsx(n,{id:"address-city",value:ue,onChange:s=>U(s.target.value),placeholder:"Paris"})]})]})]}),e.jsxs("div",{className:"space-y-2 pt-4 border-t",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qe,{className:"h-4 w-4 text-primary"}),e.jsx(o,{htmlFor:"siret",children:"Num√©ro SIRET"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(n,{id:"siret",value:H,onChange:s=>{const t=s.target.value.replace(/\D/g,"").slice(0,14);pe(t),_(null),L(null)},onBlur:()=>Oe(H),placeholder:"12345678901234",maxLength:14,className:"pr-10"}),He&&e.jsx(te,{className:"absolute right-3 top-3 h-4 w-4 animate-spin text-muted-foreground"}),O===!0&&e.jsx(q,{className:"absolute right-3 top-3 h-4 w-4 text-green-500"}),O===!1&&e.jsx(ws,{className:"absolute right-3 top-3 h-4 w-4 text-destructive"})]}),fe&&e.jsxs("p",{className:"text-sm text-green-600 flex items-center gap-1",children:[e.jsx(q,{className:"h-3 w-3"}),fe]}),O===!1&&e.jsx("p",{className:"text-sm text-destructive",children:"SIRET invalide ou introuvable"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"14 chiffres - V√©rification automatique aupr√®s de l'INSEE"})]}),e.jsxs(m,{onClick:Q,disabled:v,className:"w-full mt-4",children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),v?"Enregistrement...":"Enregistrer"]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-destructive/20",children:e.jsxs("div",{className:"bg-destructive/5 rounded-lg p-4",children:[e.jsxs("h4",{className:"text-destructive font-semibold flex items-center gap-2",children:[e.jsx(Fe,{className:"h-4 w-4"}),"Zone de danger"]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"La suppression de votre compte est irr√©versible. Toutes vos donn√©es seront d√©finitivement supprim√©es."}),e.jsxs(ms,{children:[e.jsx(us,{asChild:!0,children:e.jsxs(m,{variant:"destructive",className:"mt-4",children:[e.jsx(ys,{className:"h-4 w-4 mr-2"}),"Supprimer mon compte"]})}),e.jsxs(xs,{children:[e.jsxs(hs,{children:[e.jsx(ps,{children:"√ätes-vous absolument s√ªr ?"}),e.jsx(js,{asChild:!0,children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{children:"Cette action est irr√©versible. Cela supprimera d√©finitivement :"}),e.jsxs("ul",{className:"list-disc list-inside text-sm space-y-1",children:[e.jsx("li",{children:"Votre restaurant et tous ses param√®tres"}),e.jsx("li",{children:"Tous vos produits et menus"}),e.jsx("li",{children:"Tout l'historique des commandes"}),e.jsx("li",{children:"Toutes les conversations WhatsApp"}),e.jsx("li",{children:"Toutes les r√©servations"}),e.jsx("li",{children:"Vos informations de profil"})]}),e.jsx("p",{className:"font-medium",children:"Tapez SUPPRIMER pour confirmer."})]})})]}),e.jsx(n,{placeholder:"Tapez SUPPRIMER pour confirmer",value:R,onChange:s=>M(s.target.value.toUpperCase()),className:"font-mono"}),e.jsxs(fs,{children:[e.jsx(Ns,{onClick:()=>M(""),children:"Annuler"}),e.jsx(vs,{disabled:R!=="SUPPRIMER"||ne,onClick:()=>{Ve(R),M("")},className:"bg-destructive hover:bg-destructive/90",children:ne?"Suppression...":"Supprimer d√©finitivement"})]})]})]})]})})]})]})})}),e.jsx(I,{value:"chatbot",className:"space-y-6 min-w-0",children:e.jsx("div",{className:"w-full min-w-0",children:z?e.jsxs(j,{children:[e.jsx(f,{children:e.jsx(p,{className:"h-8 w-64"})}),e.jsx(N,{children:e.jsx(p,{className:"h-10 w-full"})})]}):e.jsxs(j,{children:[e.jsxs(f,{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ke,{className:"h-5 w-5 text-primary"}),e.jsx(k,{children:"Configuration du Chatbot"})]}),e.jsx(E,{children:"Personnalisez votre assistant virtuel"})]}),e.jsxs(N,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4 border-b pb-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"chatbot-name",children:"Nom du chatbot"}),e.jsx(n,{id:"chatbot-name",value:Ne,onChange:s=>ve(s.target.value),placeholder:"ChatFood",disabled:i,className:i?"bg-muted cursor-not-allowed":""}),i&&e.jsx("p",{className:"text-xs text-muted-foreground",children:'üí° Le nom "ChatFood" est fixe pour le plan Starter. Passez au plan Pro pour le personnaliser.'})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(o,{htmlFor:"chatbot-active",children:"Chatbot actif"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Activer ou d√©sactiver le chatbot"}),!D&&e.jsxs("p",{className:"text-sm text-amber-600 flex items-center gap-1.5 mt-2",children:[e.jsx(Fe,{className:"h-4 w-4"}),"Le chatbot ne peut pas √™tre activ√© tant que le catalogue est vide."]})]}),e.jsx(se,{id:"chatbot-active",checked:ge,onCheckedChange:$,disabled:!D})]}),e.jsxs("div",{className:"space-y-3 pt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Cs,{className:"h-5 w-5 text-green-500"}),e.jsx("span",{className:"font-medium",children:"Connexion WhatsApp Business"})]}),e.jsx("div",{className:"p-4 rounded-lg border border-green-500/20 bg-green-500/5",children:De?e.jsx(p,{className:"h-10 w-full"}):(g==null?void 0:g.status)==="active"?e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[e.jsx(q,{className:"h-5 w-5"}),e.jsxs("span",{children:["Connect√© : ",g.display_phone_number||g.verified_name||"WhatsApp Business"]})]}),e.jsx(m,{variant:"outline",size:"sm",onClick:async()=>{try{await b.from("whatsapp_integrations").update({status:"inactive"}).eq("user_id",u==null?void 0:u.id),await b.from("restaurant_settings").update({chatbot_active:!1}).eq("user_id",u==null?void 0:u.id),$(!1),ie(),x({title:"WhatsApp d√©connect√©"})}catch{x({title:"Erreur",description:"Impossible de d√©connecter WhatsApp.",variant:"destructive"})}},className:"text-destructive hover:text-destructive",children:"D√©connecter"})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Connectez votre num√©ro WhatsApp Business pour recevoir les commandes de vos clients."}),e.jsx(os,{existingIntegration:g,onSuccess:()=>ie()})]})})]})]}),e.jsxs("div",{className:"space-y-4 border-b pb-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ae,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"font-medium",children:"Temps de commande"})]}),i&&e.jsxs(Ae,{variant:"outline",className:"bg-background",children:[e.jsx(ee,{className:"h-3 w-3 mr-1"})," 30 min"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg border",children:[e.jsx("span",{className:"text-sm font-medium",children:"Annoncer le temps d'attente"}),e.jsx(se,{checked:Z,onCheckedChange:G,disabled:i})]}),Z&&e.jsxs("div",{className:"space-y-2 animate-in slide-in-from-top-2 duration-200",children:[e.jsx(o,{children:"Temps d'attente (minutes)"}),e.jsx(n,{type:"number",min:5,max:120,value:J,onChange:s=>K(parseInt(s.target.value)||15),disabled:i}),e.jsxs("p",{className:"text-xs text-muted-foreground bg-blue-50 dark:bg-blue-900/20 p-2 rounded text-blue-600 dark:text-blue-400 flex gap-2 items-start",children:[e.jsx(Ss,{className:"h-3 w-3 mt-0.5 shrink-0"}),e.jsxs("span",{children:["Le client sera inform√© qu'il pourra r√©cup√©rer sa commande dans ",J," minutes"]})]}),i&&e.jsx("p",{className:"text-xs text-muted-foreground italic",children:"* Fix√© √† 30 min pour le plan Starter. Passez √† Pro pour modifier."})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-5 w-5 text-primary"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-medium",children:"Confirmation manuelle"}),e.jsx(Xe,{children:e.jsxs(es,{children:[e.jsx(ss,{asChild:!0,children:e.jsx(bs,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),e.jsx(as,{className:"max-w-xs",children:e.jsx("p",{children:"Le client recevra un premier message confirmant que la commande vous a √©t√© envoy√©e. Il en recevra un second une fois que vous aurez vu et valid√© la commande."})})]})})]})]}),i&&e.jsxs(Ae,{variant:"outline",className:"bg-background",children:[e.jsx(ee,{className:"h-3 w-3 mr-1"})," Auto"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg border",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("span",{className:"text-sm font-medium",children:"Activer la validation manuelle"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Le client recevra une confirmation en deux temps"}),i&&e.jsx("p",{className:"text-xs text-amber-600 italic mt-1",children:"* D√©sactiv√© pour le plan Starter (Approbation automatique)."})]}),e.jsx(se,{checked:ye,onCheckedChange:Y,disabled:i})]})]}),e.jsxs(m,{onClick:Q,disabled:v,className:"w-full mt-4",children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),v?"Enregistrement...":"Enregistrer"]})]})]})})}),e.jsx(I,{value:"hours",className:"space-y-6 min-w-0",children:e.jsx("div",{className:"w-full min-w-0",children:z?e.jsxs(j,{children:[e.jsx(f,{children:e.jsx(p,{className:"h-8 w-64"})}),e.jsx(N,{children:e.jsx(p,{className:"h-32 w-full"})})]}):e.jsxs(j,{children:[e.jsxs(f,{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ae,{className:"h-5 w-5 text-primary"}),e.jsx(k,{children:"Horaires d'ouverture"})]}),e.jsx(E,{children:"Indiquez les horaires au format libre (ex: 12h-14h, 19h-23h)"})]}),e.jsxs(N,{className:"space-y-4",children:[_s.map(s=>{const t=be.find(r=>r.day===s)||{slot1:"",slot2:""};return e.jsxs("div",{className:"space-y-3 p-4 rounded-lg border",children:[e.jsx("span",{className:"font-medium capitalize text-base",children:s}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(o,{className:"text-xs text-muted-foreground",children:"Service midi"}),e.jsx(n,{value:t.slot1,onChange:r=>Ce(s,"slot1",r.target.value),placeholder:"12h-14h",className:"text-sm"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(o,{className:"text-xs text-muted-foreground",children:"Service soir"}),e.jsx(n,{value:t.slot2,onChange:r=>Ce(s,"slot2",r.target.value),placeholder:"19h-23h",className:"text-sm"})]})]})]},s)}),e.jsxs(m,{onClick:Q,disabled:v,className:"w-full mt-4",children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),v?"Enregistrement...":"Enregistrer"]})]})]})})})]})]})};export{oa as default};
