import{r as F,j as Me,V as pr,a1 as vr,a3 as Gt,ae as br,a4 as Rn,a5 as cn,b3 as mr,v as ln,s as zt,m as je,R as Ee,b0 as st}from"./index.js";import{u as wr}from"./index5.js";import{C as yr}from"./check.js";var Tt="Checkbox",[xr]=pr(Tt),[Cr,Vt]=xr(Tt);function Ar(e){const{__scopeCheckbox:r,checked:i,children:o,defaultChecked:t,disabled:n,form:u,name:l,onCheckedChange:d,required:v,value:s="on",internal_do_not_use_render:a}=e,[c,f]=br({prop:i,defaultProp:t??!1,onChange:d,caller:Tt}),[m,x]=F.useState(null),[S,y]=F.useState(null),O=F.useRef(!1),T=m?!!u||!!m.closest("form"):!0,D={checked:c,disabled:n,setChecked:f,control:m,setControl:x,name:l,form:u,value:s,hasConsumerStoppedPropagationRef:O,required:v,defaultChecked:Qe(t)?!1:t,isFormControl:T,bubbleInput:S,setBubbleInput:y};return Me.jsx(Cr,{scope:r,...D,children:Rr(a)?a(D):o})}var En="CheckboxTrigger",Sn=F.forwardRef(({__scopeCheckbox:e,onKeyDown:r,onClick:i,...o},t)=>{const{control:n,value:u,disabled:l,checked:d,required:v,setControl:s,setChecked:a,hasConsumerStoppedPropagationRef:c,isFormControl:f,bubbleInput:m}=Vt(En,e),x=Rn(t,s),S=F.useRef(d);return F.useEffect(()=>{const y=n==null?void 0:n.form;if(y){const O=()=>a(S.current);return y.addEventListener("reset",O),()=>y.removeEventListener("reset",O)}},[n,a]),Me.jsx(Gt.button,{type:"button",role:"checkbox","aria-checked":Qe(d)?"mixed":d,"aria-required":v,"data-state":Un(d),"data-disabled":l?"":void 0,disabled:l,value:u,...o,ref:x,onKeyDown:cn(r,y=>{y.key==="Enter"&&y.preventDefault()}),onClick:cn(i,y=>{a(O=>Qe(O)?!0:!O),m&&f&&(c.current=y.isPropagationStopped(),c.current||y.stopPropagation())})})});Sn.displayName=En;var Zt=F.forwardRef((e,r)=>{const{__scopeCheckbox:i,name:o,checked:t,defaultChecked:n,required:u,disabled:l,value:d,onCheckedChange:v,form:s,...a}=e;return Me.jsx(Ar,{__scopeCheckbox:i,checked:t,defaultChecked:n,disabled:l,required:u,onCheckedChange:v,name:o,form:s,value:d,internal_do_not_use_render:({isFormControl:c})=>Me.jsxs(Me.Fragment,{children:[Me.jsx(Sn,{...a,ref:r,__scopeCheckbox:i}),c&&Me.jsx(Tn,{__scopeCheckbox:i})]})})});Zt.displayName=Tt;var Dn="CheckboxIndicator",In=F.forwardRef((e,r)=>{const{__scopeCheckbox:i,forceMount:o,...t}=e,n=Vt(Dn,i);return Me.jsx(vr,{present:o||Qe(n.checked)||n.checked===!0,children:Me.jsx(Gt.span,{"data-state":Un(n.checked),"data-disabled":n.disabled?"":void 0,...t,ref:r,style:{pointerEvents:"none",...e.style}})})});In.displayName=Dn;var Mn="CheckboxBubbleInput",Tn=F.forwardRef(({__scopeCheckbox:e,...r},i)=>{const{control:o,hasConsumerStoppedPropagationRef:t,checked:n,defaultChecked:u,required:l,disabled:d,name:v,value:s,form:a,bubbleInput:c,setBubbleInput:f}=Vt(Mn,e),m=Rn(i,f),x=wr(n),S=mr(o);F.useEffect(()=>{const O=c;if(!O)return;const T=window.HTMLInputElement.prototype,N=Object.getOwnPropertyDescriptor(T,"checked").set,w=!t.current;if(x!==n&&N){const U=new Event("click",{bubbles:w});O.indeterminate=Qe(n),N.call(O,Qe(n)?!1:n),O.dispatchEvent(U)}},[c,x,n,t]);const y=F.useRef(Qe(n)?!1:n);return Me.jsx(Gt.input,{type:"checkbox","aria-hidden":!0,defaultChecked:u??y.current,required:l,disabled:d,name:v,value:s,form:a,...r,tabIndex:-1,ref:m,style:{...r.style,...S,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Tn.displayName=Mn;function Rr(e){return typeof e=="function"}function Qe(e){return e==="indeterminate"}function Un(e){return Qe(e)?"indeterminate":e?"checked":"unchecked"}const Er=F.forwardRef(({className:e,...r},i)=>Me.jsx(Zt,{ref:i,className:ln("peer h-4 w-4 shrink-0 rounded-sm border-2 border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground data-[state=checked]:border-primary hover:border-primary/80 transition-colors",e),...r,children:Me.jsx(In,{className:ln("flex items-center justify-center text-current"),children:Me.jsx(yr,{className:"h-4 w-4"})})}));Er.displayName=Zt.displayName;function Sr(e,r){return r.forEach(function(i){i&&typeof i!="string"&&!Array.isArray(i)&&Object.keys(i).forEach(function(o){if(o!=="default"&&!(o in e)){var t=Object.getOwnPropertyDescriptor(i,o);Object.defineProperty(e,o,t.get?t:{enumerable:!0,get:function(){return i[o]}})}})}),Object.freeze(e)}function kn(e,r){return new Promise(function(i,o){let t;return Dr(e).then(function(n){try{return t=n,i(new Blob([r.slice(0,2),t,r.slice(2)],{type:"image/jpeg"}))}catch(u){return o(u)}},o)})}const Dr=e=>new Promise((r,i)=>{const o=new FileReader;o.addEventListener("load",({target:{result:t}})=>{const n=new DataView(t);let u=0;if(n.getUint16(u)!==65496)return i("not a valid JPEG");for(u+=2;;){const l=n.getUint16(u);if(l===65498)break;const d=n.getUint16(u+2);if(l===65505&&n.getUint32(u+4)===1165519206){const v=u+10;let s;switch(n.getUint16(v)){case 18761:s=!0;break;case 19789:s=!1;break;default:return i("TIFF header contains invalid endian")}if(n.getUint16(v+2,s)!==42)return i("TIFF header contains invalid version");const a=n.getUint32(v+4,s),c=v+a+2+12*n.getUint16(v+a,s);for(let f=v+a+2;f<c;f+=12)if(n.getUint16(f,s)==274){if(n.getUint16(f+2,s)!==3)return i("Orientation data type is invalid");if(n.getUint32(f+4,s)!==1)return i("Orientation data count is invalid");n.setUint16(f+8,1,s);break}return r(t.slice(u,u+2+d))}u+=2+d}return r(new Blob)}),o.readAsArrayBuffer(e)});var xt={},Ir={get exports(){return xt},set exports(e){xt=e}};(function(e){var r,i,o={};Ir.exports=o,o.parse=function(t,n){for(var u=o.bin.readUshort,l=o.bin.readUint,d=0,v={},s=new Uint8Array(t),a=s.length-4;l(s,a)!=101010256;)a--;d=a,d+=4;var c=u(s,d+=4);u(s,d+=2);var f=l(s,d+=2),m=l(s,d+=4);d+=4,d=m;for(var x=0;x<c;x++){l(s,d),d+=4,d+=4,d+=4,l(s,d+=4),f=l(s,d+=4);var S=l(s,d+=4),y=u(s,d+=4),O=u(s,d+2),T=u(s,d+4);d+=6;var D=l(s,d+=8);d+=4,d+=y+O+T,o._readLocal(s,D,v,f,S,n)}return v},o._readLocal=function(t,n,u,l,d,v){var s=o.bin.readUshort,a=o.bin.readUint;a(t,n),s(t,n+=4),s(t,n+=2);var c=s(t,n+=2);a(t,n+=2),a(t,n+=4),n+=4;var f=s(t,n+=8),m=s(t,n+=2);n+=2;var x=o.bin.readUTF8(t,n,f);if(n+=f,n+=m,v)u[x]={size:d,csize:l};else{var S=new Uint8Array(t.buffer,n);if(c==0)u[x]=new Uint8Array(S.buffer.slice(n,n+l));else{if(c!=8)throw"unknown compression method: "+c;var y=new Uint8Array(d);o.inflateRaw(S,y),u[x]=y}}},o.inflateRaw=function(t,n){return o.F.inflate(t,n)},o.inflate=function(t,n){return t[0],t[1],o.inflateRaw(new Uint8Array(t.buffer,t.byteOffset+2,t.length-6),n)},o.deflate=function(t,n){n==null&&(n={level:6});var u=0,l=new Uint8Array(50+Math.floor(1.1*t.length));l[u]=120,l[u+1]=156,u+=2,u=o.F.deflateRaw(t,l,u,n.level);var d=o.adler(t,0,t.length);return l[u+0]=d>>>24&255,l[u+1]=d>>>16&255,l[u+2]=d>>>8&255,l[u+3]=d>>>0&255,new Uint8Array(l.buffer,0,u+4)},o.deflateRaw=function(t,n){n==null&&(n={level:6});var u=new Uint8Array(50+Math.floor(1.1*t.length)),l=o.F.deflateRaw(t,u,l,n.level);return new Uint8Array(u.buffer,0,l)},o.encode=function(t,n){n==null&&(n=!1);var u=0,l=o.bin.writeUint,d=o.bin.writeUshort,v={};for(var s in t){var a=!o._noNeed(s)&&!n,c=t[s],f=o.crc.crc(c,0,c.length);v[s]={cpr:a,usize:c.length,crc:f,file:a?o.deflateRaw(c):c}}for(var s in v)u+=v[s].file.length+30+46+2*o.bin.sizeUTF8(s);u+=22;var m=new Uint8Array(u),x=0,S=[];for(var s in v){var y=v[s];S.push(x),x=o._writeHeader(m,x,s,y,0)}var O=0,T=x;for(var s in v)y=v[s],S.push(x),x=o._writeHeader(m,x,s,y,1,S[O++]);var D=x-T;return l(m,x,101010256),x+=4,d(m,x+=4,O),d(m,x+=2,O),l(m,x+=2,D),l(m,x+=4,T),x+=4,x+=2,m.buffer},o._noNeed=function(t){var n=t.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(n)!=-1},o._writeHeader=function(t,n,u,l,d,v){var s=o.bin.writeUint,a=o.bin.writeUshort,c=l.file;return s(t,n,d==0?67324752:33639248),n+=4,d==1&&(n+=2),a(t,n,20),a(t,n+=2,0),a(t,n+=2,l.cpr?8:0),s(t,n+=2,0),s(t,n+=4,l.crc),s(t,n+=4,c.length),s(t,n+=4,l.usize),a(t,n+=4,o.bin.sizeUTF8(u)),a(t,n+=2,0),n+=2,d==1&&(n+=2,n+=2,s(t,n+=6,v),n+=4),n+=o.bin.writeUTF8(t,n,u),d==0&&(t.set(c,n),n+=c.length),n},o.crc={table:function(){for(var t=new Uint32Array(256),n=0;n<256;n++){for(var u=n,l=0;l<8;l++)1&u?u=3988292384^u>>>1:u>>>=1;t[n]=u}return t}(),update:function(t,n,u,l){for(var d=0;d<l;d++)t=o.crc.table[255&(t^n[u+d])]^t>>>8;return t},crc:function(t,n,u){return 4294967295^o.crc.update(4294967295,t,n,u)}},o.adler=function(t,n,u){for(var l=1,d=0,v=n,s=n+u;v<s;){for(var a=Math.min(v+5552,s);v<a;)d+=l+=t[v++];l%=65521,d%=65521}return d<<16|l},o.bin={readUshort:function(t,n){return t[n]|t[n+1]<<8},writeUshort:function(t,n,u){t[n]=255&u,t[n+1]=u>>8&255},readUint:function(t,n){return 16777216*t[n+3]+(t[n+2]<<16|t[n+1]<<8|t[n])},writeUint:function(t,n,u){t[n]=255&u,t[n+1]=u>>8&255,t[n+2]=u>>16&255,t[n+3]=u>>24&255},readASCII:function(t,n,u){for(var l="",d=0;d<u;d++)l+=String.fromCharCode(t[n+d]);return l},writeASCII:function(t,n,u){for(var l=0;l<u.length;l++)t[n+l]=u.charCodeAt(l)},pad:function(t){return t.length<2?"0"+t:t},readUTF8:function(t,n,u){for(var l,d="",v=0;v<u;v++)d+="%"+o.bin.pad(t[n+v].toString(16));try{l=decodeURIComponent(d)}catch{return o.bin.readASCII(t,n,u)}return l},writeUTF8:function(t,n,u){for(var l=u.length,d=0,v=0;v<l;v++){var s=u.charCodeAt(v);if(!(4294967168&s))t[n+d]=s,d++;else if(!(4294965248&s))t[n+d]=192|s>>6,t[n+d+1]=128|s>>0&63,d+=2;else if(!(4294901760&s))t[n+d]=224|s>>12,t[n+d+1]=128|s>>6&63,t[n+d+2]=128|s>>0&63,d+=3;else{if(4292870144&s)throw"e";t[n+d]=240|s>>18,t[n+d+1]=128|s>>12&63,t[n+d+2]=128|s>>6&63,t[n+d+3]=128|s>>0&63,d+=4}}return d},sizeUTF8:function(t){for(var n=t.length,u=0,l=0;l<n;l++){var d=t.charCodeAt(l);if(!(4294967168&d))u++;else if(!(4294965248&d))u+=2;else if(!(4294901760&d))u+=3;else{if(4292870144&d)throw"e";u+=4}}return u}},o.F={},o.F.deflateRaw=function(t,n,u,l){var d=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][l],v=o.F.U,s=o.F._goodIndex;o.F._hash;var a=o.F._putsE,c=0,f=u<<3,m=0,x=t.length;if(l==0){for(;c<x;)a(n,f,c+(A=Math.min(65535,x-c))==x?1:0),f=o.F._copyExact(t,c,A,n,f+8),c+=A;return f>>>3}var S=v.lits,y=v.strt,O=v.prev,T=0,D=0,N=0,w=0,U=0,g=0;for(x>2&&(y[g=o.F._hash(t,0)]=0),c=0;c<x;c++){if(U=g,c+1<x-2){g=o.F._hash(t,c+1);var p=c+1&32767;O[p]=y[g],y[g]=p}if(m<=c){(T>14e3||D>26697)&&x-c>100&&(m<c&&(S[T]=c-m,T+=2,m=c),f=o.F._writeBlock(c==x-1||m==x?1:0,S,T,w,t,N,c-N,n,f),T=D=w=0,N=c);var C=0;c<x-2&&(C=o.F._bestMatch(t,c,O,U,Math.min(d[2],x-c),d[3]));var A=C>>>16,E=65535&C;if(C!=0){E=65535&C;var I=s(A=C>>>16,v.of0);v.lhst[257+I]++;var R=s(E,v.df0);v.dhst[R]++,w+=v.exb[I]+v.dxb[R],S[T]=A<<23|c-m,S[T+1]=E<<16|I<<8|R,T+=2,m=c+A}else v.lhst[t[c]]++;D++}}for(N==c&&t.length!=0||(m<c&&(S[T]=c-m,T+=2,m=c),f=o.F._writeBlock(1,S,T,w,t,N,c-N,n,f),T=0,D=0,T=D=w=0,N=c);7&f;)f++;return f>>>3},o.F._bestMatch=function(t,n,u,l,d,v){var s=32767&n,a=u[s],c=s-a+32768&32767;if(a==s||l!=o.F._hash(t,n-c))return 0;for(var f=0,m=0,x=Math.min(32767,n);c<=x&&--v!=0&&a!=s;){if(f==0||t[n+f]==t[n+f-c]){var S=o.F._howLong(t,n,c);if(S>f){if(m=c,(f=S)>=d)break;c+2<S&&(S=c+2);for(var y=0,O=0;O<S-2;O++){var T=n-c+O+32768&32767,D=T-u[T]+32768&32767;D>y&&(y=D,a=T)}}}c+=(s=a)-(a=u[s])+32768&32767}return f<<16|m},o.F._howLong=function(t,n,u){if(t[n]!=t[n-u]||t[n+1]!=t[n+1-u]||t[n+2]!=t[n+2-u])return 0;var l=n,d=Math.min(t.length,n+258);for(n+=3;n<d&&t[n]==t[n-u];)n++;return n-l},o.F._hash=function(t,n){return(t[n]<<8|t[n+1])+(t[n+2]<<4)&65535},o.saved=0,o.F._writeBlock=function(t,n,u,l,d,v,s,a,c){var f,m,x,S,y,O,T,D,N,w=o.F.U,U=o.F._putsF,g=o.F._putsE;w.lhst[256]++,m=(f=o.F.getTrees())[0],x=f[1],S=f[2],y=f[3],O=f[4],T=f[5],D=f[6],N=f[7];var p=32+(c+3&7?8-(c+3&7):0)+(s<<3),C=l+o.F.contSize(w.fltree,w.lhst)+o.F.contSize(w.fdtree,w.dhst),A=l+o.F.contSize(w.ltree,w.lhst)+o.F.contSize(w.dtree,w.dhst);A+=14+3*T+o.F.contSize(w.itree,w.ihst)+(2*w.ihst[16]+3*w.ihst[17]+7*w.ihst[18]);for(var E=0;E<286;E++)w.lhst[E]=0;for(E=0;E<30;E++)w.dhst[E]=0;for(E=0;E<19;E++)w.ihst[E]=0;var I=p<C&&p<A?0:C<A?1:2;if(U(a,c,t),U(a,c+1,I),c+=3,I==0){for(;7&c;)c++;c=o.F._copyExact(d,v,s,a,c)}else{var R,k;if(I==1&&(R=w.fltree,k=w.fdtree),I==2){o.F.makeCodes(w.ltree,m),o.F.revCodes(w.ltree,m),o.F.makeCodes(w.dtree,x),o.F.revCodes(w.dtree,x),o.F.makeCodes(w.itree,S),o.F.revCodes(w.itree,S),R=w.ltree,k=w.dtree,g(a,c,y-257),g(a,c+=5,O-1),g(a,c+=5,T-4),c+=4;for(var b=0;b<T;b++)g(a,c+3*b,w.itree[1+(w.ordr[b]<<1)]);c+=3*T,c=o.F._codeTiny(D,w.itree,a,c),c=o.F._codeTiny(N,w.itree,a,c)}for(var h=v,L=0;L<u;L+=2){for(var M=n[L],P=M>>>23,j=h+(8388607&M);h<j;)c=o.F._writeLit(d[h++],R,a,c);if(P!=0){var B=n[L+1],H=B>>16,z=B>>8&255,_=255&B;g(a,c=o.F._writeLit(257+z,R,a,c),P-w.of0[z]),c+=w.exb[z],U(a,c=o.F._writeLit(_,k,a,c),H-w.df0[_]),c+=w.dxb[_],h+=P}}c=o.F._writeLit(256,R,a,c)}return c},o.F._copyExact=function(t,n,u,l,d){var v=d>>>3;return l[v]=u,l[v+1]=u>>>8,l[v+2]=255-l[v],l[v+3]=255-l[v+1],v+=4,l.set(new Uint8Array(t.buffer,n,u),v),d+(u+4<<3)},o.F.getTrees=function(){for(var t=o.F.U,n=o.F._hufTree(t.lhst,t.ltree,15),u=o.F._hufTree(t.dhst,t.dtree,15),l=[],d=o.F._lenCodes(t.ltree,l),v=[],s=o.F._lenCodes(t.dtree,v),a=0;a<l.length;a+=2)t.ihst[l[a]]++;for(a=0;a<v.length;a+=2)t.ihst[v[a]]++;for(var c=o.F._hufTree(t.ihst,t.itree,7),f=19;f>4&&t.itree[1+(t.ordr[f-1]<<1)]==0;)f--;return[n,u,c,d,s,f,l,v]},o.F.getSecond=function(t){for(var n=[],u=0;u<t.length;u+=2)n.push(t[u+1]);return n},o.F.nonZero=function(t){for(var n="",u=0;u<t.length;u+=2)t[u+1]!=0&&(n+=(u>>1)+",");return n},o.F.contSize=function(t,n){for(var u=0,l=0;l<n.length;l++)u+=n[l]*t[1+(l<<1)];return u},o.F._codeTiny=function(t,n,u,l){for(var d=0;d<t.length;d+=2){var v=t[d],s=t[d+1];l=o.F._writeLit(v,n,u,l);var a=v==16?2:v==17?3:7;v>15&&(o.F._putsE(u,l,s,a),l+=a)}return l},o.F._lenCodes=function(t,n){for(var u=t.length;u!=2&&t[u-1]==0;)u-=2;for(var l=0;l<u;l+=2){var d=t[l+1],v=l+3<u?t[l+3]:-1,s=l+5<u?t[l+5]:-1,a=l==0?-1:t[l-1];if(d==0&&v==d&&s==d){for(var c=l+5;c+2<u&&t[c+2]==d;)c+=2;(f=Math.min(c+1-l>>>1,138))<11?n.push(17,f-3):n.push(18,f-11),l+=2*f-2}else if(d==a&&v==d&&s==d){for(c=l+5;c+2<u&&t[c+2]==d;)c+=2;var f=Math.min(c+1-l>>>1,6);n.push(16,f-3),l+=2*f-2}else n.push(d,0)}return u>>>1},o.F._hufTree=function(t,n,u){var l=[],d=t.length,v=n.length,s=0;for(s=0;s<v;s+=2)n[s]=0,n[s+1]=0;for(s=0;s<d;s++)t[s]!=0&&l.push({lit:s,f:t[s]});var a=l.length,c=l.slice(0);if(a==0)return 0;if(a==1){var f=l[0].lit;return c=f==0?1:0,n[1+(f<<1)]=1,n[1+(c<<1)]=1,1}l.sort(function(D,N){return D.f-N.f});var m=l[0],x=l[1],S=0,y=1,O=2;for(l[0]={lit:-1,f:m.f+x.f,l:m,r:x,d:0};y!=a-1;)m=S!=y&&(O==a||l[S].f<l[O].f)?l[S++]:l[O++],x=S!=y&&(O==a||l[S].f<l[O].f)?l[S++]:l[O++],l[y++]={lit:-1,f:m.f+x.f,l:m,r:x};var T=o.F.setDepth(l[y-1],0);for(T>u&&(o.F.restrictDepth(c,u,T),T=u),s=0;s<a;s++)n[1+(c[s].lit<<1)]=c[s].d;return T},o.F.setDepth=function(t,n){return t.lit!=-1?(t.d=n,n):Math.max(o.F.setDepth(t.l,n+1),o.F.setDepth(t.r,n+1))},o.F.restrictDepth=function(t,n,u){var l=0,d=1<<u-n,v=0;for(t.sort(function(a,c){return c.d==a.d?a.f-c.f:c.d-a.d}),l=0;l<t.length&&t[l].d>n;l++){var s=t[l].d;t[l].d=n,v+=d-(1<<u-s)}for(v>>>=u-n;v>0;)(s=t[l].d)<n?(t[l].d++,v-=1<<n-s-1):l++;for(;l>=0;l--)t[l].d==n&&v<0&&(t[l].d--,v++);v!=0&&console.log("debt left")},o.F._goodIndex=function(t,n){var u=0;return n[16|u]<=t&&(u|=16),n[8|u]<=t&&(u|=8),n[4|u]<=t&&(u|=4),n[2|u]<=t&&(u|=2),n[1|u]<=t&&(u|=1),u},o.F._writeLit=function(t,n,u,l){return o.F._putsF(u,l,n[t<<1]),l+n[1+(t<<1)]},o.F.inflate=function(t,n){var u=Uint8Array;if(t[0]==3&&t[1]==0)return n||new u(0);var l=o.F,d=l._bitsF,v=l._bitsE,s=l._decodeTiny,a=l.makeCodes,c=l.codes2map,f=l._get17,m=l.U,x=n==null;x&&(n=new u(t.length>>>2<<3));for(var S,y,O=0,T=0,D=0,N=0,w=0,U=0,g=0,p=0,C=0;O==0;)if(O=d(t,C,1),T=d(t,C+1,2),C+=3,T!=0){if(x&&(n=o.F._check(n,p+(1<<17))),T==1&&(S=m.flmap,y=m.fdmap,U=511,g=31),T==2){D=v(t,C,5)+257,N=v(t,C+5,5)+1,w=v(t,C+10,4)+4,C+=14;for(var A=0;A<38;A+=2)m.itree[A]=0,m.itree[A+1]=0;var E=1;for(A=0;A<w;A++){var I=v(t,C+3*A,3);m.itree[1+(m.ordr[A]<<1)]=I,I>E&&(E=I)}C+=3*w,a(m.itree,E),c(m.itree,E,m.imap),S=m.lmap,y=m.dmap,C=s(m.imap,(1<<E)-1,D+N,t,C,m.ttree);var R=l._copyOut(m.ttree,0,D,m.ltree);U=(1<<R)-1;var k=l._copyOut(m.ttree,D,N,m.dtree);g=(1<<k)-1,a(m.ltree,R),c(m.ltree,R,S),a(m.dtree,k),c(m.dtree,k,y)}for(;;){var b=S[f(t,C)&U];C+=15&b;var h=b>>>4;if(!(h>>>8))n[p++]=h;else{if(h==256)break;var L=p+h-254;if(h>264){var M=m.ldef[h-257];L=p+(M>>>3)+v(t,C,7&M),C+=7&M}var P=y[f(t,C)&g];C+=15&P;var j=P>>>4,B=m.ddef[j],H=(B>>>4)+d(t,C,15&B);for(C+=15&B,x&&(n=o.F._check(n,p+(1<<17)));p<L;)n[p]=n[p++-H],n[p]=n[p++-H],n[p]=n[p++-H],n[p]=n[p++-H];p=L}}}else{7&C&&(C+=8-(7&C));var z=4+(C>>>3),_=t[z-4]|t[z-3]<<8;x&&(n=o.F._check(n,p+_)),n.set(new u(t.buffer,t.byteOffset+z,_),p),C=z+_<<3,p+=_}return n.length==p?n:n.slice(0,p)},o.F._check=function(t,n){var u=t.length;if(n<=u)return t;var l=new Uint8Array(Math.max(u<<1,n));return l.set(t,0),l},o.F._decodeTiny=function(t,n,u,l,d,v){for(var s=o.F._bitsE,a=o.F._get17,c=0;c<u;){var f=t[a(l,d)&n];d+=15&f;var m=f>>>4;if(m<=15)v[c]=m,c++;else{var x=0,S=0;m==16?(S=3+s(l,d,2),d+=2,x=v[c-1]):m==17?(S=3+s(l,d,3),d+=3):m==18&&(S=11+s(l,d,7),d+=7);for(var y=c+S;c<y;)v[c]=x,c++}}return d},o.F._copyOut=function(t,n,u,l){for(var d=0,v=0,s=l.length>>>1;v<u;){var a=t[v+n];l[v<<1]=0,l[1+(v<<1)]=a,a>d&&(d=a),v++}for(;v<s;)l[v<<1]=0,l[1+(v<<1)]=0,v++;return d},o.F.makeCodes=function(t,n){for(var u,l,d,v,s=o.F.U,a=t.length,c=s.bl_count,f=0;f<=n;f++)c[f]=0;for(f=1;f<a;f+=2)c[t[f]]++;var m=s.next_code;for(u=0,c[0]=0,l=1;l<=n;l++)u=u+c[l-1]<<1,m[l]=u;for(d=0;d<a;d+=2)(v=t[d+1])!=0&&(t[d]=m[v],m[v]++)},o.F.codes2map=function(t,n,u){for(var l=t.length,d=o.F.U.rev15,v=0;v<l;v+=2)if(t[v+1]!=0)for(var s=v>>1,a=t[v+1],c=s<<4|a,f=n-a,m=t[v]<<f,x=m+(1<<f);m!=x;)u[d[m]>>>15-n]=c,m++},o.F.revCodes=function(t,n){for(var u=o.F.U.rev15,l=15-n,d=0;d<t.length;d+=2){var v=t[d]<<n-t[d+1];t[d]=u[v]>>>l}},o.F._putsE=function(t,n,u){u<<=7&n;var l=n>>>3;t[l]|=u,t[l+1]|=u>>>8},o.F._putsF=function(t,n,u){u<<=7&n;var l=n>>>3;t[l]|=u,t[l+1]|=u>>>8,t[l+2]|=u>>>16},o.F._bitsE=function(t,n,u){return(t[n>>>3]|t[1+(n>>>3)]<<8)>>>(7&n)&(1<<u)-1},o.F._bitsF=function(t,n,u){return(t[n>>>3]|t[1+(n>>>3)]<<8|t[2+(n>>>3)]<<16)>>>(7&n)&(1<<u)-1},o.F._get17=function(t,n){return(t[n>>>3]|t[1+(n>>>3)]<<8|t[2+(n>>>3)]<<16)>>>(7&n)},o.F._get25=function(t,n){return(t[n>>>3]|t[1+(n>>>3)]<<8|t[2+(n>>>3)]<<16|t[3+(n>>>3)]<<24)>>>(7&n)},o.F.U=(r=Uint16Array,i=Uint32Array,{next_code:new r(16),bl_count:new r(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new r(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new i(32),flmap:new r(512),fltree:[],fdmap:new r(32),fdtree:[],lmap:new r(32768),ltree:[],ttree:[],dmap:new r(32768),dtree:[],imap:new r(512),itree:[],rev15:new r(32768),lhst:new i(286),dhst:new i(30),ihst:new i(19),lits:new i(15e3),strt:new r(65536),prev:new r(32768)}),function(){for(var t=o.F.U,n=0;n<32768;n++){var u=n;u=(4278255360&(u=(4042322160&(u=(3435973836&(u=(2863311530&u)>>>1|(1431655765&u)<<1))>>>2|(858993459&u)<<2))>>>4|(252645135&u)<<4))>>>8|(16711935&u)<<8,t.rev15[n]=(u>>>16|u<<16)>>>17}function l(d,v,s){for(;v--!=0;)d.push(0,s)}for(n=0;n<32;n++)t.ldef[n]=t.of0[n]<<3|t.exb[n],t.ddef[n]=t.df0[n]<<4|t.dxb[n];l(t.fltree,144,8),l(t.fltree,112,9),l(t.fltree,24,7),l(t.fltree,8,8),o.F.makeCodes(t.fltree,9),o.F.codes2map(t.fltree,9,t.flmap),o.F.revCodes(t.fltree,9),l(t.fdtree,32,5),o.F.makeCodes(t.fdtree,5),o.F.codes2map(t.fdtree,5,t.fdmap),o.F.revCodes(t.fdtree,5),l(t.itree,19,0),l(t.ltree,286,0),l(t.dtree,30,0),l(t.ttree,320,0)}()})();var Mr=Sr({__proto__:null,default:xt},[xt]);const Ne=function(){var e={nextZero(s,a){for(;s[a]!=0;)a++;return a},readUshort:(s,a)=>s[a]<<8|s[a+1],writeUshort(s,a,c){s[a]=c>>8&255,s[a+1]=255&c},readUint:(s,a)=>16777216*s[a]+(s[a+1]<<16|s[a+2]<<8|s[a+3]),writeUint(s,a,c){s[a]=c>>24&255,s[a+1]=c>>16&255,s[a+2]=c>>8&255,s[a+3]=255&c},readASCII(s,a,c){let f="";for(let m=0;m<c;m++)f+=String.fromCharCode(s[a+m]);return f},writeASCII(s,a,c){for(let f=0;f<c.length;f++)s[a+f]=c.charCodeAt(f)},readBytes(s,a,c){const f=[];for(let m=0;m<c;m++)f.push(s[a+m]);return f},pad:s=>s.length<2?`0${s}`:s,readUTF8(s,a,c){let f,m="";for(let x=0;x<c;x++)m+=`%${e.pad(s[a+x].toString(16))}`;try{f=decodeURIComponent(m)}catch{return e.readASCII(s,a,c)}return f}};function r(s,a,c,f){const m=a*c,x=n(f),S=Math.ceil(a*x/8),y=new Uint8Array(4*m),O=new Uint32Array(y.buffer),{ctype:T}=f,{depth:D}=f,N=e.readUshort;if(T==6){const M=m<<2;if(D==8)for(var w=0;w<M;w+=4)y[w]=s[w],y[w+1]=s[w+1],y[w+2]=s[w+2],y[w+3]=s[w+3];if(D==16)for(w=0;w<M;w++)y[w]=s[w<<1]}else if(T==2){const M=f.tabs.tRNS;if(M==null){if(D==8)for(w=0;w<m;w++){var U=3*w;O[w]=255<<24|s[U+2]<<16|s[U+1]<<8|s[U]}if(D==16)for(w=0;w<m;w++)U=6*w,O[w]=255<<24|s[U+4]<<16|s[U+2]<<8|s[U]}else{var g=M[0];const P=M[1],j=M[2];if(D==8)for(w=0;w<m;w++){var p=w<<2;U=3*w,O[w]=255<<24|s[U+2]<<16|s[U+1]<<8|s[U],s[U]==g&&s[U+1]==P&&s[U+2]==j&&(y[p+3]=0)}if(D==16)for(w=0;w<m;w++)p=w<<2,U=6*w,O[w]=255<<24|s[U+4]<<16|s[U+2]<<8|s[U],N(s,U)==g&&N(s,U+2)==P&&N(s,U+4)==j&&(y[p+3]=0)}}else if(T==3){const M=f.tabs.PLTE,P=f.tabs.tRNS,j=P?P.length:0;if(D==1)for(var C=0;C<c;C++){var A=C*S,E=C*a;for(w=0;w<a;w++){p=E+w<<2;var I=3*(R=s[A+(w>>3)]>>7-((7&w)<<0)&1);y[p]=M[I],y[p+1]=M[I+1],y[p+2]=M[I+2],y[p+3]=R<j?P[R]:255}}if(D==2)for(C=0;C<c;C++)for(A=C*S,E=C*a,w=0;w<a;w++)p=E+w<<2,I=3*(R=s[A+(w>>2)]>>6-((3&w)<<1)&3),y[p]=M[I],y[p+1]=M[I+1],y[p+2]=M[I+2],y[p+3]=R<j?P[R]:255;if(D==4)for(C=0;C<c;C++)for(A=C*S,E=C*a,w=0;w<a;w++)p=E+w<<2,I=3*(R=s[A+(w>>1)]>>4-((1&w)<<2)&15),y[p]=M[I],y[p+1]=M[I+1],y[p+2]=M[I+2],y[p+3]=R<j?P[R]:255;if(D==8)for(w=0;w<m;w++){var R;p=w<<2,I=3*(R=s[w]),y[p]=M[I],y[p+1]=M[I+1],y[p+2]=M[I+2],y[p+3]=R<j?P[R]:255}}else if(T==4){if(D==8)for(w=0;w<m;w++){p=w<<2;var k=s[b=w<<1];y[p]=k,y[p+1]=k,y[p+2]=k,y[p+3]=s[b+1]}if(D==16)for(w=0;w<m;w++){var b;p=w<<2,k=s[b=w<<2],y[p]=k,y[p+1]=k,y[p+2]=k,y[p+3]=s[b+2]}}else if(T==0)for(g=f.tabs.tRNS?f.tabs.tRNS:-1,C=0;C<c;C++){const M=C*S,P=C*a;if(D==1)for(var h=0;h<a;h++){var L=(k=255*(s[M+(h>>>3)]>>>7-(7&h)&1))==255*g?0:255;O[P+h]=L<<24|k<<16|k<<8|k}else if(D==2)for(h=0;h<a;h++)L=(k=85*(s[M+(h>>>2)]>>>6-((3&h)<<1)&3))==85*g?0:255,O[P+h]=L<<24|k<<16|k<<8|k;else if(D==4)for(h=0;h<a;h++)L=(k=17*(s[M+(h>>>1)]>>>4-((1&h)<<2)&15))==17*g?0:255,O[P+h]=L<<24|k<<16|k<<8|k;else if(D==8)for(h=0;h<a;h++)L=(k=s[M+h])==g?0:255,O[P+h]=L<<24|k<<16|k<<8|k;else if(D==16)for(h=0;h<a;h++)k=s[M+(h<<1)],L=N(s,M+(h<<1))==g?0:255,O[P+h]=L<<24|k<<16|k<<8|k}return y}function i(s,a,c,f){const m=n(s),x=Math.ceil(c*m/8),S=new Uint8Array((x+1+s.interlace)*f);return a=s.tabs.CgBI?t(a,S):o(a,S),s.interlace==0?a=u(a,s,0,c,f):s.interlace==1&&(a=function(O,T){const D=T.width,N=T.height,w=n(T),U=w>>3,g=Math.ceil(D*w/8),p=new Uint8Array(N*g);let C=0;const A=[0,0,4,0,2,0,1],E=[0,4,0,2,0,1,0],I=[8,8,8,4,4,2,2],R=[8,8,4,4,2,2,1];let k=0;for(;k<7;){const h=I[k],L=R[k];let M=0,P=0,j=A[k];for(;j<N;)j+=h,P++;let B=E[k];for(;B<D;)B+=L,M++;const H=Math.ceil(M*w/8);u(O,T,C,M,P);let z=0,_=A[k];for(;_<N;){let $=E[k],Y=C+z*H<<3;for(;$<D;){var b;if(w==1&&(b=(b=O[Y>>3])>>7-(7&Y)&1,p[_*g+($>>3)]|=b<<7-((7&$)<<0)),w==2&&(b=(b=O[Y>>3])>>6-(7&Y)&3,p[_*g+($>>2)]|=b<<6-((3&$)<<1)),w==4&&(b=(b=O[Y>>3])>>4-(7&Y)&15,p[_*g+($>>1)]|=b<<4-((1&$)<<2)),w>=8){const Q=_*g+$*U;for(let X=0;X<U;X++)p[Q+X]=O[(Y>>3)+X]}Y+=w,$+=L}z++,_+=h}M*P!=0&&(C+=P*(1+H)),k+=1}return p}(a,s)),a}function o(s,a){return t(new Uint8Array(s.buffer,2,s.length-6),a)}var t=function(){const s={H:{}};return s.H.N=function(a,c){const f=Uint8Array;let m,x,S=0,y=0,O=0,T=0,D=0,N=0,w=0,U=0,g=0;if(a[0]==3&&a[1]==0)return c||new f(0);const p=s.H,C=p.b,A=p.e,E=p.R,I=p.n,R=p.A,k=p.Z,b=p.m,h=c==null;for(h&&(c=new f(a.length>>>2<<5));S==0;)if(S=C(a,g,1),y=C(a,g+1,2),g+=3,y!=0){if(h&&(c=s.H.W(c,U+(1<<17))),y==1&&(m=b.J,x=b.h,N=511,w=31),y==2){O=A(a,g,5)+257,T=A(a,g+5,5)+1,D=A(a,g+10,4)+4,g+=14;let M=1;for(var L=0;L<38;L+=2)b.Q[L]=0,b.Q[L+1]=0;for(L=0;L<D;L++){const B=A(a,g+3*L,3);b.Q[1+(b.X[L]<<1)]=B,B>M&&(M=B)}g+=3*D,I(b.Q,M),R(b.Q,M,b.u),m=b.w,x=b.d,g=E(b.u,(1<<M)-1,O+T,a,g,b.v);const P=p.V(b.v,0,O,b.C);N=(1<<P)-1;const j=p.V(b.v,O,T,b.D);w=(1<<j)-1,I(b.C,P),R(b.C,P,m),I(b.D,j),R(b.D,j,x)}for(;;){const M=m[k(a,g)&N];g+=15&M;const P=M>>>4;if(!(P>>>8))c[U++]=P;else{if(P==256)break;{let j=U+P-254;if(P>264){const $=b.q[P-257];j=U+($>>>3)+A(a,g,7&$),g+=7&$}const B=x[k(a,g)&w];g+=15&B;const H=B>>>4,z=b.c[H],_=(z>>>4)+C(a,g,15&z);for(g+=15&z;U<j;)c[U]=c[U++-_],c[U]=c[U++-_],c[U]=c[U++-_],c[U]=c[U++-_];U=j}}}}else{7&g&&(g+=8-(7&g));const M=4+(g>>>3),P=a[M-4]|a[M-3]<<8;h&&(c=s.H.W(c,U+P)),c.set(new f(a.buffer,a.byteOffset+M,P),U),g=M+P<<3,U+=P}return c.length==U?c:c.slice(0,U)},s.H.W=function(a,c){const f=a.length;if(c<=f)return a;const m=new Uint8Array(f<<1);return m.set(a,0),m},s.H.R=function(a,c,f,m,x,S){const y=s.H.e,O=s.H.Z;let T=0;for(;T<f;){const D=a[O(m,x)&c];x+=15&D;const N=D>>>4;if(N<=15)S[T]=N,T++;else{let w=0,U=0;N==16?(U=3+y(m,x,2),x+=2,w=S[T-1]):N==17?(U=3+y(m,x,3),x+=3):N==18&&(U=11+y(m,x,7),x+=7);const g=T+U;for(;T<g;)S[T]=w,T++}}return x},s.H.V=function(a,c,f,m){let x=0,S=0;const y=m.length>>>1;for(;S<f;){const O=a[S+c];m[S<<1]=0,m[1+(S<<1)]=O,O>x&&(x=O),S++}for(;S<y;)m[S<<1]=0,m[1+(S<<1)]=0,S++;return x},s.H.n=function(a,c){const f=s.H.m,m=a.length;let x,S,y,O;const T=f.j;for(var D=0;D<=c;D++)T[D]=0;for(D=1;D<m;D+=2)T[a[D]]++;const N=f.K;for(x=0,T[0]=0,S=1;S<=c;S++)x=x+T[S-1]<<1,N[S]=x;for(y=0;y<m;y+=2)O=a[y+1],O!=0&&(a[y]=N[O],N[O]++)},s.H.A=function(a,c,f){const m=a.length,x=s.H.m.r;for(let S=0;S<m;S+=2)if(a[S+1]!=0){const y=S>>1,O=a[S+1],T=y<<4|O,D=c-O;let N=a[S]<<D;const w=N+(1<<D);for(;N!=w;)f[x[N]>>>15-c]=T,N++}},s.H.l=function(a,c){const f=s.H.m.r,m=15-c;for(let x=0;x<a.length;x+=2){const S=a[x]<<c-a[x+1];a[x]=f[S]>>>m}},s.H.M=function(a,c,f){f<<=7&c;const m=c>>>3;a[m]|=f,a[m+1]|=f>>>8},s.H.I=function(a,c,f){f<<=7&c;const m=c>>>3;a[m]|=f,a[m+1]|=f>>>8,a[m+2]|=f>>>16},s.H.e=function(a,c,f){return(a[c>>>3]|a[1+(c>>>3)]<<8)>>>(7&c)&(1<<f)-1},s.H.b=function(a,c,f){return(a[c>>>3]|a[1+(c>>>3)]<<8|a[2+(c>>>3)]<<16)>>>(7&c)&(1<<f)-1},s.H.Z=function(a,c){return(a[c>>>3]|a[1+(c>>>3)]<<8|a[2+(c>>>3)]<<16)>>>(7&c)},s.H.i=function(a,c){return(a[c>>>3]|a[1+(c>>>3)]<<8|a[2+(c>>>3)]<<16|a[3+(c>>>3)]<<24)>>>(7&c)},s.H.m=function(){const a=Uint16Array,c=Uint32Array;return{K:new a(16),j:new a(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new a(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new c(32),J:new a(512),_:[],h:new a(32),$:[],w:new a(32768),C:[],v:[],d:new a(32768),D:[],u:new a(512),Q:[],r:new a(32768),s:new c(286),Y:new c(30),a:new c(19),t:new c(15e3),k:new a(65536),g:new a(32768)}}(),function(){const a=s.H.m;for(var c=0;c<32768;c++){let m=c;m=(2863311530&m)>>>1|(1431655765&m)<<1,m=(3435973836&m)>>>2|(858993459&m)<<2,m=(4042322160&m)>>>4|(252645135&m)<<4,m=(4278255360&m)>>>8|(16711935&m)<<8,a.r[c]=(m>>>16|m<<16)>>>17}function f(m,x,S){for(;x--!=0;)m.push(0,S)}for(c=0;c<32;c++)a.q[c]=a.S[c]<<3|a.T[c],a.c[c]=a.p[c]<<4|a.z[c];f(a._,144,8),f(a._,112,9),f(a._,24,7),f(a._,8,8),s.H.n(a._,9),s.H.A(a._,9,a.J),s.H.l(a._,9),f(a.$,32,5),s.H.n(a.$,5),s.H.A(a.$,5,a.h),s.H.l(a.$,5),f(a.Q,19,0),f(a.C,286,0),f(a.D,30,0),f(a.v,320,0)}(),s.H.N}();function n(s){return[1,null,3,1,2,null,4][s.ctype]*s.depth}function u(s,a,c,f,m){let x=n(a);const S=Math.ceil(f*x/8);let y,O;x=Math.ceil(x/8);let T=s[c],D=0;if(T>1&&(s[c]=[0,0,1][T-2]),T==3)for(D=x;D<S;D++)s[D+1]=s[D+1]+(s[D+1-x]>>>1)&255;for(let N=0;N<m;N++)if(y=c+N*S,O=y+N+1,T=s[O-1],D=0,T==0)for(;D<S;D++)s[y+D]=s[O+D];else if(T==1){for(;D<x;D++)s[y+D]=s[O+D];for(;D<S;D++)s[y+D]=s[O+D]+s[y+D-x]}else if(T==2)for(;D<S;D++)s[y+D]=s[O+D]+s[y+D-S];else if(T==3){for(;D<x;D++)s[y+D]=s[O+D]+(s[y+D-S]>>>1);for(;D<S;D++)s[y+D]=s[O+D]+(s[y+D-S]+s[y+D-x]>>>1)}else{for(;D<x;D++)s[y+D]=s[O+D]+l(0,s[y+D-S],0);for(;D<S;D++)s[y+D]=s[O+D]+l(s[y+D-x],s[y+D-S],s[y+D-x-S])}return s}function l(s,a,c){const f=s+a-c,m=f-s,x=f-a,S=f-c;return m*m<=x*x&&m*m<=S*S?s:x*x<=S*S?a:c}function d(s,a,c){c.width=e.readUint(s,a),a+=4,c.height=e.readUint(s,a),a+=4,c.depth=s[a],a++,c.ctype=s[a],a++,c.compress=s[a],a++,c.filter=s[a],a++,c.interlace=s[a],a++}function v(s,a,c,f,m,x,S,y,O){const T=Math.min(a,m),D=Math.min(c,x);let N=0,w=0;for(let k=0;k<D;k++)for(let b=0;b<T;b++)if(S>=0&&y>=0?(N=k*a+b<<2,w=(y+k)*m+S+b<<2):(N=(-y+k)*a-S+b<<2,w=k*m+b<<2),O==0)f[w]=s[N],f[w+1]=s[N+1],f[w+2]=s[N+2],f[w+3]=s[N+3];else if(O==1){var U=s[N+3]*.00392156862745098,g=s[N]*U,p=s[N+1]*U,C=s[N+2]*U,A=f[w+3]*(1/255),E=f[w]*A,I=f[w+1]*A,R=f[w+2]*A;const h=1-U,L=U+A*h,M=L==0?0:1/L;f[w+3]=255*L,f[w+0]=(g+E*h)*M,f[w+1]=(p+I*h)*M,f[w+2]=(C+R*h)*M}else if(O==2)U=s[N+3],g=s[N],p=s[N+1],C=s[N+2],A=f[w+3],E=f[w],I=f[w+1],R=f[w+2],U==A&&g==E&&p==I&&C==R?(f[w]=0,f[w+1]=0,f[w+2]=0,f[w+3]=0):(f[w]=g,f[w+1]=p,f[w+2]=C,f[w+3]=U);else if(O==3){if(U=s[N+3],g=s[N],p=s[N+1],C=s[N+2],A=f[w+3],E=f[w],I=f[w+1],R=f[w+2],U==A&&g==E&&p==I&&C==R)continue;if(U<220&&A>20)return!1}return!0}return{decode:function(a){const c=new Uint8Array(a);let f=8;const m=e,x=m.readUshort,S=m.readUint,y={tabs:{},frames:[]},O=new Uint8Array(c.length);let T,D=0,N=0;const w=[137,80,78,71,13,10,26,10];for(var U=0;U<8;U++)if(c[U]!=w[U])throw"The input is not a PNG file!";for(;f<c.length;){const k=m.readUint(c,f);f+=4;const b=m.readASCII(c,f,4);if(f+=4,b=="IHDR")d(c,f,y);else if(b=="iCCP"){for(var g=f;c[g]!=0;)g++;m.readASCII(c,f,g-f),c[g+1];const h=c.slice(g+2,f+k);let L=null;try{L=o(h)}catch{L=t(h)}y.tabs[b]=L}else if(b=="CgBI")y.tabs[b]=c.slice(f,f+4);else if(b=="IDAT"){for(U=0;U<k;U++)O[D+U]=c[f+U];D+=k}else if(b=="acTL")y.tabs[b]={num_frames:S(c,f),num_plays:S(c,f+4)},T=new Uint8Array(c.length);else if(b=="fcTL"){N!=0&&((R=y.frames[y.frames.length-1]).data=i(y,T.slice(0,N),R.rect.width,R.rect.height),N=0);const h={x:S(c,f+12),y:S(c,f+16),width:S(c,f+4),height:S(c,f+8)};let L=x(c,f+22);L=x(c,f+20)/(L==0?100:L);const M={rect:h,delay:Math.round(1e3*L),dispose:c[f+24],blend:c[f+25]};y.frames.push(M)}else if(b=="fdAT"){for(U=0;U<k-4;U++)T[N+U]=c[f+U+4];N+=k-4}else if(b=="pHYs")y.tabs[b]=[m.readUint(c,f),m.readUint(c,f+4),c[f+8]];else if(b=="cHRM")for(y.tabs[b]=[],U=0;U<8;U++)y.tabs[b].push(m.readUint(c,f+4*U));else if(b=="tEXt"||b=="zTXt"){y.tabs[b]==null&&(y.tabs[b]={});var p=m.nextZero(c,f),C=m.readASCII(c,f,p-f),A=f+k-p-1;if(b=="tEXt")I=m.readASCII(c,p+1,A);else{var E=o(c.slice(p+2,p+2+A));I=m.readUTF8(E,0,E.length)}y.tabs[b][C]=I}else if(b=="iTXt"){y.tabs[b]==null&&(y.tabs[b]={}),p=0,g=f,p=m.nextZero(c,g),C=m.readASCII(c,g,p-g);const h=c[g=p+1];var I;c[g+1],g+=2,p=m.nextZero(c,g),m.readASCII(c,g,p-g),g=p+1,p=m.nextZero(c,g),m.readUTF8(c,g,p-g),A=k-((g=p+1)-f),h==0?I=m.readUTF8(c,g,A):(E=o(c.slice(g,g+A)),I=m.readUTF8(E,0,E.length)),y.tabs[b][C]=I}else if(b=="PLTE")y.tabs[b]=m.readBytes(c,f,k);else if(b=="hIST"){const h=y.tabs.PLTE.length/3;for(y.tabs[b]=[],U=0;U<h;U++)y.tabs[b].push(x(c,f+2*U))}else if(b=="tRNS")y.ctype==3?y.tabs[b]=m.readBytes(c,f,k):y.ctype==0?y.tabs[b]=x(c,f):y.ctype==2&&(y.tabs[b]=[x(c,f),x(c,f+2),x(c,f+4)]);else if(b=="gAMA")y.tabs[b]=m.readUint(c,f)/1e5;else if(b=="sRGB")y.tabs[b]=c[f];else if(b=="bKGD")y.ctype==0||y.ctype==4?y.tabs[b]=[x(c,f)]:y.ctype==2||y.ctype==6?y.tabs[b]=[x(c,f),x(c,f+2),x(c,f+4)]:y.ctype==3&&(y.tabs[b]=c[f]);else if(b=="IEND")break;f+=k,m.readUint(c,f),f+=4}var R;return N!=0&&((R=y.frames[y.frames.length-1]).data=i(y,T.slice(0,N),R.rect.width,R.rect.height)),y.data=i(y,O,y.width,y.height),delete y.compress,delete y.interlace,delete y.filter,y},toRGBA8:function(a){const c=a.width,f=a.height;if(a.tabs.acTL==null)return[r(a.data,c,f,a).buffer];const m=[];a.frames[0].data==null&&(a.frames[0].data=a.data);const x=c*f*4,S=new Uint8Array(x),y=new Uint8Array(x),O=new Uint8Array(x);for(let D=0;D<a.frames.length;D++){const N=a.frames[D],w=N.rect.x,U=N.rect.y,g=N.rect.width,p=N.rect.height,C=r(N.data,g,p,a);if(D!=0)for(var T=0;T<x;T++)O[T]=S[T];if(N.blend==0?v(C,g,p,S,c,f,w,U,0):N.blend==1&&v(C,g,p,S,c,f,w,U,1),m.push(S.buffer.slice(0)),N.dispose!=0){if(N.dispose==1)v(y,g,p,S,c,f,w,U,0);else if(N.dispose==2)for(T=0;T<x;T++)S[T]=O[T]}}return m},_paeth:l,_copyTile:v,_bin:e}}();(function(){const{_copyTile:e}=Ne,{_bin:r}=Ne,i=Ne._paeth;var o={table:function(){const g=new Uint32Array(256);for(let p=0;p<256;p++){let C=p;for(let A=0;A<8;A++)1&C?C=3988292384^C>>>1:C>>>=1;g[p]=C}return g}(),update(g,p,C,A){for(let E=0;E<A;E++)g=o.table[255&(g^p[C+E])]^g>>>8;return g},crc:(g,p,C)=>4294967295^o.update(4294967295,g,p,C)};function t(g,p,C,A){p[C]+=g[0]*A>>4,p[C+1]+=g[1]*A>>4,p[C+2]+=g[2]*A>>4,p[C+3]+=g[3]*A>>4}function n(g){return Math.max(0,Math.min(255,g))}function u(g,p){const C=g[0]-p[0],A=g[1]-p[1],E=g[2]-p[2],I=g[3]-p[3];return C*C+A*A+E*E+I*I}function l(g,p,C,A,E,I,R){R==null&&(R=1);const k=A.length,b=[];for(var h=0;h<k;h++){const _=A[h];b.push([_>>>0&255,_>>>8&255,_>>>16&255,_>>>24&255])}for(h=0;h<k;h++){let _=4294967295;for(var L=0,M=0;M<k;M++){var P=u(b[h],b[M]);M!=h&&P<_&&(_=P,L=M)}}const j=new Uint32Array(E.buffer),B=new Int16Array(p*C*4),H=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(h=0;h<H.length;h++)H[h]=255*((H[h]+.5)/16-.5);for(let _=0;_<C;_++)for(let $=0;$<p;$++){var z;h=4*(_*p+$),R!=2?z=[n(g[h]+B[h]),n(g[h+1]+B[h+1]),n(g[h+2]+B[h+2]),n(g[h+3]+B[h+3])]:(P=H[4*(3&_)+(3&$)],z=[n(g[h]+P),n(g[h+1]+P),n(g[h+2]+P),n(g[h+3]+P)]),L=0;let Y=16777215;for(M=0;M<k;M++){const W=u(z,b[M]);W<Y&&(Y=W,L=M)}const Q=b[L],X=[z[0]-Q[0],z[1]-Q[1],z[2]-Q[2],z[3]-Q[3]];R==1&&($!=p-1&&t(X,B,h+4,7),_!=C-1&&($!=0&&t(X,B,h+4*p-4,3),t(X,B,h+4*p,5),$!=p-1&&t(X,B,h+4*p+4,1))),I[h>>2]=L,j[h>>2]=A[L]}}function d(g,p,C,A,E){E==null&&(E={});const{crc:I}=o,R=r.writeUint,k=r.writeUshort,b=r.writeASCII;let h=8;const L=g.frames.length>1;let M,P=!1,j=33+(L?20:0);if(E.sRGB!=null&&(j+=13),E.pHYs!=null&&(j+=21),E.iCCP!=null&&(M=pako.deflate(E.iCCP),j+=21+M.length+4),g.ctype==3){for(var B=g.plte.length,H=0;H<B;H++)g.plte[H]>>>24!=255&&(P=!0);j+=8+3*B+4+(P?8+1*B+4:0)}for(var z=0;z<g.frames.length;z++)L&&(j+=38),j+=(Q=g.frames[z]).cimg.length+12,z!=0&&(j+=4);j+=12;const _=new Uint8Array(j),$=[137,80,78,71,13,10,26,10];for(H=0;H<8;H++)_[H]=$[H];if(R(_,h,13),h+=4,b(_,h,"IHDR"),h+=4,R(_,h,p),h+=4,R(_,h,C),h+=4,_[h]=g.depth,h++,_[h]=g.ctype,h++,_[h]=0,h++,_[h]=0,h++,_[h]=0,h++,R(_,h,I(_,h-17,17)),h+=4,E.sRGB!=null&&(R(_,h,1),h+=4,b(_,h,"sRGB"),h+=4,_[h]=E.sRGB,h++,R(_,h,I(_,h-5,5)),h+=4),E.iCCP!=null){const X=13+M.length;R(_,h,X),h+=4,b(_,h,"iCCP"),h+=4,b(_,h,"ICC profile"),h+=11,h+=2,_.set(M,h),h+=M.length,R(_,h,I(_,h-(X+4),X+4)),h+=4}if(E.pHYs!=null&&(R(_,h,9),h+=4,b(_,h,"pHYs"),h+=4,R(_,h,E.pHYs[0]),h+=4,R(_,h,E.pHYs[1]),h+=4,_[h]=E.pHYs[2],h++,R(_,h,I(_,h-13,13)),h+=4),L&&(R(_,h,8),h+=4,b(_,h,"acTL"),h+=4,R(_,h,g.frames.length),h+=4,R(_,h,E.loop!=null?E.loop:0),h+=4,R(_,h,I(_,h-12,12)),h+=4),g.ctype==3){for(R(_,h,3*(B=g.plte.length)),h+=4,b(_,h,"PLTE"),h+=4,H=0;H<B;H++){const X=3*H,W=g.plte[H],J=255&W,K=W>>>8&255,Ae=W>>>16&255;_[h+X+0]=J,_[h+X+1]=K,_[h+X+2]=Ae}if(h+=3*B,R(_,h,I(_,h-3*B-4,3*B+4)),h+=4,P){for(R(_,h,B),h+=4,b(_,h,"tRNS"),h+=4,H=0;H<B;H++)_[h+H]=g.plte[H]>>>24&255;h+=B,R(_,h,I(_,h-B-4,B+4)),h+=4}}let Y=0;for(z=0;z<g.frames.length;z++){var Q=g.frames[z];L&&(R(_,h,26),h+=4,b(_,h,"fcTL"),h+=4,R(_,h,Y++),h+=4,R(_,h,Q.rect.width),h+=4,R(_,h,Q.rect.height),h+=4,R(_,h,Q.rect.x),h+=4,R(_,h,Q.rect.y),h+=4,k(_,h,A[z]),h+=2,k(_,h,1e3),h+=2,_[h]=Q.dispose,h++,_[h]=Q.blend,h++,R(_,h,I(_,h-30,30)),h+=4);const X=Q.cimg;R(_,h,(B=X.length)+(z==0?0:4)),h+=4;const W=h;b(_,h,z==0?"IDAT":"fdAT"),h+=4,z!=0&&(R(_,h,Y++),h+=4),_.set(X,h),h+=B,R(_,h,I(_,W,h-W)),h+=4}return R(_,h,0),h+=4,b(_,h,"IEND"),h+=4,R(_,h,I(_,h-4,4)),h+=4,_.buffer}function v(g,p,C){for(let A=0;A<g.frames.length;A++){const E=g.frames[A];E.rect.width;const I=E.rect.height,R=new Uint8Array(I*E.bpl+I);E.cimg=f(E.img,I,E.bpp,E.bpl,R,p,C)}}function s(g,p,C,A,E){const I=E[0],R=E[1],k=E[2],b=E[3],h=E[4],L=E[5];let M=6,P=8,j=255;for(var B=0;B<g.length;B++){const oe=new Uint8Array(g[B]);for(var H=oe.length,z=0;z<H;z+=4)j&=oe[z+3]}const _=j!=255,$=function(ee,V,ce,re,te,ge){const ie=[];for(var Z=0;Z<ee.length;Z++){const pe=new Uint8Array(ee[Z]),fe=new Uint32Array(pe.buffer);var ye;let xe=0,Oe=0,Te=V,Fe=ce,Ye=re?1:0;if(Z!=0){const _t=ge||re||Z==1||ie[Z-2].dispose!=0?1:2;let Ge=0,vt=1e9;for(let qe=0;qe<_t;qe++){var Le=new Uint8Array(ee[Z-1-qe]);const Lt=new Uint32Array(ee[Z-1-qe]);let ne=V,ae=ce,de=-1,Re=-1;for(let le=0;le<ce;le++)for(let ve=0;ve<V;ve++)fe[se=le*V+ve]!=Lt[se]&&(ve<ne&&(ne=ve),ve>de&&(de=ve),le<ae&&(ae=le),le>Re&&(Re=le));de==-1&&(ne=ae=de=Re=0),te&&((1&ne)==1&&ne--,(1&ae)==1&&ae--);const Ce=(de-ne+1)*(Re-ae+1);Ce<vt&&(vt=Ce,Ge=qe,xe=ne,Oe=ae,Te=de-ne+1,Fe=Re-ae+1)}Le=new Uint8Array(ee[Z-1-Ge]),Ge==1&&(ie[Z-1].dispose=2),ye=new Uint8Array(Te*Fe*4),e(Le,V,ce,ye,Te,Fe,-xe,-Oe,0),Ye=e(pe,V,ce,ye,Te,Fe,-xe,-Oe,3)?1:0,Ye==1?c(pe,V,ce,ye,{x:xe,y:Oe,width:Te,height:Fe}):e(pe,V,ce,ye,Te,Fe,-xe,-Oe,0)}else ye=pe.slice(0);ie.push({rect:{x:xe,y:Oe,width:Te,height:Fe},img:ye,blend:Ye,dispose:0})}if(re)for(Z=0;Z<ie.length;Z++){if((Ie=ie[Z]).blend==1)continue;const pe=Ie.rect,fe=ie[Z-1].rect,xe=Math.min(pe.x,fe.x),Oe=Math.min(pe.y,fe.y),Te={x:xe,y:Oe,width:Math.max(pe.x+pe.width,fe.x+fe.width)-xe,height:Math.max(pe.y+pe.height,fe.y+fe.height)-Oe};ie[Z-1].dispose=1,Z-1!=0&&a(ee,V,ce,ie,Z-1,Te,te),a(ee,V,ce,ie,Z,Te,te)}let ke=0;if(ee.length!=1)for(var se=0;se<ie.length;se++){var Ie;ke+=(Ie=ie[se]).rect.width*Ie.rect.height}return ie}(g,p,C,I,R,k),Y={},Q=[],X=[];if(A!=0){const oe=[];for(z=0;z<$.length;z++)oe.push($[z].img.buffer);const ee=function(te){let ge=0;for(var ie=0;ie<te.length;ie++)ge+=te[ie].byteLength;const Z=new Uint8Array(ge);let ye=0;for(ie=0;ie<te.length;ie++){const Le=new Uint8Array(te[ie]),ke=Le.length;for(let se=0;se<ke;se+=4){let Ie=Le[se],pe=Le[se+1],fe=Le[se+2];const xe=Le[se+3];xe==0&&(Ie=pe=fe=0),Z[ye+se]=Ie,Z[ye+se+1]=pe,Z[ye+se+2]=fe,Z[ye+se+3]=xe}ye+=ke}return Z.buffer}(oe),V=x(ee,A);for(z=0;z<V.plte.length;z++)Q.push(V.plte[z].est.rgba);let ce=0;for(z=0;z<$.length;z++){const re=(J=$[z]).img.length;var W=new Uint8Array(V.inds.buffer,ce>>2,re>>2);X.push(W);const te=new Uint8Array(V.abuf,ce,re);L&&l(J.img,J.rect.width,J.rect.height,Q,te,W),J.img.set(te),ce+=re}}else for(B=0;B<$.length;B++){var J=$[B];const oe=new Uint32Array(J.img.buffer);var K=J.rect.width;for(H=oe.length,W=new Uint8Array(H),X.push(W),z=0;z<H;z++){const ee=oe[z];if(z!=0&&ee==oe[z-1])W[z]=W[z-1];else if(z>K&&ee==oe[z-K])W[z]=W[z-K];else{let V=Y[ee];if(V==null&&(Y[ee]=V=Q.length,Q.push(ee),Q.length>=300))break;W[z]=V}}}const Ae=Q.length;for(Ae<=256&&h==0&&(P=Ae<=2?1:Ae<=4?2:Ae<=16?4:8,P=Math.max(P,b)),B=0;B<$.length;B++){(J=$[B]).rect.x,J.rect.y,K=J.rect.width;const oe=J.rect.height;let ee=J.img;new Uint32Array(ee.buffer);let V=4*K,ce=4;if(Ae<=256&&h==0){V=Math.ceil(P*K/8);var ue=new Uint8Array(V*oe);const re=X[B];for(let te=0;te<oe;te++){z=te*V;const ge=te*K;if(P==8)for(var G=0;G<K;G++)ue[z+G]=re[ge+G];else if(P==4)for(G=0;G<K;G++)ue[z+(G>>1)]|=re[ge+G]<<4-4*(1&G);else if(P==2)for(G=0;G<K;G++)ue[z+(G>>2)]|=re[ge+G]<<6-2*(3&G);else if(P==1)for(G=0;G<K;G++)ue[z+(G>>3)]|=re[ge+G]<<7-1*(7&G)}ee=ue,M=3,ce=1}else if(_==0&&$.length==1){ue=new Uint8Array(K*oe*3);const re=K*oe;for(z=0;z<re;z++){const te=3*z,ge=4*z;ue[te]=ee[ge],ue[te+1]=ee[ge+1],ue[te+2]=ee[ge+2]}ee=ue,M=2,ce=3,V=3*K}J.img=ee,J.bpl=V,J.bpp=ce}return{ctype:M,depth:P,plte:Q,frames:$}}function a(g,p,C,A,E,I,R){const k=Uint8Array,b=Uint32Array,h=new k(g[E-1]),L=new b(g[E-1]),M=E+1<g.length?new k(g[E+1]):null,P=new k(g[E]),j=new b(P.buffer);let B=p,H=C,z=-1,_=-1;for(let Y=0;Y<I.height;Y++)for(let Q=0;Q<I.width;Q++){const X=I.x+Q,W=I.y+Y,J=W*p+X,K=j[J];K==0||A[E-1].dispose==0&&L[J]==K&&(M==null||M[4*J+3]!=0)||(X<B&&(B=X),X>z&&(z=X),W<H&&(H=W),W>_&&(_=W))}z==-1&&(B=H=z=_=0),R&&((1&B)==1&&B--,(1&H)==1&&H--),I={x:B,y:H,width:z-B+1,height:_-H+1};const $=A[E];$.rect=I,$.blend=1,$.img=new Uint8Array(I.width*I.height*4),A[E-1].dispose==0?(e(h,p,C,$.img,I.width,I.height,-I.x,-I.y,0),c(P,p,C,$.img,I)):e(P,p,C,$.img,I.width,I.height,-I.x,-I.y,0)}function c(g,p,C,A,E){e(g,p,C,A,E.width,E.height,-E.x,-E.y,2)}function f(g,p,C,A,E,I,R){const k=[];let b,h=[0,1,2,3,4];I!=-1?h=[I]:(p*A>5e5||C==1)&&(h=[0]),R&&(b={level:0});const L=Mr;for(var M=0;M<h.length;M++){for(let B=0;B<p;B++)m(E,g,B,A,C,h[M]);k.push(L.deflate(E,b))}let P,j=1e9;for(M=0;M<k.length;M++)k[M].length<j&&(P=M,j=k[M].length);return k[P]}function m(g,p,C,A,E,I){const R=C*A;let k=R+C;if(g[k]=I,k++,I==0)if(A<500)for(var b=0;b<A;b++)g[k+b]=p[R+b];else g.set(new Uint8Array(p.buffer,R,A),k);else if(I==1){for(b=0;b<E;b++)g[k+b]=p[R+b];for(b=E;b<A;b++)g[k+b]=p[R+b]-p[R+b-E]+256&255}else if(C==0){for(b=0;b<E;b++)g[k+b]=p[R+b];if(I==2)for(b=E;b<A;b++)g[k+b]=p[R+b];if(I==3)for(b=E;b<A;b++)g[k+b]=p[R+b]-(p[R+b-E]>>1)+256&255;if(I==4)for(b=E;b<A;b++)g[k+b]=p[R+b]-i(p[R+b-E],0,0)+256&255}else{if(I==2)for(b=0;b<A;b++)g[k+b]=p[R+b]+256-p[R+b-A]&255;if(I==3){for(b=0;b<E;b++)g[k+b]=p[R+b]+256-(p[R+b-A]>>1)&255;for(b=E;b<A;b++)g[k+b]=p[R+b]+256-(p[R+b-A]+p[R+b-E]>>1)&255}if(I==4){for(b=0;b<E;b++)g[k+b]=p[R+b]+256-i(0,p[R+b-A],0)&255;for(b=E;b<A;b++)g[k+b]=p[R+b]+256-i(p[R+b-E],p[R+b-A],p[R+b-E-A])&255}}}function x(g,p){const C=new Uint8Array(g),A=C.slice(0),E=new Uint32Array(A.buffer),I=S(A,p),R=I[0],k=I[1],b=C.length,h=new Uint8Array(b>>2);let L;if(C.length<2e7)for(var M=0;M<b;M+=4)L=y(R,P=C[M]*(1/255),j=C[M+1]*(1/255),B=C[M+2]*(1/255),H=C[M+3]*(1/255)),h[M>>2]=L.ind,E[M>>2]=L.est.rgba;else for(M=0;M<b;M+=4){var P=C[M]*.00392156862745098,j=C[M+1]*(1/255),B=C[M+2]*(1/255),H=C[M+3]*(1/255);for(L=R;L.left;)L=O(L.est,P,j,B,H)<=0?L.left:L.right;h[M>>2]=L.ind,E[M>>2]=L.est.rgba}return{abuf:A.buffer,inds:h,plte:k}}function S(g,p,C){C==null&&(C=1e-4);const A=new Uint32Array(g.buffer),E={i0:0,i1:g.length,bst:null,est:null,tdst:0,left:null,right:null};E.bst=N(g,E.i0,E.i1),E.est=w(E.bst);const I=[E];for(;I.length<p;){let k=0,b=0;for(var R=0;R<I.length;R++)I[R].est.L>k&&(k=I[R].est.L,b=R);if(k<C)break;const h=I[b],L=T(g,A,h.i0,h.i1,h.est.e,h.est.eMq255);if(h.i0>=L||h.i1<=L){h.est.L=0;continue}const M={i0:h.i0,i1:L,bst:null,est:null,tdst:0,left:null,right:null};M.bst=N(g,M.i0,M.i1),M.est=w(M.bst);const P={i0:L,i1:h.i1,bst:null,est:null,tdst:0,left:null,right:null};for(P.bst={R:[],m:[],N:h.bst.N-M.bst.N},R=0;R<16;R++)P.bst.R[R]=h.bst.R[R]-M.bst.R[R];for(R=0;R<4;R++)P.bst.m[R]=h.bst.m[R]-M.bst.m[R];P.est=w(P.bst),h.left=M,h.right=P,I[b]=M,I.push(P)}for(I.sort((k,b)=>b.bst.N-k.bst.N),R=0;R<I.length;R++)I[R].ind=R;return[E,I]}function y(g,p,C,A,E){if(g.left==null)return g.tdst=function(M,P,j,B,H){const z=P-M[0],_=j-M[1],$=B-M[2],Y=H-M[3];return z*z+_*_+$*$+Y*Y}(g.est.q,p,C,A,E),g;const I=O(g.est,p,C,A,E);let R=g.left,k=g.right;I>0&&(R=g.right,k=g.left);const b=y(R,p,C,A,E);if(b.tdst<=I*I)return b;const h=y(k,p,C,A,E);return h.tdst<b.tdst?h:b}function O(g,p,C,A,E){const{e:I}=g;return I[0]*p+I[1]*C+I[2]*A+I[3]*E-g.eMq}function T(g,p,C,A,E,I){for(A-=4;C<A;){for(;D(g,C,E)<=I;)C+=4;for(;D(g,A,E)>I;)A-=4;if(C>=A)break;const R=p[C>>2];p[C>>2]=p[A>>2],p[A>>2]=R,C+=4,A-=4}for(;D(g,C,E)>I;)C-=4;return C+4}function D(g,p,C){return g[p]*C[0]+g[p+1]*C[1]+g[p+2]*C[2]+g[p+3]*C[3]}function N(g,p,C){const A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],E=[0,0,0,0],I=C-p>>2;for(let R=p;R<C;R+=4){const k=g[R]*.00392156862745098,b=g[R+1]*(1/255),h=g[R+2]*(1/255),L=g[R+3]*(1/255);E[0]+=k,E[1]+=b,E[2]+=h,E[3]+=L,A[0]+=k*k,A[1]+=k*b,A[2]+=k*h,A[3]+=k*L,A[5]+=b*b,A[6]+=b*h,A[7]+=b*L,A[10]+=h*h,A[11]+=h*L,A[15]+=L*L}return A[4]=A[1],A[8]=A[2],A[9]=A[6],A[12]=A[3],A[13]=A[7],A[14]=A[11],{R:A,m:E,N:I}}function w(g){const{R:p}=g,{m:C}=g,{N:A}=g,E=C[0],I=C[1],R=C[2],k=C[3],b=A==0?0:1/A,h=[p[0]-E*E*b,p[1]-E*I*b,p[2]-E*R*b,p[3]-E*k*b,p[4]-I*E*b,p[5]-I*I*b,p[6]-I*R*b,p[7]-I*k*b,p[8]-R*E*b,p[9]-R*I*b,p[10]-R*R*b,p[11]-R*k*b,p[12]-k*E*b,p[13]-k*I*b,p[14]-k*R*b,p[15]-k*k*b],L=h,M=U;let P=[Math.random(),Math.random(),Math.random(),Math.random()],j=0,B=0;if(A!=0)for(let z=0;z<16&&(P=M.multVec(L,P),B=Math.sqrt(M.dot(P,P)),P=M.sml(1/B,P),!(z!=0&&Math.abs(B-j)<1e-9));z++)j=B;const H=[E*b,I*b,R*b,k*b];return{Cov:h,q:H,e:P,L:j,eMq255:M.dot(M.sml(255,H),P),eMq:M.dot(P,H),rgba:(Math.round(255*H[3])<<24|Math.round(255*H[2])<<16|Math.round(255*H[1])<<8|Math.round(255*H[0])<<0)>>>0}}var U={multVec:(g,p)=>[g[0]*p[0]+g[1]*p[1]+g[2]*p[2]+g[3]*p[3],g[4]*p[0]+g[5]*p[1]+g[6]*p[2]+g[7]*p[3],g[8]*p[0]+g[9]*p[1]+g[10]*p[2]+g[11]*p[3],g[12]*p[0]+g[13]*p[1]+g[14]*p[2]+g[15]*p[3]],dot:(g,p)=>g[0]*p[0]+g[1]*p[1]+g[2]*p[2]+g[3]*p[3],sml:(g,p)=>[g*p[0],g*p[1],g*p[2],g*p[3]]};Ne.encode=function(p,C,A,E,I,R,k){E==null&&(E=0),k==null&&(k=!1);const b=s(p,C,A,E,[!1,!1,!1,0,k,!1]);return v(b,-1),d(b,C,A,I,R)},Ne.encodeLL=function(p,C,A,E,I,R,k,b){const h={ctype:0+(E==1?0:2)+(I==0?0:4),depth:R,frames:[]},L=(E+I)*R,M=L*C;for(let P=0;P<p.length;P++)h.frames.push({rect:{x:0,y:0,width:C,height:A},img:new Uint8Array(p[P]),blend:0,dispose:1,bpp:Math.ceil(L/8),bpl:Math.ceil(M/8)});return v(h,0,!0),d(h,C,A,k,b)},Ne.encode.compress=s,Ne.encode.dither=l,Ne.quantize=x,Ne.quantize.getKDtree=S,Ne.quantize.getNearest=y})();const On={toArrayBuffer(e,r){const i=e.width,o=e.height,t=i<<2,n=e.getContext("2d").getImageData(0,0,i,o),u=new Uint32Array(n.data.buffer),l=(32*i+31)/32<<2,d=l*o,v=122+d,s=new ArrayBuffer(v),a=new DataView(s),c=1<<20;let f,m,x,S,y=c,O=0,T=0,D=0;function N(g){a.setUint16(T,g,!0),T+=2}function w(g){a.setUint32(T,g,!0),T+=4}function U(g){T+=g}N(19778),w(v),U(4),w(122),w(108),w(i),w(-o>>>0),N(1),N(32),w(3),w(d),w(2835),w(2835),U(8),w(16711680),w(65280),w(255),w(4278190080),w(1466527264),function g(){for(;O<o&&y>0;){for(S=122+O*l,f=0;f<t;)y--,m=u[D++],x=m>>>24,a.setUint32(S+f,m<<8|x),f+=4;O++}D<u.length?(y=c,setTimeout(g,On._dly)):r(s)}()},toBlob(e,r){this.toArrayBuffer(e,i=>{r(new Blob([i],{type:"image/bmp"}))})},_dly:9};var Se={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},Tr={[Se.CHROME]:16384,[Se.FIREFOX]:11180,[Se.DESKTOP_SAFARI]:16384,[Se.IE]:8192,[Se.IOS]:4096,[Se.ETC]:8192};const Jt=typeof window<"u",Fn=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Ct=Jt&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),Ur=(Jt||Fn)&&(Ct&&Ct.getOriginalSymbol(window,"File")||typeof File<"u"&&File),Nn=(Jt||Fn)&&(Ct&&Ct.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function en(e,r,i=Date.now()){return new Promise(o=>{const t=e.split(","),n=t[0].match(/:(.*?);/)[1],u=globalThis.atob(t[1]);let l=u.length;const d=new Uint8Array(l);for(;l--;)d[l]=u.charCodeAt(l);const v=new Blob([d],{type:n});v.name=r,v.lastModified=i,o(v)})}function _n(e){return new Promise((r,i)=>{const o=new Nn;o.onload=()=>r(o.result),o.onerror=t=>i(t),o.readAsDataURL(e)})}function Ln(e){return new Promise((r,i)=>{const o=new Image;o.onload=()=>r(o),o.onerror=t=>i(t),o.src=e})}function Ke(){if(Ke.cachedResult!==void 0)return Ke.cachedResult;let e=Se.ETC;const{userAgent:r}=navigator;return/Chrom(e|ium)/i.test(r)?e=Se.CHROME:/iP(ad|od|hone)/i.test(r)&&/WebKit/i.test(r)?e=Se.IOS:/Safari/i.test(r)?e=Se.DESKTOP_SAFARI:/Firefox/i.test(r)?e=Se.FIREFOX:(/MSIE/i.test(r)||document.documentMode)&&(e=Se.IE),Ke.cachedResult=e,Ke.cachedResult}function Pn(e,r){const i=Ke(),o=Tr[i];let t=e,n=r,u=t*n;const l=t>n?n/t:t/n;for(;u>o*o;){const d=(o+t)/2,v=(o+n)/2;d<v?(n=v,t=v*l):(n=d*l,t=d),u=t*n}return{width:t,height:n}}function Ut(e,r){let i,o;try{if(i=new OffscreenCanvas(e,r),o=i.getContext("2d"),o===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{i=document.createElement("canvas"),o=i.getContext("2d")}return i.width=e,i.height=r,[i,o]}function zn(e,r){const{width:i,height:o}=Pn(e.width,e.height),[t,n]=Ut(i,o);return r&&/jpe?g/.test(r)&&(n.fillStyle="white",n.fillRect(0,0,t.width,t.height)),n.drawImage(e,0,0,t.width,t.height),t}function wt(){return wt.cachedResult!==void 0||(wt.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),wt.cachedResult}function At(e,r={}){return new Promise(function(i,o){let t,n;var u=function(){try{return n=zn(t,r.fileType||e.type),i([t,n])}catch(d){return o(d)}},l=function(d){try{var v=function(s){try{throw s}catch(a){return o(a)}};try{let s;return _n(e).then(function(a){try{return s=a,Ln(s).then(function(c){try{return t=c,function(){try{return u()}catch(f){return o(f)}}()}catch(f){return v(f)}},v)}catch(c){return v(c)}},v)}catch(s){v(s)}}catch(s){return o(s)}};try{if(wt()||[Se.DESKTOP_SAFARI,Se.MOBILE_SAFARI].includes(Ke()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(e).then(function(d){try{return t=d,u()}catch{return l()}},l)}catch{l()}})}function Rt(e,r,i,o,t=1){return new Promise(function(n,u){let l;if(r==="image/png"){let v,s,a;return v=e.getContext("2d"),{data:s}=v.getImageData(0,0,e.width,e.height),a=Ne.encode([s.buffer],e.width,e.height,4096*t),l=new Blob([a],{type:r}),l.name=i,l.lastModified=o,d.call(this)}{let v=function(){return d.call(this)};if(r==="image/bmp")return new Promise(s=>On.toBlob(e,s)).then((function(s){try{return l=s,l.name=i,l.lastModified=o,v.call(this)}catch(a){return u(a)}}).bind(this),u);{let s=function(){return v.call(this)};if(typeof OffscreenCanvas=="function"&&e instanceof OffscreenCanvas)return e.convertToBlob({type:r,quality:t}).then((function(a){try{return l=a,l.name=i,l.lastModified=o,s.call(this)}catch(c){return u(c)}}).bind(this),u);{let a;return a=e.toDataURL(r,t),en(a,i,o).then((function(c){try{return l=c,s.call(this)}catch(f){return u(f)}}).bind(this),u)}}}function d(){return n(l)}})}function ze(e){e.width=0,e.height=0}function Ze(){return new Promise(function(e,r){let i,o,t,n;return Ze.cachedResult!==void 0?e(Ze.cachedResult):en("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(u){try{return i=u,At(i).then(function(l){try{return o=l[1],Rt(o,i.type,i.name,i.lastModified).then(function(d){try{return t=d,ze(o),At(t).then(function(v){try{return n=v[0],Ze.cachedResult=n.width===1&&n.height===2,e(Ze.cachedResult)}catch(s){return r(s)}},r)}catch(v){return r(v)}},r)}catch(d){return r(d)}},r)}catch(l){return r(l)}},r)})}function Bn(e){return new Promise((r,i)=>{const o=new Nn;o.onload=t=>{const n=new DataView(t.target.result);if(n.getUint16(0,!1)!=65496)return r(-2);const u=n.byteLength;let l=2;for(;l<u;){if(n.getUint16(l+2,!1)<=8)return r(-1);const d=n.getUint16(l,!1);if(l+=2,d==65505){if(n.getUint32(l+=2,!1)!=1165519206)return r(-1);const v=n.getUint16(l+=6,!1)==18761;l+=n.getUint32(l+4,v);const s=n.getUint16(l,v);l+=2;for(let a=0;a<s;a++)if(n.getUint16(l+12*a,v)==274)return r(n.getUint16(l+12*a+8,v))}else{if((65280&d)!=65280)break;l+=n.getUint16(l,!1)}}return r(-1)},o.onerror=t=>i(t),o.readAsArrayBuffer(e)})}function Hn(e,r){const{width:i}=e,{height:o}=e,{maxWidthOrHeight:t}=r;let n,u=e;return isFinite(t)&&(i>t||o>t)&&([u,n]=Ut(i,o),i>o?(u.width=t,u.height=o/i*t):(u.width=i/o*t,u.height=t),n.drawImage(e,0,0,u.width,u.height),ze(e)),u}function jn(e,r){const{width:i}=e,{height:o}=e,[t,n]=Ut(i,o);switch(r>4&&r<9?(t.width=o,t.height=i):(t.width=i,t.height=o),r){case 2:n.transform(-1,0,0,1,i,0);break;case 3:n.transform(-1,0,0,-1,i,o);break;case 4:n.transform(1,0,0,-1,0,o);break;case 5:n.transform(0,1,1,0,0,0);break;case 6:n.transform(0,1,-1,0,o,0);break;case 7:n.transform(0,-1,-1,0,o,i);break;case 8:n.transform(0,-1,1,0,0,i)}return n.drawImage(e,0,0,i,o),ze(e),t}function un(e,r,i=0){return new Promise(function(o,t){let n,u,l,d,v,s,a,c,f,m,x,S,y,O,T,D,N,w,U,g;function p(A=5){if(r.signal&&r.signal.aborted)throw r.signal.reason;n+=A,r.onProgress(Math.min(n,100))}function C(A){if(r.signal&&r.signal.aborted)throw r.signal.reason;n=Math.min(Math.max(A,n),100),r.onProgress(n)}return n=i,u=r.maxIteration||10,l=1024*r.maxSizeMB*1024,p(),At(e,r).then((function(A){try{return[,d]=A,p(),v=Hn(d,r),p(),new Promise(function(E,I){var R;if(!(R=r.exifOrientation))return Bn(e).then((function(b){try{return R=b,k.call(this)}catch(h){return I(h)}}).bind(this),I);function k(){return E(R)}return k.call(this)}).then((function(E){try{return s=E,p(),Ze().then((function(I){try{return a=I?v:jn(v,s),p(),c=r.initialQuality||1,f=r.fileType||e.type,Rt(a,f,e.name,e.lastModified,c).then((function(R){try{{let b=function(){if(u--&&(T>l||T>y)){let L,M;return L=g?.95*U.width:U.width,M=g?.95*U.height:U.height,[N,w]=Ut(L,M),w.drawImage(U,0,0,L,M),c*=f==="image/png"?.85:.95,Rt(N,f,e.name,e.lastModified,c).then(function(P){try{return D=P,ze(U),U=N,T=D.size,C(Math.min(99,Math.floor((O-T)/(O-l)*100))),b}catch(j){return t(j)}},t)}return[1]},h=function(){return ze(U),ze(N),ze(v),ze(a),ze(d),C(100),o(D)};if(m=R,p(),x=m.size>l,S=m.size>e.size,!x&&!S)return C(100),o(m);var k;return y=e.size,O=m.size,T=O,U=a,g=!r.alwaysKeepResolution&&x,(k=(function(L){for(;L;){if(L.then)return void L.then(k,t);try{if(L.pop){if(L.length)return L.pop()?h.call(this):L;L=b}else L=L.call(this)}catch(M){return t(M)}}}).bind(this))(b)}}catch(b){return t(b)}}).bind(this),t)}catch(R){return t(R)}}).bind(this),t)}catch(I){return t(I)}}).bind(this),t)}catch(E){return t(E)}}).bind(this),t)})}const kr=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Bt;function Or(e,r){return new Promise((i,o)=>{Bt||(Bt=function(u){const l=[];return l.push(u),URL.createObjectURL(new Blob(l))}(kr));const t=new Worker(Bt);t.addEventListener("message",function(u){if(r.signal&&r.signal.aborted)t.terminate();else if(u.data.progress===void 0){if(u.data.error)return o(new Error(u.data.error)),void t.terminate();i(u.data.file),t.terminate()}else r.onProgress(u.data.progress)}),t.addEventListener("error",o),r.signal&&r.signal.addEventListener("abort",()=>{o(r.signal.reason),t.terminate()}),t.postMessage({file:e,imageCompressionLibUrl:r.libURL,options:{...r,onProgress:void 0,signal:void 0}})})}function we(e,r){return new Promise(function(i,o){let t,n,u,l,d,v;if(t={...r},u=0,{onProgress:l}=t,t.maxSizeMB=t.maxSizeMB||Number.POSITIVE_INFINITY,d=typeof t.useWebWorker!="boolean"||t.useWebWorker,delete t.useWebWorker,t.onProgress=f=>{u=f,typeof l=="function"&&l(u)},!(e instanceof Blob||e instanceof Ur))return o(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(e.type))return o(new Error("The file given is not an image"));if(v=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!d||typeof Worker!="function"||v)return un(e,t).then((function(f){try{return n=f,c.call(this)}catch(m){return o(m)}}).bind(this),o);var s=(function(){try{return c.call(this)}catch(f){return o(f)}}).bind(this),a=function(f){try{return un(e,t).then(function(m){try{return n=m,s()}catch(x){return o(x)}},o)}catch(m){return o(m)}};try{return t.libURL=t.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",Or(e,t).then(function(f){try{return n=f,s()}catch{return a()}},a)}catch{a()}function c(){try{n.name=e.name,n.lastModified=e.lastModified}catch{}try{t.preserveExif&&e.type==="image/jpeg"&&(!t.fileType||t.fileType&&t.fileType===e.type)&&(n=kn(e,n))}catch{}return i(n)}})}we.getDataUrlFromFile=_n,we.getFilefromDataUrl=en,we.loadImage=Ln,we.drawImageInCanvas=zn,we.drawFileInCanvas=At,we.canvasToFile=Rt,we.getExifOrientation=Bn,we.handleMaxWidthOrHeight=Hn,we.followExifOrientation=jn,we.cleanupCanvasMemory=ze,we.isAutoOrientationInBrowser=Ze,we.approximateBelowMaximumCanvasSizeOfBrowser=Pn,we.copyExifWithoutOrientation=kn,we.getBrowserName=Ke,we.version="2.0.2";const Fr=async(e,r={})=>{const i={maxSizeMB:2,maxWidthOrHeight:1920,useWebWorker:!0,initialQuality:.8,...r};try{const o=await we(e,i);return console.log("Compression effectue:"),console.log("- Taille originale:",(e.size/1024/1024).toFixed(2),"MB"),console.log("- Taille compresse:",(o.size/1024/1024).toFixed(2),"MB"),console.log("- Rduction:",((e.size-o.size)/e.size*100).toFixed(1),"%"),o}catch(o){throw console.error("Erreur de compression:",o),o}},Nr=(e,r=2)=>e.size>r*1024*1024,yi=e=>{const[r,i]=F.useState(!1);return{uploadAsset:async(n,u)=>{try{if(i(!0),!n.type.match(/image\/(png|jpg|jpeg)/))return je.error("Format non support",{description:"Seuls les fichiers PNG et JPG sont accepts"}),null;let l=n;if(Nr(n,2)){je.info(" Compression de l'image en cours...",{description:"Patientez quelques secondes"});try{l=await Fr(n,{maxSizeMB:2,maxWidthOrHeight:1920});const f=(n.size-l.size)/n.size*100;je.success(` Image compresse (-${f.toFixed(0)}%)`,{description:`${(l.size/1024/1024).toFixed(2)} MB`})}catch(f){console.error("Compression error:",f),je.warning("Compression impossible",{description:"Tentative d'upload sans compression"})}}if(l.size>5*1024*1024)return je.error("Fichier trop volumineux",{description:"La taille maximale est de 5MB mme aprs compression"}),null;const d=l.name.split(".").pop(),v=`${e}/${Date.now()}-${Math.random().toString(36).substring(7)}.${d}`,{data:s,error:a}=await zt.storage.from("restaurant-assets").upload(v,l,{cacheControl:"3600",upsert:!1});if(a)throw a;const{data:{publicUrl:c}}=zt.storage.from("restaurant-assets").getPublicUrl(s.path);return je.success("Image uploade avec succs"),{url:c,filename:n.name}}catch(l){return je.error("Erreur lors de l'upload",{description:l.message}),null}finally{i(!1)}},deleteAsset:async n=>{try{const u=n.split("/restaurant-assets/")[1],{error:l}=await zt.storage.from("restaurant-assets").remove([u]);if(l)throw l;je.success("Image supprime")}catch(u){je.error("Erreur lors de la suppression",{description:u.message})}},uploading:r}};function _r(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return F.useMemo(()=>o=>{r.forEach(t=>t(o))},r)}const kt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function et(e){const r=Object.prototype.toString.call(e);return r==="[object Window]"||r==="[object global]"}function tn(e){return"nodeType"in e}function De(e){var r,i;return e?et(e)?e:tn(e)&&(r=(i=e.ownerDocument)==null?void 0:i.defaultView)!=null?r:window:window}function nn(e){const{Document:r}=De(e);return e instanceof r}function ht(e){return et(e)?!1:e instanceof De(e).HTMLElement}function $n(e){return e instanceof De(e).SVGElement}function tt(e){return e?et(e)?e.document:tn(e)?nn(e)?e:ht(e)||$n(e)?e.ownerDocument:document:document:document}const Be=kt?F.useLayoutEffect:F.useEffect;function rn(e){const r=F.useRef(e);return Be(()=>{r.current=e}),F.useCallback(function(){for(var i=arguments.length,o=new Array(i),t=0;t<i;t++)o[t]=arguments[t];return r.current==null?void 0:r.current(...o)},[])}function Lr(){const e=F.useRef(null),r=F.useCallback((o,t)=>{e.current=setInterval(o,t)},[]),i=F.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[r,i]}function ut(e,r){r===void 0&&(r=[e]);const i=F.useRef(e);return Be(()=>{i.current!==e&&(i.current=e)},r),i}function gt(e,r){const i=F.useRef();return F.useMemo(()=>{const o=e(i.current);return i.current=o,o},[...r])}function Et(e){const r=rn(e),i=F.useRef(null),o=F.useCallback(t=>{t!==i.current&&(r==null||r(t,i.current)),i.current=t},[]);return[i,o]}function Xt(e){const r=F.useRef();return F.useEffect(()=>{r.current=e},[e]),r.current}let Ht={};function pt(e,r){return F.useMemo(()=>{if(r)return r;const i=Ht[e]==null?0:Ht[e]+1;return Ht[e]=i,e+"-"+i},[e,r])}function Wn(e){return function(r){for(var i=arguments.length,o=new Array(i>1?i-1:0),t=1;t<i;t++)o[t-1]=arguments[t];return o.reduce((n,u)=>{const l=Object.entries(u);for(const[d,v]of l){const s=n[d];s!=null&&(n[d]=s+e*v)}return n},{...r})}}const Je=Wn(1),ft=Wn(-1);function Pr(e){return"clientX"in e&&"clientY"in e}function on(e){if(!e)return!1;const{KeyboardEvent:r}=De(e.target);return r&&e instanceof r}function zr(e){if(!e)return!1;const{TouchEvent:r}=De(e.target);return r&&e instanceof r}function Qt(e){if(zr(e)){if(e.touches&&e.touches.length){const{clientX:r,clientY:i}=e.touches[0];return{x:r,y:i}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:r,clientY:i}=e.changedTouches[0];return{x:r,y:i}}}return Pr(e)?{x:e.clientX,y:e.clientY}:null}const St=Object.freeze({Translate:{toString(e){if(!e)return;const{x:r,y:i}=e;return"translate3d("+(r?Math.round(r):0)+"px, "+(i?Math.round(i):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:r,scaleY:i}=e;return"scaleX("+r+") scaleY("+i+")"}},Transform:{toString(e){if(e)return[St.Translate.toString(e),St.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:r,duration:i,easing:o}=e;return r+" "+i+"ms "+o}}}),fn="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Br(e){return e.matches(fn)?e:e.querySelector(fn)}const Hr={display:"none"};function jr(e){let{id:r,value:i}=e;return Ee.createElement("div",{id:r,style:Hr},i)}function $r(e){let{id:r,announcement:i,ariaLiveType:o="assertive"}=e;const t={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Ee.createElement("div",{id:r,style:t,role:"status","aria-live":o,"aria-atomic":!0},i)}function Wr(){const[e,r]=F.useState("");return{announce:F.useCallback(o=>{o!=null&&r(o)},[]),announcement:e}}const Xn=F.createContext(null);function Xr(e){const r=F.useContext(Xn);F.useEffect(()=>{if(!r)throw new Error("useDndMonitor must be used within a children of <DndContext>");return r(e)},[e,r])}function Qr(){const[e]=F.useState(()=>new Set),r=F.useCallback(o=>(e.add(o),()=>e.delete(o)),[e]);return[F.useCallback(o=>{let{type:t,event:n}=o;e.forEach(u=>{var l;return(l=u[t])==null?void 0:l.call(u,n)})},[e]),r]}const qr={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Kr={onDragStart(e){let{active:r}=e;return"Picked up draggable item "+r.id+"."},onDragOver(e){let{active:r,over:i}=e;return i?"Draggable item "+r.id+" was moved over droppable area "+i.id+".":"Draggable item "+r.id+" is no longer over a droppable area."},onDragEnd(e){let{active:r,over:i}=e;return i?"Draggable item "+r.id+" was dropped over droppable area "+i.id:"Draggable item "+r.id+" was dropped."},onDragCancel(e){let{active:r}=e;return"Dragging was cancelled. Draggable item "+r.id+" was dropped."}};function Yr(e){let{announcements:r=Kr,container:i,hiddenTextDescribedById:o,screenReaderInstructions:t=qr}=e;const{announce:n,announcement:u}=Wr(),l=pt("DndLiveRegion"),[d,v]=F.useState(!1);if(F.useEffect(()=>{v(!0)},[]),Xr(F.useMemo(()=>({onDragStart(a){let{active:c}=a;n(r.onDragStart({active:c}))},onDragMove(a){let{active:c,over:f}=a;r.onDragMove&&n(r.onDragMove({active:c,over:f}))},onDragOver(a){let{active:c,over:f}=a;n(r.onDragOver({active:c,over:f}))},onDragEnd(a){let{active:c,over:f}=a;n(r.onDragEnd({active:c,over:f}))},onDragCancel(a){let{active:c,over:f}=a;n(r.onDragCancel({active:c,over:f}))}}),[n,r])),!d)return null;const s=Ee.createElement(Ee.Fragment,null,Ee.createElement(jr,{id:o,value:t.draggable}),Ee.createElement($r,{id:l,announcement:u}));return i?st.createPortal(s,i):s}var he;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(he||(he={}));function Dt(){}function xi(e,r){return F.useMemo(()=>({sensor:e,options:r??{}}),[e,r])}function Ci(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return F.useMemo(()=>[...r].filter(o=>o!=null),[...r])}const _e=Object.freeze({x:0,y:0});function Qn(e,r){return Math.sqrt(Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2))}function qn(e,r){let{data:{value:i}}=e,{data:{value:o}}=r;return i-o}function Gr(e,r){let{data:{value:i}}=e,{data:{value:o}}=r;return o-i}function dn(e){let{left:r,top:i,height:o,width:t}=e;return[{x:r,y:i},{x:r+t,y:i},{x:r,y:i+o},{x:r+t,y:i+o}]}function Kn(e,r){if(!e||e.length===0)return null;const[i]=e;return i[r]}function hn(e,r,i){return r===void 0&&(r=e.left),i===void 0&&(i=e.top),{x:r+e.width*.5,y:i+e.height*.5}}const Ai=e=>{let{collisionRect:r,droppableRects:i,droppableContainers:o}=e;const t=hn(r,r.left,r.top),n=[];for(const u of o){const{id:l}=u,d=i.get(l);if(d){const v=Qn(hn(d),t);n.push({id:l,data:{droppableContainer:u,value:v}})}}return n.sort(qn)},Vr=e=>{let{collisionRect:r,droppableRects:i,droppableContainers:o}=e;const t=dn(r),n=[];for(const u of o){const{id:l}=u,d=i.get(l);if(d){const v=dn(d),s=t.reduce((c,f,m)=>c+Qn(v[m],f),0),a=Number((s/4).toFixed(4));n.push({id:l,data:{droppableContainer:u,value:a}})}}return n.sort(qn)};function Zr(e,r){const i=Math.max(r.top,e.top),o=Math.max(r.left,e.left),t=Math.min(r.left+r.width,e.left+e.width),n=Math.min(r.top+r.height,e.top+e.height),u=t-o,l=n-i;if(o<t&&i<n){const d=r.width*r.height,v=e.width*e.height,s=u*l,a=s/(d+v-s);return Number(a.toFixed(4))}return 0}const Jr=e=>{let{collisionRect:r,droppableRects:i,droppableContainers:o}=e;const t=[];for(const n of o){const{id:u}=n,l=i.get(u);if(l){const d=Zr(l,r);d>0&&t.push({id:u,data:{droppableContainer:n,value:d}})}}return t.sort(Gr)};function eo(e,r,i){return{...e,scaleX:r&&i?r.width/i.width:1,scaleY:r&&i?r.height/i.height:1}}function Yn(e,r){return e&&r?{x:e.left-r.left,y:e.top-r.top}:_e}function to(e){return function(i){for(var o=arguments.length,t=new Array(o>1?o-1:0),n=1;n<o;n++)t[n-1]=arguments[n];return t.reduce((u,l)=>({...u,top:u.top+e*l.y,bottom:u.bottom+e*l.y,left:u.left+e*l.x,right:u.right+e*l.x}),{...i})}}const no=to(1);function ro(e){if(e.startsWith("matrix3d(")){const r=e.slice(9,-1).split(/, /);return{x:+r[12],y:+r[13],scaleX:+r[0],scaleY:+r[5]}}else if(e.startsWith("matrix(")){const r=e.slice(7,-1).split(/, /);return{x:+r[4],y:+r[5],scaleX:+r[0],scaleY:+r[3]}}return null}function oo(e,r,i){const o=ro(r);if(!o)return e;const{scaleX:t,scaleY:n,x:u,y:l}=o,d=e.left-u-(1-t)*parseFloat(i),v=e.top-l-(1-n)*parseFloat(i.slice(i.indexOf(" ")+1)),s=t?e.width/t:e.width,a=n?e.height/n:e.height;return{width:s,height:a,top:v,right:d+s,bottom:v+a,left:d}}const io={ignoreTransform:!1};function nt(e,r){r===void 0&&(r=io);let i=e.getBoundingClientRect();if(r.ignoreTransform){const{transform:v,transformOrigin:s}=De(e).getComputedStyle(e);v&&(i=oo(i,v,s))}const{top:o,left:t,width:n,height:u,bottom:l,right:d}=i;return{top:o,left:t,width:n,height:u,bottom:l,right:d}}function gn(e){return nt(e,{ignoreTransform:!0})}function so(e){const r=e.innerWidth,i=e.innerHeight;return{top:0,left:0,right:r,bottom:i,width:r,height:i}}function ao(e,r){return r===void 0&&(r=De(e).getComputedStyle(e)),r.position==="fixed"}function co(e,r){r===void 0&&(r=De(e).getComputedStyle(e));const i=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(t=>{const n=r[t];return typeof n=="string"?i.test(n):!1})}function Ot(e,r){const i=[];function o(t){if(r!=null&&i.length>=r||!t)return i;if(nn(t)&&t.scrollingElement!=null&&!i.includes(t.scrollingElement))return i.push(t.scrollingElement),i;if(!ht(t)||$n(t)||i.includes(t))return i;const n=De(e).getComputedStyle(t);return t!==e&&co(t,n)&&i.push(t),ao(t,n)?i:o(t.parentNode)}return e?o(e):i}function Gn(e){const[r]=Ot(e,1);return r??null}function jt(e){return!kt||!e?null:et(e)?e:tn(e)?nn(e)||e===tt(e).scrollingElement?window:ht(e)?e:null:null}function Vn(e){return et(e)?e.scrollX:e.scrollLeft}function Zn(e){return et(e)?e.scrollY:e.scrollTop}function qt(e){return{x:Vn(e),y:Zn(e)}}var be;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(be||(be={}));function Jn(e){return!kt||!e?!1:e===document.scrollingElement}function er(e){const r={x:0,y:0},i=Jn(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},o={x:e.scrollWidth-i.width,y:e.scrollHeight-i.height},t=e.scrollTop<=r.y,n=e.scrollLeft<=r.x,u=e.scrollTop>=o.y,l=e.scrollLeft>=o.x;return{isTop:t,isLeft:n,isBottom:u,isRight:l,maxScroll:o,minScroll:r}}const lo={x:.2,y:.2};function uo(e,r,i,o,t){let{top:n,left:u,right:l,bottom:d}=i;o===void 0&&(o=10),t===void 0&&(t=lo);const{isTop:v,isBottom:s,isLeft:a,isRight:c}=er(e),f={x:0,y:0},m={x:0,y:0},x={height:r.height*t.y,width:r.width*t.x};return!v&&n<=r.top+x.height?(f.y=be.Backward,m.y=o*Math.abs((r.top+x.height-n)/x.height)):!s&&d>=r.bottom-x.height&&(f.y=be.Forward,m.y=o*Math.abs((r.bottom-x.height-d)/x.height)),!c&&l>=r.right-x.width?(f.x=be.Forward,m.x=o*Math.abs((r.right-x.width-l)/x.width)):!a&&u<=r.left+x.width&&(f.x=be.Backward,m.x=o*Math.abs((r.left+x.width-u)/x.width)),{direction:f,speed:m}}function fo(e){if(e===document.scrollingElement){const{innerWidth:n,innerHeight:u}=window;return{top:0,left:0,right:n,bottom:u,width:n,height:u}}const{top:r,left:i,right:o,bottom:t}=e.getBoundingClientRect();return{top:r,left:i,right:o,bottom:t,width:e.clientWidth,height:e.clientHeight}}function tr(e){return e.reduce((r,i)=>Je(r,qt(i)),_e)}function ho(e){return e.reduce((r,i)=>r+Vn(i),0)}function go(e){return e.reduce((r,i)=>r+Zn(i),0)}function po(e,r){if(r===void 0&&(r=nt),!e)return;const{top:i,left:o,bottom:t,right:n}=r(e);Gn(e)&&(t<=0||n<=0||i>=window.innerHeight||o>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const vo=[["x",["left","right"],ho],["y",["top","bottom"],go]];class sn{constructor(r,i){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const o=Ot(i),t=tr(o);this.rect={...r},this.width=r.width,this.height=r.height;for(const[n,u,l]of vo)for(const d of u)Object.defineProperty(this,d,{get:()=>{const v=l(o),s=t[n]-v;return this.rect[d]+s},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class at{constructor(r){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(i=>{var o;return(o=this.target)==null?void 0:o.removeEventListener(...i)})},this.target=r}add(r,i,o){var t;(t=this.target)==null||t.addEventListener(r,i,o),this.listeners.push([r,i,o])}}function bo(e){const{EventTarget:r}=De(e);return e instanceof r?e:tt(e)}function $t(e,r){const i=Math.abs(e.x),o=Math.abs(e.y);return typeof r=="number"?Math.sqrt(i**2+o**2)>r:"x"in r&&"y"in r?i>r.x&&o>r.y:"x"in r?i>r.x:"y"in r?o>r.y:!1}var Ue;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Ue||(Ue={}));function pn(e){e.preventDefault()}function mo(e){e.stopPropagation()}var q;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(q||(q={}));const nr={start:[q.Space,q.Enter],cancel:[q.Esc],end:[q.Space,q.Enter,q.Tab]},wo=(e,r)=>{let{currentCoordinates:i}=r;switch(e.code){case q.Right:return{...i,x:i.x+25};case q.Left:return{...i,x:i.x-25};case q.Down:return{...i,y:i.y+25};case q.Up:return{...i,y:i.y-25}}};class rr{constructor(r){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=r;const{event:{target:i}}=r;this.props=r,this.listeners=new at(tt(i)),this.windowListeners=new at(De(i)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ue.Resize,this.handleCancel),this.windowListeners.add(Ue.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ue.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:r,onStart:i}=this.props,o=r.node.current;o&&po(o),i(_e)}handleKeyDown(r){if(on(r)){const{active:i,context:o,options:t}=this.props,{keyboardCodes:n=nr,coordinateGetter:u=wo,scrollBehavior:l="smooth"}=t,{code:d}=r;if(n.end.includes(d)){this.handleEnd(r);return}if(n.cancel.includes(d)){this.handleCancel(r);return}const{collisionRect:v}=o.current,s=v?{x:v.left,y:v.top}:_e;this.referenceCoordinates||(this.referenceCoordinates=s);const a=u(r,{active:i,context:o.current,currentCoordinates:s});if(a){const c=ft(a,s),f={x:0,y:0},{scrollableAncestors:m}=o.current;for(const x of m){const S=r.code,{isTop:y,isRight:O,isLeft:T,isBottom:D,maxScroll:N,minScroll:w}=er(x),U=fo(x),g={x:Math.min(S===q.Right?U.right-U.width/2:U.right,Math.max(S===q.Right?U.left:U.left+U.width/2,a.x)),y:Math.min(S===q.Down?U.bottom-U.height/2:U.bottom,Math.max(S===q.Down?U.top:U.top+U.height/2,a.y))},p=S===q.Right&&!O||S===q.Left&&!T,C=S===q.Down&&!D||S===q.Up&&!y;if(p&&g.x!==a.x){const A=x.scrollLeft+c.x,E=S===q.Right&&A<=N.x||S===q.Left&&A>=w.x;if(E&&!c.y){x.scrollTo({left:A,behavior:l});return}E?f.x=x.scrollLeft-A:f.x=S===q.Right?x.scrollLeft-N.x:x.scrollLeft-w.x,f.x&&x.scrollBy({left:-f.x,behavior:l});break}else if(C&&g.y!==a.y){const A=x.scrollTop+c.y,E=S===q.Down&&A<=N.y||S===q.Up&&A>=w.y;if(E&&!c.x){x.scrollTo({top:A,behavior:l});return}E?f.y=x.scrollTop-A:f.y=S===q.Down?x.scrollTop-N.y:x.scrollTop-w.y,f.y&&x.scrollBy({top:-f.y,behavior:l});break}}this.handleMove(r,Je(ft(a,this.referenceCoordinates),f))}}}handleMove(r,i){const{onMove:o}=this.props;r.preventDefault(),o(i)}handleEnd(r){const{onEnd:i}=this.props;r.preventDefault(),this.detach(),i()}handleCancel(r){const{onCancel:i}=this.props;r.preventDefault(),this.detach(),i()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}rr.activators=[{eventName:"onKeyDown",handler:(e,r,i)=>{let{keyboardCodes:o=nr,onActivation:t}=r,{active:n}=i;const{code:u}=e.nativeEvent;if(o.start.includes(u)){const l=n.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),t==null||t({event:e.nativeEvent}),!0)}return!1}}];function vn(e){return!!(e&&"distance"in e)}function bn(e){return!!(e&&"delay"in e)}class an{constructor(r,i,o){var t;o===void 0&&(o=bo(r.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=r,this.events=i;const{event:n}=r,{target:u}=n;this.props=r,this.events=i,this.document=tt(u),this.documentListeners=new at(this.document),this.listeners=new at(o),this.windowListeners=new at(De(u)),this.initialCoordinates=(t=Qt(n))!=null?t:_e,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:r,props:{options:{activationConstraint:i,bypassActivationConstraint:o}}}=this;if(this.listeners.add(r.move.name,this.handleMove,{passive:!1}),this.listeners.add(r.end.name,this.handleEnd),r.cancel&&this.listeners.add(r.cancel.name,this.handleCancel),this.windowListeners.add(Ue.Resize,this.handleCancel),this.windowListeners.add(Ue.DragStart,pn),this.windowListeners.add(Ue.VisibilityChange,this.handleCancel),this.windowListeners.add(Ue.ContextMenu,pn),this.documentListeners.add(Ue.Keydown,this.handleKeydown),i){if(o!=null&&o({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(bn(i)){this.timeoutId=setTimeout(this.handleStart,i.delay),this.handlePending(i);return}if(vn(i)){this.handlePending(i);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(r,i){const{active:o,onPending:t}=this.props;t(o,r,this.initialCoordinates,i)}handleStart(){const{initialCoordinates:r}=this,{onStart:i}=this.props;r&&(this.activated=!0,this.documentListeners.add(Ue.Click,mo,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ue.SelectionChange,this.removeTextSelection),i(r))}handleMove(r){var i;const{activated:o,initialCoordinates:t,props:n}=this,{onMove:u,options:{activationConstraint:l}}=n;if(!t)return;const d=(i=Qt(r))!=null?i:_e,v=ft(t,d);if(!o&&l){if(vn(l)){if(l.tolerance!=null&&$t(v,l.tolerance))return this.handleCancel();if($t(v,l.distance))return this.handleStart()}if(bn(l)&&$t(v,l.tolerance))return this.handleCancel();this.handlePending(l,v);return}r.cancelable&&r.preventDefault(),u(d)}handleEnd(){const{onAbort:r,onEnd:i}=this.props;this.detach(),this.activated||r(this.props.active),i()}handleCancel(){const{onAbort:r,onCancel:i}=this.props;this.detach(),this.activated||r(this.props.active),i()}handleKeydown(r){r.code===q.Esc&&this.handleCancel()}removeTextSelection(){var r;(r=this.document.getSelection())==null||r.removeAllRanges()}}const yo={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class or extends an{constructor(r){const{event:i}=r,o=tt(i.target);super(r,yo,o)}}or.activators=[{eventName:"onPointerDown",handler:(e,r)=>{let{nativeEvent:i}=e,{onActivation:o}=r;return!i.isPrimary||i.button!==0?!1:(o==null||o({event:i}),!0)}}];const xo={move:{name:"mousemove"},end:{name:"mouseup"}};var Kt;(function(e){e[e.RightClick=2]="RightClick"})(Kt||(Kt={}));class Co extends an{constructor(r){super(r,xo,tt(r.event.target))}}Co.activators=[{eventName:"onMouseDown",handler:(e,r)=>{let{nativeEvent:i}=e,{onActivation:o}=r;return i.button===Kt.RightClick?!1:(o==null||o({event:i}),!0)}}];const Wt={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Ao extends an{constructor(r){super(r,Wt)}static setup(){return window.addEventListener(Wt.move.name,r,{capture:!1,passive:!1}),function(){window.removeEventListener(Wt.move.name,r)};function r(){}}}Ao.activators=[{eventName:"onTouchStart",handler:(e,r)=>{let{nativeEvent:i}=e,{onActivation:o}=r;const{touches:t}=i;return t.length>1?!1:(o==null||o({event:i}),!0)}}];var ct;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(ct||(ct={}));var It;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(It||(It={}));function Ro(e){let{acceleration:r,activator:i=ct.Pointer,canScroll:o,draggingRect:t,enabled:n,interval:u=5,order:l=It.TreeOrder,pointerCoordinates:d,scrollableAncestors:v,scrollableAncestorRects:s,delta:a,threshold:c}=e;const f=So({delta:a,disabled:!n}),[m,x]=Lr(),S=F.useRef({x:0,y:0}),y=F.useRef({x:0,y:0}),O=F.useMemo(()=>{switch(i){case ct.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case ct.DraggableRect:return t}},[i,t,d]),T=F.useRef(null),D=F.useCallback(()=>{const w=T.current;if(!w)return;const U=S.current.x*y.current.x,g=S.current.y*y.current.y;w.scrollBy(U,g)},[]),N=F.useMemo(()=>l===It.TreeOrder?[...v].reverse():v,[l,v]);F.useEffect(()=>{if(!n||!v.length||!O){x();return}for(const w of N){if((o==null?void 0:o(w))===!1)continue;const U=v.indexOf(w),g=s[U];if(!g)continue;const{direction:p,speed:C}=uo(w,g,O,r,c);for(const A of["x","y"])f[A][p[A]]||(C[A]=0,p[A]=0);if(C.x>0||C.y>0){x(),T.current=w,m(D,u),S.current=C,y.current=p;return}}S.current={x:0,y:0},y.current={x:0,y:0},x()},[r,D,o,x,n,u,JSON.stringify(O),JSON.stringify(f),m,v,N,s,JSON.stringify(c)])}const Eo={x:{[be.Backward]:!1,[be.Forward]:!1},y:{[be.Backward]:!1,[be.Forward]:!1}};function So(e){let{delta:r,disabled:i}=e;const o=Xt(r);return gt(t=>{if(i||!o||!t)return Eo;const n={x:Math.sign(r.x-o.x),y:Math.sign(r.y-o.y)};return{x:{[be.Backward]:t.x[be.Backward]||n.x===-1,[be.Forward]:t.x[be.Forward]||n.x===1},y:{[be.Backward]:t.y[be.Backward]||n.y===-1,[be.Forward]:t.y[be.Forward]||n.y===1}}},[i,r,o])}function Do(e,r){const i=r!=null?e.get(r):void 0,o=i?i.node.current:null;return gt(t=>{var n;return r==null?null:(n=o??t)!=null?n:null},[o,r])}function Io(e,r){return F.useMemo(()=>e.reduce((i,o)=>{const{sensor:t}=o,n=t.activators.map(u=>({eventName:u.eventName,handler:r(u.handler,o)}));return[...i,...n]},[]),[e,r])}var dt;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(dt||(dt={}));var Yt;(function(e){e.Optimized="optimized"})(Yt||(Yt={}));const mn=new Map;function Mo(e,r){let{dragging:i,dependencies:o,config:t}=r;const[n,u]=F.useState(null),{frequency:l,measure:d,strategy:v}=t,s=F.useRef(e),a=S(),c=ut(a),f=F.useCallback(function(y){y===void 0&&(y=[]),!c.current&&u(O=>O===null?y:O.concat(y.filter(T=>!O.includes(T))))},[c]),m=F.useRef(null),x=gt(y=>{if(a&&!i)return mn;if(!y||y===mn||s.current!==e||n!=null){const O=new Map;for(let T of e){if(!T)continue;if(n&&n.length>0&&!n.includes(T.id)&&T.rect.current){O.set(T.id,T.rect.current);continue}const D=T.node.current,N=D?new sn(d(D),D):null;T.rect.current=N,N&&O.set(T.id,N)}return O}return y},[e,n,i,a,d]);return F.useEffect(()=>{s.current=e},[e]),F.useEffect(()=>{a||f()},[i,a]),F.useEffect(()=>{n&&n.length>0&&u(null)},[JSON.stringify(n)]),F.useEffect(()=>{a||typeof l!="number"||m.current!==null||(m.current=setTimeout(()=>{f(),m.current=null},l))},[l,a,f,...o]),{droppableRects:x,measureDroppableContainers:f,measuringScheduled:n!=null};function S(){switch(v){case dt.Always:return!1;case dt.BeforeDragging:return i;default:return!i}}}function ir(e,r){return gt(i=>e?i||(typeof r=="function"?r(e):e):null,[r,e])}function To(e,r){return ir(e,r)}function Uo(e){let{callback:r,disabled:i}=e;const o=rn(r),t=F.useMemo(()=>{if(i||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:n}=window;return new n(o)},[o,i]);return F.useEffect(()=>()=>t==null?void 0:t.disconnect(),[t]),t}function Ft(e){let{callback:r,disabled:i}=e;const o=rn(r),t=F.useMemo(()=>{if(i||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:n}=window;return new n(o)},[i]);return F.useEffect(()=>()=>t==null?void 0:t.disconnect(),[t]),t}function ko(e){return new sn(nt(e),e)}function wn(e,r,i){r===void 0&&(r=ko);const[o,t]=F.useState(null);function n(){t(d=>{if(!e)return null;if(e.isConnected===!1){var v;return(v=d??i)!=null?v:null}const s=r(e);return JSON.stringify(d)===JSON.stringify(s)?d:s})}const u=Uo({callback(d){if(e)for(const v of d){const{type:s,target:a}=v;if(s==="childList"&&a instanceof HTMLElement&&a.contains(e)){n();break}}}}),l=Ft({callback:n});return Be(()=>{n(),e?(l==null||l.observe(e),u==null||u.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),u==null||u.disconnect())},[e]),o}function Oo(e){const r=ir(e);return Yn(e,r)}const yn=[];function Fo(e){const r=F.useRef(e),i=gt(o=>e?o&&o!==yn&&e&&r.current&&e.parentNode===r.current.parentNode?o:Ot(e):yn,[e]);return F.useEffect(()=>{r.current=e},[e]),i}function No(e){const[r,i]=F.useState(null),o=F.useRef(e),t=F.useCallback(n=>{const u=jt(n.target);u&&i(l=>l?(l.set(u,qt(u)),new Map(l)):null)},[]);return F.useEffect(()=>{const n=o.current;if(e!==n){u(n);const l=e.map(d=>{const v=jt(d);return v?(v.addEventListener("scroll",t,{passive:!0}),[v,qt(v)]):null}).filter(d=>d!=null);i(l.length?new Map(l):null),o.current=e}return()=>{u(e),u(n)};function u(l){l.forEach(d=>{const v=jt(d);v==null||v.removeEventListener("scroll",t)})}},[t,e]),F.useMemo(()=>e.length?r?Array.from(r.values()).reduce((n,u)=>Je(n,u),_e):tr(e):_e,[e,r])}function xn(e,r){r===void 0&&(r=[]);const i=F.useRef(null);return F.useEffect(()=>{i.current=null},r),F.useEffect(()=>{const o=e!==_e;o&&!i.current&&(i.current=e),!o&&i.current&&(i.current=null)},[e]),i.current?ft(e,i.current):_e}function _o(e){F.useEffect(()=>{if(!kt)return;const r=e.map(i=>{let{sensor:o}=i;return o.setup==null?void 0:o.setup()});return()=>{for(const i of r)i==null||i()}},e.map(r=>{let{sensor:i}=r;return i}))}function Lo(e,r){return F.useMemo(()=>e.reduce((i,o)=>{let{eventName:t,handler:n}=o;return i[t]=u=>{n(u,r)},i},{}),[e,r])}function sr(e){return F.useMemo(()=>e?so(e):null,[e])}const Cn=[];function Po(e,r){r===void 0&&(r=nt);const[i]=e,o=sr(i?De(i):null),[t,n]=F.useState(Cn);function u(){n(()=>e.length?e.map(d=>Jn(d)?o:new sn(r(d),d)):Cn)}const l=Ft({callback:u});return Be(()=>{l==null||l.disconnect(),u(),e.forEach(d=>l==null?void 0:l.observe(d))},[e]),t}function zo(e){if(!e)return null;if(e.children.length>1)return e;const r=e.children[0];return ht(r)?r:e}function Bo(e){let{measure:r}=e;const[i,o]=F.useState(null),t=F.useCallback(v=>{for(const{target:s}of v)if(ht(s)){o(a=>{const c=r(s);return a?{...a,width:c.width,height:c.height}:c});break}},[r]),n=Ft({callback:t}),u=F.useCallback(v=>{const s=zo(v);n==null||n.disconnect(),s&&(n==null||n.observe(s)),o(s?r(s):null)},[r,n]),[l,d]=Et(u);return F.useMemo(()=>({nodeRef:l,rect:i,setRef:d}),[i,l,d])}const Ho=[{sensor:or,options:{}},{sensor:rr,options:{}}],jo={current:{}},yt={draggable:{measure:gn},droppable:{measure:gn,strategy:dt.WhileDragging,frequency:Yt.Optimized},dragOverlay:{measure:nt}};class lt extends Map{get(r){var i;return r!=null&&(i=super.get(r))!=null?i:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(r=>{let{disabled:i}=r;return!i})}getNodeFor(r){var i,o;return(i=(o=this.get(r))==null?void 0:o.node.current)!=null?i:void 0}}const $o={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new lt,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Dt},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:yt,measureDroppableContainers:Dt,windowRect:null,measuringScheduled:!1},Wo={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Dt,draggableNodes:new Map,over:null,measureDroppableContainers:Dt},Nt=F.createContext(Wo),ar=F.createContext($o);function Xo(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new lt}}}function Qo(e,r){switch(r.type){case he.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:r.initialCoordinates,active:r.active}};case he.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:r.coordinates.x-e.draggable.initialCoordinates.x,y:r.coordinates.y-e.draggable.initialCoordinates.y}}};case he.DragEnd:case he.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case he.RegisterDroppable:{const{element:i}=r,{id:o}=i,t=new lt(e.droppable.containers);return t.set(o,i),{...e,droppable:{...e.droppable,containers:t}}}case he.SetDroppableDisabled:{const{id:i,key:o,disabled:t}=r,n=e.droppable.containers.get(i);if(!n||o!==n.key)return e;const u=new lt(e.droppable.containers);return u.set(i,{...n,disabled:t}),{...e,droppable:{...e.droppable,containers:u}}}case he.UnregisterDroppable:{const{id:i,key:o}=r,t=e.droppable.containers.get(i);if(!t||o!==t.key)return e;const n=new lt(e.droppable.containers);return n.delete(i),{...e,droppable:{...e.droppable,containers:n}}}default:return e}}function qo(e){let{disabled:r}=e;const{active:i,activatorEvent:o,draggableNodes:t}=F.useContext(Nt),n=Xt(o),u=Xt(i==null?void 0:i.id);return F.useEffect(()=>{if(!r&&!o&&n&&u!=null){if(!on(n)||document.activeElement===n.target)return;const l=t.get(u);if(!l)return;const{activatorNode:d,node:v}=l;if(!d.current&&!v.current)return;requestAnimationFrame(()=>{for(const s of[d.current,v.current]){if(!s)continue;const a=Br(s);if(a){a.focus();break}}})}},[o,r,t,u,n]),null}function Ko(e,r){let{transform:i,...o}=r;return e!=null&&e.length?e.reduce((t,n)=>n({transform:t,...o}),i):i}function Yo(e){return F.useMemo(()=>({draggable:{...yt.draggable,...e==null?void 0:e.draggable},droppable:{...yt.droppable,...e==null?void 0:e.droppable},dragOverlay:{...yt.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function Go(e){let{activeNode:r,measure:i,initialRect:o,config:t=!0}=e;const n=F.useRef(!1),{x:u,y:l}=typeof t=="boolean"?{x:t,y:t}:t;Be(()=>{if(!u&&!l||!r){n.current=!1;return}if(n.current||!o)return;const v=r==null?void 0:r.node.current;if(!v||v.isConnected===!1)return;const s=i(v),a=Yn(s,o);if(u||(a.x=0),l||(a.y=0),n.current=!0,Math.abs(a.x)>0||Math.abs(a.y)>0){const c=Gn(v);c&&c.scrollBy({top:a.y,left:a.x})}},[r,u,l,o,i])}const cr=F.createContext({..._e,scaleX:1,scaleY:1});var Xe;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Xe||(Xe={}));const Ri=F.memo(function(r){var i,o,t,n;let{id:u,accessibility:l,autoScroll:d=!0,children:v,sensors:s=Ho,collisionDetection:a=Jr,measuring:c,modifiers:f,...m}=r;const x=F.useReducer(Qo,void 0,Xo),[S,y]=x,[O,T]=Qr(),[D,N]=F.useState(Xe.Uninitialized),w=D===Xe.Initialized,{draggable:{active:U,nodes:g,translate:p},droppable:{containers:C}}=S,A=U!=null?g.get(U):null,E=F.useRef({initial:null,translated:null}),I=F.useMemo(()=>{var ne;return U!=null?{id:U,data:(ne=A==null?void 0:A.data)!=null?ne:jo,rect:E}:null},[U,A]),R=F.useRef(null),[k,b]=F.useState(null),[h,L]=F.useState(null),M=ut(m,Object.values(m)),P=pt("DndDescribedBy",u),j=F.useMemo(()=>C.getEnabled(),[C]),B=Yo(c),{droppableRects:H,measureDroppableContainers:z,measuringScheduled:_}=Mo(j,{dragging:w,dependencies:[p.x,p.y],config:B.droppable}),$=Do(g,U),Y=F.useMemo(()=>h?Qt(h):null,[h]),Q=Lt(),X=To($,B.draggable.measure);Go({activeNode:U!=null?g.get(U):null,config:Q.layoutShiftCompensation,initialRect:X,measure:B.draggable.measure});const W=wn($,B.draggable.measure,X),J=wn($?$.parentElement:null),K=F.useRef({activatorEvent:null,active:null,activeNode:$,collisionRect:null,collisions:null,droppableRects:H,draggableNodes:g,draggingNode:null,draggingNodeRect:null,droppableContainers:C,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ae=C.getNodeFor((i=K.current.over)==null?void 0:i.id),ue=Bo({measure:B.dragOverlay.measure}),G=(o=ue.nodeRef.current)!=null?o:$,oe=w?(t=ue.rect)!=null?t:W:null,ee=!!(ue.nodeRef.current&&ue.rect),V=Oo(ee?null:W),ce=sr(G?De(G):null),re=Fo(w?Ae??$:null),te=Po(re),ge=Ko(f,{transform:{x:p.x-V.x,y:p.y-V.y,scaleX:1,scaleY:1},activatorEvent:h,active:I,activeNodeRect:W,containerNodeRect:J,draggingNodeRect:oe,over:K.current.over,overlayNodeRect:ue.rect,scrollableAncestors:re,scrollableAncestorRects:te,windowRect:ce}),ie=Y?Je(Y,p):null,Z=No(re),ye=xn(Z),Le=xn(Z,[W]),ke=Je(ge,ye),se=oe?no(oe,ge):null,Ie=I&&se?a({active:I,collisionRect:se,droppableRects:H,droppableContainers:j,pointerCoordinates:ie}):null,pe=Kn(Ie,"id"),[fe,xe]=F.useState(null),Oe=ee?ge:Je(ge,Le),Te=eo(Oe,(n=fe==null?void 0:fe.rect)!=null?n:null,W),Fe=F.useRef(null),Ye=F.useCallback((ne,ae)=>{let{sensor:de,options:Re}=ae;if(R.current==null)return;const Ce=g.get(R.current);if(!Ce)return;const le=ne.nativeEvent,ve=new de({active:R.current,activeNode:Ce,event:le,options:Re,context:K,onAbort(me){if(!g.get(me))return;const{onDragAbort:Pe}=M.current,He={id:me};Pe==null||Pe(He),O({type:"onDragAbort",event:He})},onPending(me,$e,Pe,He){if(!g.get(me))return;const{onDragPending:ot}=M.current,We={id:me,constraint:$e,initialCoordinates:Pe,offset:He};ot==null||ot(We),O({type:"onDragPending",event:We})},onStart(me){const $e=R.current;if($e==null)return;const Pe=g.get($e);if(!Pe)return;const{onDragStart:He}=M.current,rt={activatorEvent:le,active:{id:$e,data:Pe.data,rect:E}};st.unstable_batchedUpdates(()=>{He==null||He(rt),N(Xe.Initializing),y({type:he.DragStart,initialCoordinates:me,active:$e}),O({type:"onDragStart",event:rt}),b(Fe.current),L(le)})},onMove(me){y({type:he.DragMove,coordinates:me})},onEnd:Ve(he.DragEnd),onCancel:Ve(he.DragCancel)});Fe.current=ve;function Ve(me){return async function(){const{active:Pe,collisions:He,over:rt,scrollAdjustedTranslate:ot}=K.current;let We=null;if(Pe&&ot){const{cancelDrop:it}=M.current;We={activatorEvent:le,active:Pe,collisions:He,delta:ot,over:rt},me===he.DragEnd&&typeof it=="function"&&await Promise.resolve(it(We))&&(me=he.DragCancel)}R.current=null,st.unstable_batchedUpdates(()=>{y({type:me}),N(Xe.Uninitialized),xe(null),b(null),L(null),Fe.current=null;const it=me===he.DragEnd?"onDragEnd":"onDragCancel";if(We){const Pt=M.current[it];Pt==null||Pt(We),O({type:it,event:We})}})}}},[g]),_t=F.useCallback((ne,ae)=>(de,Re)=>{const Ce=de.nativeEvent,le=g.get(Re);if(R.current!==null||!le||Ce.dndKit||Ce.defaultPrevented)return;const ve={active:le};ne(de,ae.options,ve)===!0&&(Ce.dndKit={capturedBy:ae.sensor},R.current=Re,Ye(de,ae))},[g,Ye]),Ge=Io(s,_t);_o(s),Be(()=>{W&&D===Xe.Initializing&&N(Xe.Initialized)},[W,D]),F.useEffect(()=>{const{onDragMove:ne}=M.current,{active:ae,activatorEvent:de,collisions:Re,over:Ce}=K.current;if(!ae||!de)return;const le={active:ae,activatorEvent:de,collisions:Re,delta:{x:ke.x,y:ke.y},over:Ce};st.unstable_batchedUpdates(()=>{ne==null||ne(le),O({type:"onDragMove",event:le})})},[ke.x,ke.y]),F.useEffect(()=>{const{active:ne,activatorEvent:ae,collisions:de,droppableContainers:Re,scrollAdjustedTranslate:Ce}=K.current;if(!ne||R.current==null||!ae||!Ce)return;const{onDragOver:le}=M.current,ve=Re.get(pe),Ve=ve&&ve.rect.current?{id:ve.id,rect:ve.rect.current,data:ve.data,disabled:ve.disabled}:null,me={active:ne,activatorEvent:ae,collisions:de,delta:{x:Ce.x,y:Ce.y},over:Ve};st.unstable_batchedUpdates(()=>{xe(Ve),le==null||le(me),O({type:"onDragOver",event:me})})},[pe]),Be(()=>{K.current={activatorEvent:h,active:I,activeNode:$,collisionRect:se,collisions:Ie,droppableRects:H,draggableNodes:g,draggingNode:G,draggingNodeRect:oe,droppableContainers:C,over:fe,scrollableAncestors:re,scrollAdjustedTranslate:ke},E.current={initial:oe,translated:se}},[I,$,Ie,se,g,G,oe,H,C,fe,re,ke]),Ro({...Q,delta:p,draggingRect:se,pointerCoordinates:ie,scrollableAncestors:re,scrollableAncestorRects:te});const vt=F.useMemo(()=>({active:I,activeNode:$,activeNodeRect:W,activatorEvent:h,collisions:Ie,containerNodeRect:J,dragOverlay:ue,draggableNodes:g,droppableContainers:C,droppableRects:H,over:fe,measureDroppableContainers:z,scrollableAncestors:re,scrollableAncestorRects:te,measuringConfiguration:B,measuringScheduled:_,windowRect:ce}),[I,$,W,h,Ie,J,ue,g,C,H,fe,z,re,te,B,_,ce]),qe=F.useMemo(()=>({activatorEvent:h,activators:Ge,active:I,activeNodeRect:W,ariaDescribedById:{draggable:P},dispatch:y,draggableNodes:g,over:fe,measureDroppableContainers:z}),[h,Ge,I,W,y,P,g,fe,z]);return Ee.createElement(Xn.Provider,{value:T},Ee.createElement(Nt.Provider,{value:qe},Ee.createElement(ar.Provider,{value:vt},Ee.createElement(cr.Provider,{value:Te},v)),Ee.createElement(qo,{disabled:(l==null?void 0:l.restoreFocus)===!1})),Ee.createElement(Yr,{...l,hiddenTextDescribedById:P}));function Lt(){const ne=(k==null?void 0:k.autoScrollEnabled)===!1,ae=typeof d=="object"?d.enabled===!1:d===!1,de=w&&!ne&&!ae;return typeof d=="object"?{...d,enabled:de}:{enabled:de}}}),Vo=F.createContext(null),An="button",Zo="Draggable";function Jo(e){let{id:r,data:i,disabled:o=!1,attributes:t}=e;const n=pt(Zo),{activators:u,activatorEvent:l,active:d,activeNodeRect:v,ariaDescribedById:s,draggableNodes:a,over:c}=F.useContext(Nt),{role:f=An,roleDescription:m="draggable",tabIndex:x=0}=t??{},S=(d==null?void 0:d.id)===r,y=F.useContext(S?cr:Vo),[O,T]=Et(),[D,N]=Et(),w=Lo(u,r),U=ut(i);Be(()=>(a.set(r,{id:r,key:n,node:O,activatorNode:D,data:U}),()=>{const p=a.get(r);p&&p.key===n&&a.delete(r)}),[a,r]);const g=F.useMemo(()=>({role:f,tabIndex:x,"aria-disabled":o,"aria-pressed":S&&f===An?!0:void 0,"aria-roledescription":m,"aria-describedby":s.draggable}),[o,f,x,S,m,s.draggable]);return{active:d,activatorEvent:l,activeNodeRect:v,attributes:g,isDragging:S,listeners:o?void 0:w,node:O,over:c,setNodeRef:T,setActivatorNodeRef:N,transform:y}}function ei(){return F.useContext(ar)}const ti="Droppable",ni={timeout:25};function ri(e){let{data:r,disabled:i=!1,id:o,resizeObserverConfig:t}=e;const n=pt(ti),{active:u,dispatch:l,over:d,measureDroppableContainers:v}=F.useContext(Nt),s=F.useRef({disabled:i}),a=F.useRef(!1),c=F.useRef(null),f=F.useRef(null),{disabled:m,updateMeasurementsFor:x,timeout:S}={...ni,...t},y=ut(x??o),O=F.useCallback(()=>{if(!a.current){a.current=!0;return}f.current!=null&&clearTimeout(f.current),f.current=setTimeout(()=>{v(Array.isArray(y.current)?y.current:[y.current]),f.current=null},S)},[S]),T=Ft({callback:O,disabled:m||!u}),D=F.useCallback((g,p)=>{T&&(p&&(T.unobserve(p),a.current=!1),g&&T.observe(g))},[T]),[N,w]=Et(D),U=ut(r);return F.useEffect(()=>{!T||!N.current||(T.disconnect(),a.current=!1,T.observe(N.current))},[N,T]),F.useEffect(()=>(l({type:he.RegisterDroppable,element:{id:o,key:n,disabled:i,node:N,rect:c,data:U}}),()=>l({type:he.UnregisterDroppable,key:n,id:o})),[o]),F.useEffect(()=>{i!==s.current.disabled&&(l({type:he.SetDroppableDisabled,id:o,key:n,disabled:i}),s.current.disabled=i)},[o,n,i,l]),{active:u,rect:c,isOver:(d==null?void 0:d.id)===o,node:N,over:d,setNodeRef:w}}function lr(e,r,i){const o=e.slice();return o.splice(i<0?o.length+i:i,0,o.splice(r,1)[0]),o}function oi(e,r){return e.reduce((i,o,t)=>{const n=r.get(o);return n&&(i[t]=n),i},Array(e.length))}function bt(e){return e!==null&&e>=0}function ii(e,r){if(e===r)return!0;if(e.length!==r.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!==r[i])return!1;return!0}function si(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const ur=e=>{let{rects:r,activeIndex:i,overIndex:o,index:t}=e;const n=lr(r,o,i),u=r[t],l=n[t];return!l||!u?null:{x:l.left-u.left,y:l.top-u.top,scaleX:l.width/u.width,scaleY:l.height/u.height}},mt={scaleX:1,scaleY:1},Ei=e=>{var r;let{activeIndex:i,activeNodeRect:o,index:t,rects:n,overIndex:u}=e;const l=(r=n[i])!=null?r:o;if(!l)return null;if(t===i){const v=n[u];return v?{x:0,y:i<u?v.top+v.height-(l.top+l.height):v.top-l.top,...mt}:null}const d=ai(n,t,i);return t>i&&t<=u?{x:0,y:-l.height-d,...mt}:t<i&&t>=u?{x:0,y:l.height+d,...mt}:{x:0,y:0,...mt}};function ai(e,r,i){const o=e[r],t=e[r-1],n=e[r+1];return o?i<r?t?o.top-(t.top+t.height):n?n.top-(o.top+o.height):0:n?n.top-(o.top+o.height):t?o.top-(t.top+t.height):0:0}const fr="Sortable",dr=Ee.createContext({activeIndex:-1,containerId:fr,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:ur,disabled:{draggable:!1,droppable:!1}});function Si(e){let{children:r,id:i,items:o,strategy:t=ur,disabled:n=!1}=e;const{active:u,dragOverlay:l,droppableRects:d,over:v,measureDroppableContainers:s}=ei(),a=pt(fr,i),c=l.rect!==null,f=F.useMemo(()=>o.map(w=>typeof w=="object"&&"id"in w?w.id:w),[o]),m=u!=null,x=u?f.indexOf(u.id):-1,S=v?f.indexOf(v.id):-1,y=F.useRef(f),O=!ii(f,y.current),T=S!==-1&&x===-1||O,D=si(n);Be(()=>{O&&m&&s(f)},[O,f,m,s]),F.useEffect(()=>{y.current=f},[f]);const N=F.useMemo(()=>({activeIndex:x,containerId:a,disabled:D,disableTransforms:T,items:f,overIndex:S,useDragOverlay:c,sortedRects:oi(f,d),strategy:t}),[x,a,D.draggable,D.droppable,T,f,S,d,c,t]);return Ee.createElement(dr.Provider,{value:N},r)}const ci=e=>{let{id:r,items:i,activeIndex:o,overIndex:t}=e;return lr(i,o,t).indexOf(r)},li=e=>{let{containerId:r,isSorting:i,wasDragging:o,index:t,items:n,newIndex:u,previousItems:l,previousContainerId:d,transition:v}=e;return!v||!o||l!==n&&t===u?!1:i?!0:u!==t&&r===d},ui={duration:200,easing:"ease"},hr="transform",fi=St.Transition.toString({property:hr,duration:0,easing:"linear"}),di={roleDescription:"sortable"};function hi(e){let{disabled:r,index:i,node:o,rect:t}=e;const[n,u]=F.useState(null),l=F.useRef(i);return Be(()=>{if(!r&&i!==l.current&&o.current){const d=t.current;if(d){const v=nt(o.current,{ignoreTransform:!0}),s={x:d.left-v.left,y:d.top-v.top,scaleX:d.width/v.width,scaleY:d.height/v.height};(s.x||s.y)&&u(s)}}i!==l.current&&(l.current=i)},[r,i,o,t]),F.useEffect(()=>{n&&u(null)},[n]),n}function Di(e){let{animateLayoutChanges:r=li,attributes:i,disabled:o,data:t,getNewIndex:n=ci,id:u,strategy:l,resizeObserverConfig:d,transition:v=ui}=e;const{items:s,containerId:a,activeIndex:c,disabled:f,disableTransforms:m,sortedRects:x,overIndex:S,useDragOverlay:y,strategy:O}=F.useContext(dr),T=gi(o,f),D=s.indexOf(u),N=F.useMemo(()=>({sortable:{containerId:a,index:D,items:s},...t}),[a,t,D,s]),w=F.useMemo(()=>s.slice(s.indexOf(u)),[s,u]),{rect:U,node:g,isOver:p,setNodeRef:C}=ri({id:u,data:N,disabled:T.droppable,resizeObserverConfig:{updateMeasurementsFor:w,...d}}),{active:A,activatorEvent:E,activeNodeRect:I,attributes:R,setNodeRef:k,listeners:b,isDragging:h,over:L,setActivatorNodeRef:M,transform:P}=Jo({id:u,data:N,attributes:{...di,...i},disabled:T.draggable}),j=_r(C,k),B=!!A,H=B&&!m&&bt(c)&&bt(S),z=!y&&h,_=z&&H?P:null,Y=H?_??(l??O)({rects:x,activeNodeRect:I,activeIndex:c,overIndex:S,index:D}):null,Q=bt(c)&&bt(S)?n({id:u,items:s,activeIndex:c,overIndex:S}):D,X=A==null?void 0:A.id,W=F.useRef({activeId:X,items:s,newIndex:Q,containerId:a}),J=s!==W.current.items,K=r({active:A,containerId:a,isDragging:h,isSorting:B,id:u,index:D,items:s,newIndex:W.current.newIndex,previousItems:W.current.items,previousContainerId:W.current.containerId,transition:v,wasDragging:W.current.activeId!=null}),Ae=hi({disabled:!K,index:D,node:g,rect:U});return F.useEffect(()=>{B&&W.current.newIndex!==Q&&(W.current.newIndex=Q),a!==W.current.containerId&&(W.current.containerId=a),s!==W.current.items&&(W.current.items=s)},[B,Q,a,s]),F.useEffect(()=>{if(X===W.current.activeId)return;if(X!=null&&W.current.activeId==null){W.current.activeId=X;return}const G=setTimeout(()=>{W.current.activeId=X},50);return()=>clearTimeout(G)},[X]),{active:A,activeIndex:c,attributes:R,data:N,rect:U,index:D,newIndex:Q,items:s,isOver:p,isSorting:B,isDragging:h,listeners:b,node:g,overIndex:S,over:L,setNodeRef:j,setActivatorNodeRef:M,setDroppableNodeRef:C,setDraggableNodeRef:k,transform:Ae??Y,transition:ue()};function ue(){if(Ae||J&&W.current.newIndex===D)return fi;if(!(z&&!on(E)||!v)&&(B||K))return St.Transition.toString({...v,property:hr})}}function gi(e,r){var i,o;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(i=e==null?void 0:e.draggable)!=null?i:r.draggable,droppable:(o=e==null?void 0:e.droppable)!=null?o:r.droppable}}function Mt(e){if(!e)return!1;const r=e.data.current;return!!(r&&"sortable"in r&&typeof r.sortable=="object"&&"containerId"in r.sortable&&"items"in r.sortable&&"index"in r.sortable)}const pi=[q.Down,q.Right,q.Up,q.Left],Ii=(e,r)=>{let{context:{active:i,collisionRect:o,droppableRects:t,droppableContainers:n,over:u,scrollableAncestors:l}}=r;if(pi.includes(e.code)){if(e.preventDefault(),!i||!o)return;const d=[];n.getEnabled().forEach(a=>{if(!a||a!=null&&a.disabled)return;const c=t.get(a.id);if(c)switch(e.code){case q.Down:o.top<c.top&&d.push(a);break;case q.Up:o.top>c.top&&d.push(a);break;case q.Left:o.left>c.left&&d.push(a);break;case q.Right:o.left<c.left&&d.push(a);break}});const v=Vr({collisionRect:o,droppableRects:t,droppableContainers:d});let s=Kn(v,"id");if(s===(u==null?void 0:u.id)&&v.length>1&&(s=v[1].id),s!=null){const a=n.get(i.id),c=n.get(s),f=c?t.get(c.id):null,m=c==null?void 0:c.node.current;if(m&&f&&a&&c){const S=Ot(m).some((w,U)=>l[U]!==w),y=gr(a,c),O=vi(a,c),T=S||!y?{x:0,y:0}:{x:O?o.width-f.width:0,y:O?o.height-f.height:0},D={x:f.left,y:f.top};return T.x&&T.y?D:ft(D,T)}}}};function gr(e,r){return!Mt(e)||!Mt(r)?!1:e.data.current.sortable.containerId===r.data.current.sortable.containerId}function vi(e,r){return!Mt(e)||!Mt(r)||!gr(e,r)?!1:e.data.current.sortable.index<r.data.current.sortable.index}export{Er as C,Ri as D,rr as K,or as P,Si as S,Ci as a,xi as b,Ai as c,lr as d,Di as e,St as f,ur as r,Ii as s,yi as u,Ei as v};
