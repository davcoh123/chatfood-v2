import{j as e,h as t,B as D,C as c,a as m,b as x,f as F,c as h,g as y}from"./index.js";import{T as O,a as K,b as v,c as C}from"./tabs.js";import{R as j,C as b,X as N,Y as p,T as f,c as S,L as B,A as V,a as z,B as G,b as P}from"./AreaChart.js";import{C as H,P as W,a as I}from"./ComposedChart.js";import{L as J}from"./LineChart.js";import{a as M}from"./useSatisfactionAnalytics.js";import{u as Y,a as X}from"./useAnalyticsExport.js";import{F as _}from"./file-text.js";import{F as U}from"./file-spreadsheet.js";import{C as q}from"./calendar.js";import{T as Q}from"./trophy.js";import{C as Z}from"./clock.js";import"./index2.js";import"./index3.js";import"./isPlainObject.js";import"./useQuery.js";import"./endOfWeek.js";import"./fr.js";const ee=({weeklyData:a,hourlyData:d,peakDay:i="N/A",peakDayOrders:o=0,peakHour:s="N/A",peakHourOrders:r=0,weekendVsWeekdayRatio:l=0,isLoading:u=!1})=>u?e.jsxs("div",{className:"space-y-8",children:[e.jsx(t,{className:"h-[350px] w-full"}),e.jsx(t,{className:"h-[350px] w-full"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(t,{className:"h-24"}),e.jsx(t,{className:"h-24"}),e.jsx(t,{className:"h-24"})]})]}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"h-[350px] w-full",children:[e.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Répartition par jour de la semaine"}),e.jsx(j,{width:"100%",height:"100%",children:e.jsxs(H,{data:a,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(b,{strokeDasharray:"3 3",className:"opacity-30"}),e.jsx(N,{dataKey:"day",className:"text-sm",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(p,{yAxisId:"orders",orientation:"left",className:"text-sm",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(p,{yAxisId:"percentage",orientation:"right",className:"text-sm",tick:{fill:"hsl(var(--muted-foreground))"},tickFormatter:n=>`${n}%`}),e.jsx(f,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"},formatter:(n,g)=>[g==="orders"?`${n} commandes`:`${n}%`,g==="orders"?"Commandes":"Pourcentage"],labelStyle:{color:"hsl(var(--foreground))"}}),e.jsx(S,{yAxisId:"orders",dataKey:"orders",fill:"hsl(var(--primary))",fillOpacity:.8,radius:[4,4,0,0],isAnimationActive:!0}),e.jsx(B,{yAxisId:"percentage",type:"monotone",dataKey:"percentage",stroke:"hsl(var(--secondary))",strokeWidth:3,dot:{fill:"hsl(var(--secondary))",strokeWidth:2,r:5},isAnimationActive:!0})]})})]}),e.jsxs("div",{className:"h-[350px] w-full",children:[e.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Répartition par heure de la journée"}),e.jsx(j,{width:"100%",height:"100%",children:e.jsxs(V,{data:d,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"ordersGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"hsl(var(--primary))",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"hsl(var(--primary))",stopOpacity:0})]})}),e.jsx(b,{strokeDasharray:"3 3",className:"opacity-30"}),e.jsx(N,{dataKey:"hour",className:"text-sm",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(p,{className:"text-sm",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(f,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"},formatter:n=>[`${n} commandes`,"Commandes"],labelStyle:{color:"hsl(var(--foreground))"}}),e.jsx(z,{type:"monotone",dataKey:"orders",stroke:"hsl(var(--primary))",strokeWidth:3,fill:"url(#ordersGradient)",fillOpacity:.6,isAnimationActive:!0})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"p-4 rounded-lg border bg-card text-card-foreground bg-gradient-to-br from-blue-500/5 to-blue-500/10",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Jour le plus actif"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:i}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[o," commandes"]})]})}),e.jsx("div",{className:"p-4 rounded-lg border bg-card text-card-foreground bg-gradient-to-br from-purple-500/5 to-purple-500/10",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Heure de pointe"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:s}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[r," commandes/heure"]})]})}),e.jsx("div",{className:"p-4 rounded-lg border bg-card text-card-foreground bg-gradient-to-br from-green-500/5 to-green-500/10",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Weekend vs Semaine"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[l>=0?"+":"",l,"%"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[l>=0?"Plus de":"Moins de"," commandes weekend"]})]})})]})]}),se={Pizzas:"#FF6B6B",Burgers:"#4ECDC4",Salades:"#96CEB4",Pâtes:"#45B7D1",Desserts:"#FFEAA7",Boissons:"#A29BFE",Entrées:"#FD79A8",Autres:"#B2BEC3"},re=({products:a,categoryColors:d=se,isLoading:i=!1})=>{if(i)return e.jsxs("div",{className:"space-y-8",children:[e.jsx(t,{className:"h-[400px] w-full"}),e.jsx(t,{className:"h-[350px] w-full"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(t,{className:"h-32"}),e.jsx(t,{className:"h-32"}),e.jsx(t,{className:"h-32"}),e.jsx(t,{className:"h-32"})]})]});if(a.length===0)return e.jsx("div",{className:"flex items-center justify-center h-[400px] text-muted-foreground",children:"Aucune donnée de produit disponible"});const o=s=>d[s]||d.Autres||"#B2BEC3";return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"h-[400px] w-full",children:[e.jsxs("h4",{className:"text-lg font-semibold mb-4",children:["Top ",Math.min(a.length,8)," des produits les plus vendus"]}),e.jsx(j,{width:"100%",height:"100%",children:e.jsxs(G,{data:a.slice(0,8),margin:{top:20,right:30,left:20,bottom:80},children:[e.jsx(b,{strokeDasharray:"3 3",className:"opacity-30"}),e.jsx(N,{dataKey:"name",className:"text-sm",tick:{fill:"hsl(var(--muted-foreground))",fontSize:12},angle:-45,textAnchor:"end",height:80}),e.jsx(p,{className:"text-sm",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(f,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"},formatter:(s,r,l)=>[r==="sales"?`${s} ventes`:`€${s}`,r==="sales"?"Ventes":"Revenus"],labelFormatter:(s,r)=>{var u;const l=(u=r==null?void 0:r[0])==null?void 0:u.payload;return l?`${s} (${l.category})`:s},labelStyle:{color:"hsl(var(--foreground))"}}),e.jsx(S,{dataKey:"sales",radius:[4,4,0,0],isAnimationActive:!0,children:a.slice(0,8).map((s,r)=>e.jsx(P,{fill:o(s.category)},`cell-${r}`))})]})})]}),e.jsxs("div",{className:"h-[350px] w-full",children:[e.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Répartition des ventes par produit"}),e.jsx(j,{width:"100%",height:"100%",children:e.jsxs(W,{children:[e.jsx(I,{data:a.slice(0,6),cx:"50%",cy:"50%",labelLine:!1,label:({name:s,percentage:r})=>`${s.split(" ")[0]} ${r}%`,outerRadius:120,fill:"#8884d8",dataKey:"sales",isAnimationActive:!0,children:a.slice(0,6).map((s,r)=>e.jsx(P,{fill:o(s.category)},`cell-${r}`))}),e.jsx(f,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"},formatter:(s,r,l)=>[`${s} ventes (${l.payload.percentage}%)`,"Ventes"]})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-lg font-semibold",children:"Détails par produit"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:a.slice(0,4).map((s,r)=>e.jsx("div",{className:"p-4 rounded-lg border bg-card text-card-foreground",style:{borderLeft:`4px solid ${o(s.category)}`},children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h5",{className:"font-semibold text-sm truncate",children:s.name}),e.jsx("span",{className:"text-xs bg-muted px-2 py-1 rounded",children:s.category})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Ventes:"}),e.jsx("span",{className:"font-semibold",children:s.sales})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Revenus:"}),e.jsxs("span",{className:"font-semibold",children:["€",s.revenue]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Part:"}),e.jsxs("span",{className:"font-semibold text-primary",children:[s.percentage,"%"]})]})]})]})},s.name))})]})]})},ae=({volumeData:a,isLoading:d=!1})=>d?e.jsx(t,{className:"h-[400px] w-full"}):a.length===0?e.jsx("div",{className:"flex items-center justify-center h-[400px] text-muted-foreground",children:"Aucune donnée de volume disponible"}):e.jsx("div",{className:"h-[400px] w-full",children:e.jsx(j,{width:"100%",height:"100%",children:e.jsxs(J,{data:a,children:[e.jsx(b,{strokeDasharray:"3 3",className:"opacity-30"}),e.jsx(N,{dataKey:"week",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(p,{tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(f,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"8px"},formatter:i=>[`${i} commandes`,"Volume"]}),e.jsx(B,{type:"monotone",dataKey:"orders",stroke:"hsl(var(--primary))",strokeWidth:3,isAnimationActive:!0})]})})}),ve=()=>{const{ordersThisMonth:a,ordersGrowth:d,peakDay:i,peakDayOrders:o,peakHour:s,peakHourOrders:r,ordersByDayOfWeek:l,ordersByHour:u,weeklyVolume:n,weekendVsWeekdayRatio:g,isLoading:w}=M(),{topProducts:T,topProduct:k,categoryColors:E,isLoading:L}=Y(),{exportPDF:R,exportExcel:$,isExporting:A}=X();return e.jsxs("div",{className:"p-6 space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 animate-fade-in",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Analyse des Commandes"}),e.jsx("p",{className:"text-muted-foreground",children:"Découvrez les tendances de commandes et les produits les plus populaires"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(D,{variant:"outline",size:"sm",onClick:R,disabled:A,children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),"Export PDF"]}),e.jsxs(D,{variant:"outline",size:"sm",onClick:$,disabled:A,children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Export Excel"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 animate-slide-up",children:[e.jsxs(c,{className:"border-primary/10 bg-gradient-to-br from-blue-500/5 to-blue-500/10",children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(x,{className:"text-sm font-medium",children:"Commandes ce mois"}),e.jsx(F,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(h,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:a}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[d>=0?"+":"",d,"% vs mois dernier"]})]})]}),e.jsxs(c,{className:"border-primary/10 bg-gradient-to-br from-green-500/5 to-green-500/10",children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(x,{className:"text-sm font-medium",children:"Jour de pointe"}),e.jsx(q,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(h,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:i}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[o," commandes/jour"]})]})]}),e.jsxs(c,{className:"border-primary/10 bg-gradient-to-br from-purple-500/5 to-purple-500/10",children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(x,{className:"text-sm font-medium",children:"Produit #1"}),e.jsx(Q,{className:"h-4 w-4 text-purple-600"})]}),e.jsxs(h,{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600 truncate",children:k.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[k.sales," ventes ce mois"]})]})]}),e.jsxs(c,{className:"border-primary/10 bg-gradient-to-br from-orange-500/5 to-orange-500/10",children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(x,{className:"text-sm font-medium",children:"Heure de pointe"}),e.jsx(Z,{className:"h-4 w-4 text-orange-600"})]}),e.jsxs(h,{children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:s}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[r," commandes"]})]})]})]}),e.jsxs(O,{defaultValue:"timeline",className:"animate-slide-up animation-delay-200",children:[e.jsxs(K,{className:"grid w-full grid-cols-3",children:[e.jsx(v,{value:"timeline",children:"Jours de Commande"}),e.jsx(v,{value:"products",children:"Produits Populaires"}),e.jsx(v,{value:"volume",children:"Volume"})]}),e.jsx(C,{value:"timeline",className:"space-y-4 animate-tab-content",children:e.jsxs(c,{children:[e.jsxs(m,{children:[e.jsx(x,{children:"Répartition des Commandes par Jour"}),e.jsx(y,{children:"Découvrez les jours où vous recevez le plus de commandes"})]}),e.jsx(h,{children:e.jsx(ee,{weeklyData:l,hourlyData:u,peakDay:i,peakDayOrders:o,peakHour:s,peakHourOrders:r,weekendVsWeekdayRatio:g,isLoading:w})})]})}),e.jsx(C,{value:"products",className:"space-y-4 animate-tab-content",children:e.jsxs(c,{children:[e.jsxs(m,{children:[e.jsx(x,{children:"Produits les Plus Vendus"}),e.jsx(y,{children:"Classement de vos produits par nombre de ventes"})]}),e.jsx(h,{children:e.jsx(re,{products:T,categoryColors:E,isLoading:L})})]})}),e.jsx(C,{value:"volume",className:"space-y-4 animate-tab-content",children:e.jsxs(c,{children:[e.jsxs(m,{children:[e.jsx(x,{children:"Volume des Commandes"}),e.jsx(y,{children:"Évolution du nombre de commandes dans le temps"})]}),e.jsx(h,{children:e.jsx(ae,{volumeData:n,isLoading:w})})]})})]})]})};export{ve as default};
