import{r as c,d as l,u as i,m as r,s as p}from"./index.js";const g=()=>{const[u,t]=c.useState(!1),{signOut:n}=l(),a=i();return{deleteAccount:async o=>{if(o!=="SUPPRIMER")return r.error("Veuillez taper SUPPRIMER pour confirmer"),!1;t(!0);try{const{data:e,error:s}=await p.functions.invoke("user-delete-account",{body:{confirmation:o}});return s?(console.error("Error deleting account:",s),r.error(s.message||"Erreur lors de la suppression du compte"),!1):e!=null&&e.error?(r.error(e.error),!1):(r.success("Votre compte a été supprimé avec succès"),await n(),a("/"),!0)}catch(e){return console.error("Error deleting account:",e),r.error("Une erreur est survenue lors de la suppression"),!1}finally{t(!1)}},isDeleting:u}};export{g as u};
