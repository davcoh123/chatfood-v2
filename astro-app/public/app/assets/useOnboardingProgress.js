import{u as A}from"./useCatalogue.js";import{u as S}from"./useRestaurantSettings.js";import{u as x}from"./useWhatsAppIntegration.js";function P(r){var p;const{settings:e,isLoading:c}=S(r),{items:n,isLoading:u}=A({userId:r}),{integration:s,isLoading:m}=x(r),g=c||u||m,f=!!((p=e==null?void 0:e.restaurant_name)!=null&&p.trim()),h=!!(e!=null&&e.opening_hours&&Array.isArray(e.opening_hours)&&e.opening_hours.some(o=>{var d,i;return((d=o.slot1)==null?void 0:d.trim())||((i=o.slot2)==null?void 0:i.trim())})),C=(s==null?void 0:s.status)==="active",b=n&&n.length>0,L=!!(e!=null&&e.siret&&e.siret.replace(/\s/g,"").length===14),t=[{id:1,label:"Restaurant",completed:f,required:!0},{id:2,label:"Horaires",completed:h,required:!1},{id:3,label:"WhatsApp",completed:C,required:!1},{id:4,label:"Catalogue",completed:b,required:!1},{id:5,label:"SIRET",completed:L,required:!1}],a=t.filter(o=>o.completed).length,q=Math.round(a/t.length*100),l=t.findIndex(o=>!o.completed),_=l===-1?5:l+1;return{steps:t,currentStep:_,completedCount:a,progressPercent:q,isLoading:g,onboardingCompleted:(e==null?void 0:e.onboarding_completed)??!1}}export{P as u};
