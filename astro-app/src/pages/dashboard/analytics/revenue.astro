---
import DashboardLayout from '@/layouts/DashboardLayout.astro';
import { DashboardRoot } from '@/components/react/providers/DashboardRoot';
import RevenueAnalyticsPage from '@/components/react/analytics/RevenueAnalyticsPage';

// Get user, session, profile from middleware locals
const user = (Astro.locals as any).user;
const session = (Astro.locals as any).session;
const profile = (Astro.locals as any).profile;

if (!user) {
  return Astro.redirect('/login?redirect=/dashboard/analytics/revenue');
}
---

<DashboardLayout title="Analytics - Revenus">
  <DashboardRoot client:only="react" user={user} session={session} profile={profile}>
    <RevenueAnalyticsPage />
  </DashboardRoot>
</DashboardLayout>
