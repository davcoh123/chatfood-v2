---
import DashboardLayout from '@/layouts/DashboardLayout.astro';
import { createServerClient } from '@/lib/supabase';
import SupportPage from '@/components/react/SupportPage';

// Auth check
const supabase = createServerClient(Astro.cookies);
const { data: { user } } = await supabase.auth.getUser();

if (!user) {
  return Astro.redirect('/login?redirect=/dashboard/support');
}
---

<DashboardLayout title="Support">
  <div class="space-y-6">
    <div>
      <h1 class="text-2xl md:text-3xl font-bold">Support</h1>
      <p class="text-gray-500 mt-2">
        Besoin d'aide ? Créez un ticket et notre équipe vous répondra rapidement.
      </p>
    </div>
    
    <SupportPage client:only="react" />
  </div>
</DashboardLayout>
