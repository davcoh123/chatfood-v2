---
import DashboardLayout from '@/layouts/DashboardLayout.astro';
import SettingsPage from '@/components/react/SettingsPage';

// Get user from middleware locals (profile data is already merged)
const user = (Astro.locals as any).user;

if (!user) {
  return Astro.redirect('/login?redirect=/dashboard/settings');
}
---

<DashboardLayout title="Paramètres">
  <div class="space-y-6">
    <div>
      <h1 class="text-2xl md:text-3xl font-bold">Paramètres</h1>
      <p class="text-gray-500 mt-2">
        Configurez votre restaurant et votre compte
      </p>
    </div>
    
    <SettingsPage 
      client:only="react" 
      userId={user.id}
      userEmail={user.email || ''}
      firstName={user.first_name || ''}
      lastName={user.last_name || ''}
    />
  </div>
</DashboardLayout>
