---
import AdminLayout from '@/layouts/AdminLayout.astro';
import AdminDashboardsPage from '@/components/react/admin/AdminDashboardsPage';

// Get user from middleware locals (includes role)
const user = (Astro.locals as any).user;

if (!user) {
  return Astro.redirect('/login?redirect=/admin/dashboards');
}

if (user.role !== 'admin') {
  return Astro.redirect('/dashboard');
}
---

<AdminLayout title="Restaurants - Admin">
  <AdminDashboardsPage client:only="react" />
</AdminLayout>
